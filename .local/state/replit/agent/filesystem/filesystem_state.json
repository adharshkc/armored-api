{"file_contents":{"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"server/db.ts":{"content":"import { drizzle } from \"drizzle-orm/node-postgres\";\nimport pg from \"pg\";\nimport * as schema from \"@shared/schema\";\n\nconst { Pool } = pg;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle(pool, { schema });\n","path":null,"size_bytes":395,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"grid place-content-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1031,"size_tokens":null},"client/src/pages/cart.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Separator } from \"@/components/ui/separator\";\nimport ProductImage from \"@/components/ui/product-image\";\nimport { Trash2, ArrowRight, RotateCcw, Heart, Plus, Minus, ShoppingBag, Loader2 } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { useState, useEffect } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function CartPage() {\n  const [, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem('auth_token');\n    setIsAuthenticated(!!token);\n  }, []);\n\n  const { data: cartItems, isLoading } = useQuery({\n    queryKey: ['cart'],\n    queryFn: api.cart.get,\n    enabled: isAuthenticated,\n  });\n\n  const { data: recommendedProducts } = useQuery({\n    queryKey: ['topSelling'],\n    queryFn: api.products.getTopSelling\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: ({ id, quantity }: { id: number; quantity: number }) => \n      api.cart.update(id, quantity),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['cart'] });\n    },\n  });\n\n  const removeMutation = useMutation({\n    mutationFn: (id: number) => api.cart.remove(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['cart'] });\n      toast({ title: \"Item removed from cart\" });\n    },\n  });\n\n  const handleQuantityChange = (id: number, currentQty: number, delta: number) => {\n    const newQty = currentQty + delta;\n    if (newQty < 1) return;\n    updateMutation.mutate({ id, quantity: newQty });\n  };\n\n  const subtotal = cartItems?.reduce((acc, item) => \n    acc + (parseFloat(item.product.price) * item.quantity), 0) || 0;\n  const tax = subtotal * 0.05;\n  const total = subtotal + tax;\n\n  if (!isAuthenticated) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen pb-20\">\n          <div className=\"container mx-auto px-4 py-20 text-center\">\n            <ShoppingBag className=\"h-16 w-16 mx-auto text-slate-300 mb-4\" />\n            <h2 className=\"text-2xl font-bold mb-2\">Please log in to view your cart</h2>\n            <p className=\"text-slate-500 mb-6\">You need to be logged in to add items to your cart</p>\n            <Link href=\"/auth/login\">\n              <Button className=\"bg-orange-600 hover:bg-orange-700\">Login</Button>\n            </Link>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen flex items-center justify-center\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-orange-600\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  if (!cartItems || cartItems.length === 0) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen pb-20\">\n          <div className=\"container mx-auto px-4 py-20 text-center\">\n            <ShoppingBag className=\"h-16 w-16 mx-auto text-slate-300 mb-4\" />\n            <h2 className=\"text-2xl font-bold mb-2\">Your cart is empty</h2>\n            <p className=\"text-slate-500 mb-6\">Add some products to get started</p>\n            <Link href=\"/products\">\n              <Button className=\"bg-orange-600 hover:bg-orange-700\">Browse Products</Button>\n            </Link>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"bg-slate-50 min-h-screen pb-20\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <Link href=\"/products\">\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-primary cursor-pointer\">\n                <ArrowRight className=\"h-4 w-4 rotate-180\" /> CONTINUE SHOPPING\n              </div>\n            </Link>\n          </div>\n\n          <h1 className=\"text-3xl font-display font-bold mb-8 uppercase\">\n            My Cart <span className=\"text-lg text-muted-foreground font-normal normal-case\">({cartItems.length} items)</span>\n          </h1>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            <div className=\"lg:col-span-2 space-y-4\">\n              {cartItems.map((item) => (\n                <div key={item.id} className=\"bg-white rounded-lg p-6 shadow-sm border border-slate-100 relative\" data-testid={`cart-item-${item.id}`}>\n                  <div className=\"flex gap-6\">\n                    <Link href={`/products/${item.product.id}`}>\n                      <div className=\"w-24 h-24 bg-slate-50 rounded-md overflow-hidden border flex-shrink-0 cursor-pointer\">\n                        <ProductImage src={item.product.image} alt={item.product.name} className=\"w-full h-full object-contain p-2\" placeholderClassName=\"w-full h-full\" />\n                      </div>\n                    </Link>\n                    \n                    <div className=\"flex-1\">\n                      <div className=\"flex justify-between items-start mb-2\">\n                        <Link href={`/products/${item.product.id}`}>\n                          <h3 className=\"font-bold text-slate-900 text-lg leading-tight max-w-[70%] hover:text-orange-600 cursor-pointer\">\n                            {item.product.name}\n                          </h3>\n                        </Link>\n                        <div className=\"text-right\">\n                          <div className=\"text-2xl font-bold font-display text-slate-900\">\n                            AED {(parseFloat(item.product.price) * item.quantity).toFixed(2)}\n                          </div>\n                          {item.quantity > 1 && (\n                            <div className=\"text-sm text-slate-500\">\n                              AED {parseFloat(item.product.price).toFixed(2)} each\n                            </div>\n                          )}\n                        </div>\n                      </div>\n\n                      <div className=\"text-xs text-green-600 font-medium mb-1\">\n                        {item.product.stock > 0 ? 'In Stock' : 'Out of Stock'}\n                      </div>\n                      <div className=\"text-xs text-muted-foreground mb-1\">SKU: {item.product.sku}</div>\n                      <div className=\"text-xs text-slate-500 mb-4\">{item.product.make} {item.product.model}</div>\n\n                      <div className=\"flex items-center justify-between border-t border-slate-100 pt-4 mt-4\">\n                        <div className=\"text-xs text-orange-600 flex items-center gap-1 bg-orange-50 px-2 py-1 rounded\">\n                          <RotateCcw className=\"h-3 w-3\" /> 30-day return policy\n                        </div>\n                        \n                        <div className=\"flex items-center gap-2\">\n                          <Button \n                            variant=\"outline\" \n                            size=\"icon\" \n                            className=\"h-8 w-8 rounded-full\"\n                            onClick={() => handleQuantityChange(item.id, item.quantity, -1)}\n                            disabled={item.quantity <= 1 || updateMutation.isPending}\n                            data-testid={`btn-decrease-${item.id}`}\n                          >\n                            <Minus className=\"h-3 w-3\" />\n                          </Button>\n                          <span className=\"w-8 text-center font-bold\">{item.quantity}</span>\n                          <Button \n                            variant=\"outline\" \n                            size=\"icon\" \n                            className=\"h-8 w-8 rounded-full\"\n                            onClick={() => handleQuantityChange(item.id, item.quantity, 1)}\n                            disabled={updateMutation.isPending}\n                            data-testid={`btn-increase-${item.id}`}\n                          >\n                            <Plus className=\"h-3 w-3\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-end gap-6 mt-4 pt-3 border-t border-slate-50 text-xs text-muted-foreground font-medium\">\n                    <button \n                      className=\"flex items-center gap-1 hover:text-destructive transition-colors\"\n                      onClick={() => removeMutation.mutate(item.id)}\n                      disabled={removeMutation.isPending}\n                      data-testid={`btn-remove-${item.id}`}\n                    >\n                      <Trash2 className=\"h-3 w-3\" /> Remove\n                    </button>\n                    <button className=\"flex items-center gap-1 hover:text-primary transition-colors\">\n                      <Heart className=\"h-3 w-3\" /> Save for later\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            <div>\n              <div className=\"bg-[#EFEBE4] rounded-lg p-6 sticky top-24\">\n                <h3 className=\"font-display font-bold text-lg mb-6 uppercase\">Order Summary</h3>\n                \n                <div className=\"space-y-4 mb-6\">\n                  <div className=\"flex justify-between text-sm font-medium\">\n                    <span>Subtotal ({cartItems.length} items)</span>\n                    <span>AED {subtotal.toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm text-slate-500\">\n                    <span>VAT (5%)</span>\n                    <span>AED {tax.toFixed(2)}</span>\n                  </div>\n                  \n                  <div className=\"flex gap-2\">\n                    <Input placeholder=\"Enter Promo Code\" className=\"bg-white border-white/50\" />\n                    <Button className=\"bg-[#3D4736] hover:bg-[#2A3324] text-white\">APPLY</Button>\n                  </div>\n                </div>\n\n                <Separator className=\"bg-slate-300 my-4\" />\n                \n                <div className=\"flex justify-between items-baseline mb-1\">\n                  <span className=\"font-bold text-lg\">Total</span>\n                  <span className=\"font-bold text-xl\">AED {total.toFixed(2)}</span>\n                </div>\n                <div className=\"text-xs text-muted-foreground mb-6\">(Inclusive of VAT)</div>\n\n                <Link href=\"/checkout\">\n                  <Button \n                    className=\"w-full h-12 text-base font-bold bg-orange-600 hover:bg-orange-700 uppercase tracking-wider\"\n                    data-testid=\"button-checkout\"\n                  >\n                    Checkout\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </div>\n\n          {recommendedProducts && recommendedProducts.length > 0 && (\n            <div className=\"mt-16\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-2xl font-display font-bold uppercase\">Recommended For You</h2>\n                <Link href=\"/products\" className=\"text-sm text-orange-600 font-bold hover:underline\">View All &gt;</Link>\n              </div>\n              \n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                {recommendedProducts.slice(0, 4).map((product) => (\n                  <Link key={product.id} href={`/products/${product.id}`}>\n                    <div className=\"bg-white p-4 rounded-lg border hover:border-orange-300 transition-colors cursor-pointer\">\n                      <div className=\"aspect-square mb-3 flex items-center justify-center\">\n                        <img src={product.image} className=\"max-w-full max-h-full object-contain\" alt={product.name} />\n                      </div>\n                      <h4 className=\"text-sm font-medium line-clamp-2 mb-2\">{product.name}</h4>\n                      <div className=\"font-bold text-orange-600\">AED {parseFloat(product.price).toLocaleString()}</div>\n                    </div>\n                  </Link>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":12388,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":649,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","path":null,"size_bytes":1342,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"client/src/components/ui/item.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction ItemGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      role=\"list\"\n      data-slot=\"item-group\"\n      className={cn(\"group/item-group flex flex-col\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"item-separator\"\n      orientation=\"horizontal\"\n      className={cn(\"my-0\", className)}\n      {...props}\n    />\n  )\n}\n\nconst itemVariants = cva(\n  \"group/item [a]:hover:bg-accent/50 focus-visible:border-ring focus-visible:ring-ring/50 [a]:transition-colors flex flex-wrap items-center rounded-md border border-transparent text-sm outline-none transition-colors duration-100 focus-visible:ring-[3px]\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border-border\",\n        muted: \"bg-muted/50\",\n      },\n      size: {\n        default: \"gap-4 p-4 \",\n        sm: \"gap-2.5 px-4 py-3\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Item({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> &\n  VariantProps<typeof itemVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n  return (\n    <Comp\n      data-slot=\"item\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(itemVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nconst itemMediaVariants = cva(\n  \"flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:translate-y-0.5 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted size-8 rounded-sm border [&_svg:not([class*='size-'])]:size-4\",\n        image:\n          \"size-10 overflow-hidden rounded-sm [&_img]:size-full [&_img]:object-cover\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction ItemMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof itemMediaVariants>) {\n  return (\n    <div\n      data-slot=\"item-media\"\n      data-variant={variant}\n      className={cn(itemMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction ItemContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-content\"\n      className={cn(\n        \"flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-title\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"item-description\"\n      className={cn(\n        \"text-muted-foreground line-clamp-2 text-balance text-sm font-normal leading-normal\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemActions({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-actions\"\n      className={cn(\"flex items-center gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-header\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-footer\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Item,\n  ItemMedia,\n  ItemContent,\n  ItemActions,\n  ItemGroup,\n  ItemSeparator,\n  ItemTitle,\n  ItemDescription,\n  ItemHeader,\n  ItemFooter,\n}\n","path":null,"size_bytes":4494,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3835,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1267,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7406,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/components/layout/Layout.tsx":{"content":"import { ReactNode } from \"react\";\nimport Navbar from \"./Navbar\";\nimport Footer from \"./Footer\";\n\ninterface LayoutProps {\n  children: ReactNode;\n}\n\nexport default function Layout({ children }: LayoutProps) {\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background font-sans text-foreground\">\n      <Navbar />\n      <main className=\"flex-1 flex flex-col\">\n        {children}\n      </main>\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":439,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":2001,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5124,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport tailwindcss from \"@tailwindcss/vite\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\nimport { metaImagesPlugin } from \"./vite-plugin-meta-images\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    tailwindcss(),\n    metaImagesPlugin(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  css: {\n    postcss: {\n      plugins: [],\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: \"0.0.0.0\",\n    allowedHosts: true,\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1330,"size_tokens":null},"server/routes.ts":{"content":"import type { Express, Request, Response, NextFunction } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { insertUserSchema, insertProductSchema, insertReviewSchema, insertCartItemSchema, insertOrderSchema, insertOrderItemSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport bcrypt from \"bcryptjs\";\nimport jwt from \"jsonwebtoken\";\nimport crypto from \"crypto\";\n\n// JWT Secret - in production use a proper secret from environment\nconst JWT_SECRET = process.env.JWT_SECRET || 'armoredmart-jwt-secret-key-2024';\nconst JWT_REFRESH_SECRET = process.env.JWT_REFRESH_SECRET || 'armoredmart-refresh-secret-key-2024';\n\n// Token expiry times\nconst ACCESS_TOKEN_EXPIRY = '15m'; // 15 minutes\nconst REFRESH_TOKEN_EXPIRY_DAYS = 14; // 14 days\n\ninterface JWTPayload {\n  sub: string; // user id\n  email: string;\n  name: string;\n  userType: 'customer' | 'vendor' | 'admin' | 'super_admin';\n  sessionId: string;\n  tokenVersion: number;\n  type: 'access' | 'refresh';\n}\n\n// Extend Express Request type to include user and session\ndeclare global {\n  namespace Express {\n    interface Request {\n      user?: {\n        id: string;\n        email: string;\n        name: string;\n        userType: 'customer' | 'vendor' | 'admin' | 'super_admin';\n      };\n      sessionId?: string;\n    }\n  }\n}\n\n// Generate access token (short-lived)\nfunction generateAccessToken(user: { id: string; email: string; name: string; userType: string; tokenVersion?: number | null }, sessionId: string): string {\n  return jwt.sign(\n    {\n      sub: user.id,\n      email: user.email,\n      name: user.name,\n      userType: user.userType,\n      sessionId,\n      tokenVersion: user.tokenVersion || 0,\n      type: 'access',\n    } as JWTPayload,\n    JWT_SECRET,\n    { expiresIn: ACCESS_TOKEN_EXPIRY }\n  );\n}\n\n// Generate refresh token (long-lived)\nfunction generateRefreshToken(userId: string, sessionId: string, tokenVersion: number): string {\n  return jwt.sign(\n    {\n      sub: userId,\n      sessionId,\n      tokenVersion,\n      type: 'refresh',\n    },\n    JWT_REFRESH_SECRET,\n    { expiresIn: `${REFRESH_TOKEN_EXPIRY_DAYS}d` }\n  );\n}\n\n// Hash refresh token for storage\nfunction hashToken(token: string): string {\n  return crypto.createHash('sha256').update(token).digest('hex');\n}\n\n// Parse user agent to extract device info\nfunction parseUserAgent(userAgent: string | undefined): string {\n  if (!userAgent) return 'Unknown Device';\n  \n  let device = '';\n  let browser = '';\n  \n  // Detect OS/Device\n  if (userAgent.includes('iPhone')) device = 'iPhone';\n  else if (userAgent.includes('iPad')) device = 'iPad';\n  else if (userAgent.includes('Android')) device = 'Android';\n  else if (userAgent.includes('Windows')) device = 'Windows';\n  else if (userAgent.includes('Mac')) device = 'Mac';\n  else if (userAgent.includes('Linux')) device = 'Linux';\n  else device = 'Unknown';\n  \n  // Detect Browser\n  if (userAgent.includes('Chrome') && !userAgent.includes('Edg')) browser = 'Chrome';\n  else if (userAgent.includes('Firefox')) browser = 'Firefox';\n  else if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) browser = 'Safari';\n  else if (userAgent.includes('Edg')) browser = 'Edge';\n  else browser = 'Browser';\n  \n  return `${browser} on ${device}`;\n}\n\n// Auth middleware - validates JWT access tokens\nasync function authMiddleware(req: Request, res: Response, next: NextFunction) {\n  const authHeader = req.headers.authorization;\n  \n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\n    return next(); // Continue without user for optional auth\n  }\n\n  const token = authHeader.substring(7);\n  \n  try {\n    const decoded = jwt.verify(token, JWT_SECRET) as JWTPayload;\n    \n    if (decoded.type !== 'access') {\n      return next();\n    }\n    \n    // Check if session is still valid\n    const session = await storage.getSessionById(decoded.sessionId);\n    if (!session || session.revokedAt || new Date(session.expiresAt) < new Date()) {\n      return next();\n    }\n    \n    // Verify token version matches user's current version\n    const user = await storage.getUser(decoded.sub);\n    if (!user || (user.tokenVersion || 0) !== decoded.tokenVersion) {\n      return next(); // Token invalidated due to version mismatch\n    }\n    \n    // Update last used timestamp (don't await to not slow down request)\n    storage.updateSessionLastUsed(decoded.sessionId).catch(() => {});\n    \n    req.user = {\n      id: decoded.sub,\n      email: decoded.email,\n      name: decoded.name,\n      userType: decoded.userType,\n    };\n    req.sessionId = decoded.sessionId;\n    \n    next();\n  } catch (error) {\n    // Token invalid or expired\n    next();\n  }\n}\n\nexport async function registerRoutes(\n  httpServer: Server,\n  app: Express\n): Promise<Server> {\n\n  // Apply auth middleware to all routes\n  app.use(authMiddleware);\n\n  // ===== AUTH =====\n\n  /**\n   * @swagger\n   * /auth/register:\n   *   post:\n   *     tags: [Auth]\n   *     summary: Register a new user\n   *     description: |\n   *       Creates a new user account and returns JWT access and refresh tokens.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Register Page** (`/auth/register`)\n   *         - Registration Form - handles form submission and account creation\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           schema:\n   *             type: object\n   *             required: [name, email, password, userType]\n   *             properties:\n   *               name: { type: string }\n   *               email: { type: string, format: email }\n   *               password: { type: string, minLength: 6 }\n   *               userType: { type: string, enum: [customer, vendor] }\n   *     responses:\n   *       201:\n   *         description: User created successfully\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/AuthResponse'\n   *       400:\n   *         description: Validation error or email already exists\n   */\n  app.post(\"/api/auth/register\", async (req, res) => {\n    try {\n      const { name, email, password, userType } = req.body;\n\n      // Validate input\n      if (!name || !email || !password) {\n        return res.status(400).json({ error: \"Name, email, and password are required\" });\n      }\n\n      if (password.length < 6) {\n        return res.status(400).json({ error: \"Password must be at least 6 characters\" });\n      }\n\n      // Check if email already exists\n      const existingUser = await storage.getUserByEmail(email);\n      if (existingUser) {\n        return res.status(400).json({ error: \"Email already registered\" });\n      }\n\n      // Hash password\n      const hashedPassword = await bcrypt.hash(password, 10);\n\n      // Create user\n      const user = await storage.createUser({\n        name,\n        email,\n        password: hashedPassword,\n        userType: userType || 'customer',\n      });\n\n      // Create session in database first (with temporary hash)\n      const expiresAt = new Date(Date.now() + REFRESH_TOKEN_EXPIRY_DAYS * 24 * 60 * 60 * 1000);\n      const userAgent = req.headers['user-agent'];\n      const ipAddress = req.ip || req.headers['x-forwarded-for'] as string || 'unknown';\n      \n      const session = await storage.createSession({\n        userId: user.id,\n        refreshTokenHash: 'temp', // Will be updated immediately\n        userAgent: userAgent || null,\n        ipAddress,\n        deviceLabel: parseUserAgent(userAgent),\n        expiresAt,\n      });\n\n      // Generate tokens with session ID\n      const accessToken = generateAccessToken(user, session.id);\n      const refreshToken = generateRefreshToken(user.id, session.id, user.tokenVersion || 0);\n\n      res.status(201).json({\n        user: {\n          id: user.id,\n          name: user.name,\n          email: user.email,\n          userType: user.userType,\n        },\n        accessToken,\n        refreshToken,\n        expiresIn: 900, // 15 minutes in seconds\n      });\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n      res.status(500).json({ error: \"Failed to register user\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /auth/login:\n   *   post:\n   *     tags: [Auth]\n   *     summary: Login user\n   *     description: |\n   *       Authenticates a user and returns JWT access and refresh tokens.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Login Page** (`/auth/login`)\n   *         - Login Form - handles email/password authentication\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           schema:\n   *             type: object\n   *             required: [email, password]\n   *             properties:\n   *               email: { type: string, format: email }\n   *               password: { type: string }\n   *     responses:\n   *       200:\n   *         description: Login successful\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/AuthResponse'\n   *       401:\n   *         description: Invalid credentials\n   */\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { email, password } = req.body;\n\n      if (!email || !password) {\n        return res.status(400).json({ error: \"Email and password are required\" });\n      }\n\n      const user = await storage.getUserByEmail(email);\n      if (!user) {\n        return res.status(401).json({ error: \"Invalid email or password\" });\n      }\n\n      const validPassword = await bcrypt.compare(password, user.password);\n      if (!validPassword) {\n        return res.status(401).json({ error: \"Invalid email or password\" });\n      }\n\n      // Create session in database\n      const expiresAt = new Date(Date.now() + REFRESH_TOKEN_EXPIRY_DAYS * 24 * 60 * 60 * 1000);\n      const userAgent = req.headers['user-agent'];\n      const ipAddress = req.ip || req.headers['x-forwarded-for'] as string || 'unknown';\n      \n      const session = await storage.createSession({\n        userId: user.id,\n        refreshTokenHash: 'temp',\n        userAgent: userAgent || null,\n        ipAddress,\n        deviceLabel: parseUserAgent(userAgent),\n        expiresAt,\n      });\n\n      // Generate tokens\n      const accessToken = generateAccessToken(user, session.id);\n      const refreshToken = generateRefreshToken(user.id, session.id, user.tokenVersion || 0);\n\n      res.json({\n        user: {\n          id: user.id,\n          name: user.name,\n          email: user.email,\n          userType: user.userType,\n        },\n        accessToken,\n        refreshToken,\n        expiresIn: 900,\n      });\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      res.status(500).json({ error: \"Failed to login\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /auth/logout:\n   *   post:\n   *     tags: [Auth]\n   *     summary: Logout user\n   *     description: |\n   *       Revokes the current session token.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Navbar** (all authenticated pages)\n   *         - User Menu Dropdown - Logout button\n   *       - **Profile Page** (`/account/profile`)\n   *         - Sessions Section - when logging out current session\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: Logged out successfully\n   */\n  app.post(\"/api/auth/logout\", async (req, res) => {\n    if (req.sessionId) {\n      await storage.revokeSession(req.sessionId);\n    }\n    res.json({ message: \"Logged out successfully\" });\n  });\n\n  /**\n   * @swagger\n   * /auth/me:\n   *   get:\n   *     tags: [Auth]\n   *     summary: Get current user info\n   *     description: |\n   *       Returns the currently authenticated user's information.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Profile Page** (`/account/profile`)\n   *         - Sidebar - displays user name, email, and profile completion\n   *       - **Wishlist Page** (`/account/wishlist`)\n   *         - Sidebar - displays user name, email, and profile completion\n   *       - **Order Tracking Page** (`/account/orders/:id/track`)\n   *         - Sidebar - displays user name and email\n   *       - **Order Details Page** (`/account/orders/:id/details`)\n   *         - Sidebar - displays user name and email\n   *       - **Edit Profile Page** (`/account/profile/edit`)\n   *         - Form pre-population with current user data\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: Current user information\n   *       401:\n   *         description: Not authenticated\n   */\n  app.get(\"/api/auth/me\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n\n    try {\n      const user = await storage.getUser(req.user.id);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n\n      res.json({\n        id: user.id,\n        email: user.email,\n        name: user.name,\n        userType: user.userType,\n        completionPercentage: user.completionPercentage || 80\n      });\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ error: \"Failed to fetch user info\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /auth/profile:\n   *   put:\n   *     tags: [Auth]\n   *     summary: Update user profile\n   *     description: |\n   *       Updates the currently authenticated user's profile information.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Edit Profile Page** (`/account/profile/edit`)\n   *         - Profile Form - updates user name and email\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: Profile updated successfully\n   *       401:\n   *         description: Not authenticated\n   */\n  app.put(\"/api/auth/profile\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n\n    try {\n      const { name, email } = req.body;\n      \n      const user = await storage.getUser(req.user.id);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n\n      // Update user in database\n      const updatedUser = await storage.updateUserProfile(req.user.id, {\n        name: name || user.name,\n        email: email || user.email\n      });\n\n      res.json({\n        id: updatedUser?.id || user.id,\n        email: updatedUser?.email || user.email,\n        name: updatedUser?.name || user.name,\n        userType: updatedUser?.userType || user.userType,\n        message: \"Profile updated successfully\"\n      });\n    } catch (error) {\n      console.error(\"Error updating profile:\", error);\n      res.status(500).json({ error: \"Failed to update profile\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /auth/refresh:\n   *   post:\n   *     tags: [Auth]\n   *     summary: Refresh access token\n   *     description: |\n   *       Uses a refresh token to get a new access token.\n   *       \n   *       ## Pages / Sections Used\n   *       - **All Authenticated Pages** (automatic background refresh)\n   *         - API Client - automatically refreshes token 60 seconds before expiry\n   *         - Retry Handler - refreshes token on 401 responses\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           schema:\n   *             type: object\n   *             required: [refreshToken]\n   *             properties:\n   *               refreshToken: { type: string }\n   *     responses:\n   *       200:\n   *         description: New tokens generated\n   *       401:\n   *         description: Invalid or expired refresh token\n   */\n  app.post(\"/api/auth/refresh\", async (req, res) => {\n    try {\n      const { refreshToken } = req.body;\n\n      if (!refreshToken) {\n        return res.status(400).json({ error: \"Refresh token is required\" });\n      }\n\n      // Verify refresh token\n      let decoded: any;\n      try {\n        decoded = jwt.verify(refreshToken, JWT_REFRESH_SECRET);\n      } catch (error) {\n        return res.status(401).json({ error: \"Invalid or expired refresh token\" });\n      }\n\n      if (decoded.type !== 'refresh') {\n        return res.status(401).json({ error: \"Invalid token type\" });\n      }\n\n      // Check if session is still valid\n      const session = await storage.getSessionById(decoded.sessionId);\n      if (!session || session.revokedAt || new Date(session.expiresAt) < new Date()) {\n        return res.status(401).json({ error: \"Session expired or revoked\" });\n      }\n\n      // Get user and verify token version\n      const user = await storage.getUser(decoded.sub);\n      if (!user || (user.tokenVersion || 0) !== decoded.tokenVersion) {\n        return res.status(401).json({ error: \"Token has been invalidated\" });\n      }\n\n      // Update session last used\n      await storage.updateSessionLastUsed(session.id);\n\n      // Generate new tokens\n      const newAccessToken = generateAccessToken(user, session.id);\n      const newRefreshToken = generateRefreshToken(user.id, session.id, user.tokenVersion || 0);\n\n      res.json({\n        accessToken: newAccessToken,\n        refreshToken: newRefreshToken,\n        expiresIn: 900,\n      });\n    } catch (error) {\n      console.error(\"Token refresh error:\", error);\n      res.status(500).json({ error: \"Failed to refresh token\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /auth/sessions:\n   *   get:\n   *     tags: [Auth]\n   *     summary: Get user's active sessions\n   *     description: |\n   *       Returns a list of all active sessions for the current user.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Profile Page** (`/account/profile`)\n   *         - Sessions Tab - displays list of active sessions with device info, IP address, and last active time\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: List of active sessions\n   *       401:\n   *         description: Not authenticated\n   */\n  app.get(\"/api/auth/sessions\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n\n    try {\n      const sessions = await storage.getActiveSessionsByUserId(req.user.id);\n      \n      res.json(sessions.map(session => ({\n        id: session.id,\n        deviceLabel: session.deviceLabel,\n        ipAddress: session.ipAddress,\n        lastUsedAt: session.lastUsedAt,\n        createdAt: session.createdAt,\n        isCurrent: session.id === req.sessionId,\n      })));\n    } catch (error) {\n      console.error(\"Error fetching sessions:\", error);\n      res.status(500).json({ error: \"Failed to fetch sessions\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /auth/sessions/{id}:\n   *   delete:\n   *     tags: [Auth]\n   *     summary: Revoke a specific session\n   *     description: |\n   *       Revokes a specific session, logging out that device.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Profile Page** (`/account/profile`)\n   *         - Sessions Tab - \"Revoke\" button for each session card\n   *     security:\n   *       - bearerAuth: []\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: string }\n   *     responses:\n   *       200:\n   *         description: Session revoked\n   *       401:\n   *         description: Not authenticated\n   *       404:\n   *         description: Session not found\n   */\n  app.delete(\"/api/auth/sessions/:id\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n\n    try {\n      const sessionId = req.params.id;\n      const session = await storage.getSessionById(sessionId);\n      \n      if (!session || session.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Session not found\" });\n      }\n\n      await storage.revokeSession(sessionId);\n      res.json({ message: \"Session revoked successfully\" });\n    } catch (error) {\n      console.error(\"Error revoking session:\", error);\n      res.status(500).json({ error: \"Failed to revoke session\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /auth/logout-all:\n   *   post:\n   *     tags: [Auth]\n   *     summary: Logout from all devices\n   *     description: |\n   *       Revokes all sessions except the current one and increments token version.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Profile Page** (`/account/profile`)\n   *         - Sessions Tab - \"Log out all other devices\" button\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: All sessions revoked\n   *       401:\n   *         description: Not authenticated\n   */\n  app.post(\"/api/auth/logout-all\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n\n    try {\n      // Revoke all sessions except current\n      await storage.revokeAllUserSessions(req.user.id, req.sessionId);\n      \n      // Increment token version to invalidate all existing tokens\n      await storage.updateUserTokenVersion(req.user.id);\n\n      res.json({ message: \"Logged out from all other devices\" });\n    } catch (error) {\n      console.error(\"Error logging out all:\", error);\n      res.status(500).json({ error: \"Failed to logout from all devices\" });\n    }\n  });\n\n  // ===== PRODUCTS =====\n\n  /**\n   * @swagger\n   * /products:\n   *   get:\n   *     tags: [Products]\n   *     summary: Get all products with optional filters\n   *     description: |\n   *       Returns a list of products, optionally filtered by category, search term, or price range.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Products Page** (`/products`)\n   *         - Product Grid - main product listing with filter/sort\n   *         - Search Suggestions - autocomplete dropdown\n   *       - **Wishlist Page** (`/account/wishlist`)\n   *         - Wishlist Grid - fetches product details for saved items\n   *     parameters:\n   *       - in: query\n   *         name: categoryId\n   *         schema: { type: integer }\n   *       - in: query\n   *         name: search\n   *         schema: { type: string }\n   *       - in: query\n   *         name: minPrice\n   *         schema: { type: number }\n   *       - in: query\n   *         name: maxPrice\n   *         schema: { type: number }\n   *     responses:\n   *       200:\n   *         description: List of products\n   *         content:\n   *           application/json:\n   *             schema:\n   *               type: array\n   *               items:\n   *                 $ref: '#/components/schemas/Product'\n   */\n  app.get(\"/api/products\", async (req, res) => {\n    try {\n      const { categoryId, vendorId, search, minPrice, maxPrice } = req.query;\n      \n      const filters = {\n        categoryId: categoryId ? parseInt(categoryId as string) : undefined,\n        vendorId: vendorId as string | undefined,\n        search: search as string | undefined,\n        minPrice: minPrice ? parseFloat(minPrice as string) : undefined,\n        maxPrice: maxPrice ? parseFloat(maxPrice as string) : undefined,\n      };\n\n      const products = await storage.getProducts(filters);\n      res.json(products);\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n      res.status(500).json({ error: \"Failed to fetch products\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /products/featured:\n   *   get:\n   *     tags: [Products]\n   *     summary: Get featured products for home page\n   *     description: |\n   *       Returns a curated list of featured products to display on the home page.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Home Page** (`/`)\n   *         - Featured Products Section - dark themed product cards carousel\n   *     responses:\n   *       200:\n   *         description: List of featured products\n   */\n  app.get(\"/api/products/featured\", async (req, res) => {\n    try {\n      const products = await storage.getProducts({});\n      res.json(products.slice(0, 3));\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch featured products\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /products/top-selling:\n   *   get:\n   *     tags: [Products]\n   *     summary: Get top selling products\n   *     description: |\n   *       Returns a list of best-selling products.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Home Page** (`/`)\n   *         - Top Selling Products Section - beige themed grid carousel\n   *       - **Products Page** (`/products`)\n   *         - Sidebar - \"Top Selling Products\" carousel section\n   *     responses:\n   *       200:\n   *         description: List of top selling products\n   */\n  app.get(\"/api/products/top-selling\", async (req, res) => {\n    try {\n      const products = await storage.getProducts({});\n      res.json(products.slice(3, 7));\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch top selling products\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /products/{id}:\n   *   get:\n   *     tags: [Products]\n   *     summary: Get product by ID\n   *     description: |\n   *       Returns detailed information about a specific product.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Product Details Page** (`/products/:id`)\n   *         - Product Image Gallery - main image and thumbnails\n   *         - Product Info Section - name, price, SKU, description\n   *         - Specifications Tab - technical specifications\n   *         - Vehicle Fitment Tab - compatible vehicles\n   *         - Warranty Info - warranty details\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: integer }\n   *     responses:\n   *       200:\n   *         description: Product details\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/Product'\n   *       404:\n   *         description: Product not found\n   */\n  app.get(\"/api/products/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const product = await storage.getProductById(id);\n      \n      if (!product) {\n        return res.status(404).json({ error: \"Product not found\" });\n      }\n\n      res.json(product);\n    } catch (error) {\n      console.error(\"Error fetching product:\", error);\n      res.status(500).json({ error: \"Failed to fetch product\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /products/{id}/similar:\n   *   get:\n   *     tags: [Products]\n   *     summary: Get similar products\n   *     description: |\n   *       Returns products similar to the specified product based on category.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Product Details Page** (`/products/:id`)\n   *         - Right Sidebar - \"Similar Products\" list with thumbnails\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: integer }\n   *     responses:\n   *       200:\n   *         description: List of similar products\n   */\n  app.get(\"/api/products/:id/similar\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const product = await storage.getProductById(id);\n      \n      if (!product) {\n        return res.status(404).json({ error: \"Product not found\" });\n      }\n\n      const similar = await storage.getProducts({\n        categoryId: product.categoryId || undefined,\n      });\n\n      const filtered = similar.filter(p => p.id !== id).slice(0, 6);\n      res.json(filtered);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch similar products\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /products/{id}/recommended:\n   *   get:\n   *     tags: [Products]\n   *     summary: Get recommended products\n   *     description: |\n   *       Returns product recommendations for the user.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Product Details Page** (`/products/:id`)\n   *         - Right Sidebar - \"Recommended Products\" grid with thumbnails\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: integer }\n   *     responses:\n   *       200:\n   *         description: List of recommended products\n   */\n  app.get(\"/api/products/:id/recommended\", async (req, res) => {\n    try {\n      const products = await storage.getProducts({});\n      res.json(products.slice(0, 6));\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch recommended products\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /products:\n   *   post:\n   *     tags: [Products]\n   *     summary: Create a new product (vendor only)\n   *     description: |\n   *       Creates a new product listing. Requires vendor authentication.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Vendor Dashboard** (`/vendor/products`) - _Not yet implemented in frontend_\n   *         - Add Product Form - create new product listing\n   *     security:\n   *       - bearerAuth: []\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           schema:\n   *             $ref: '#/components/schemas/Product'\n   *     responses:\n   *       201:\n   *         description: Product created\n   *       403:\n   *         description: Vendor access required\n   */\n  app.post(\"/api/products\", async (req, res) => {\n    try {\n      if (!req.user || req.user.userType !== 'vendor') {\n        return res.status(403).json({ error: \"Only vendors can create products\" });\n      }\n\n      const validated = insertProductSchema.parse(req.body);\n      const product = await storage.createProduct({\n        ...validated,\n        vendorId: req.user.id,\n      });\n\n      res.status(201).json(product);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: error.errors });\n      }\n      console.error(\"Error creating product:\", error);\n      res.status(500).json({ error: \"Failed to create product\" });\n    }\n  });\n\n  // ===== CATEGORIES =====\n\n  /**\n   * @swagger\n   * /categories:\n   *   get:\n   *     tags: [Categories]\n   *     summary: Get all categories\n   *     description: |\n   *       Returns a list of all product categories for navigation.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Home Page** (`/`)\n   *         - Categories Section - category cards with images\n   *       - **Products Page** (`/products`)\n   *         - Filter Sidebar - category checkboxes for filtering\n   *       - **Navbar** (all pages)\n   *         - Categories Dropdown Menu - navigation links\n   *     responses:\n   *       200:\n   *         description: List of categories\n   *         content:\n   *           application/json:\n   *             schema:\n   *               type: array\n   *               items:\n   *                 $ref: '#/components/schemas/Category'\n   */\n  app.get(\"/api/categories\", async (req, res) => {\n    try {\n      const categories = await storage.getCategories();\n      res.json(categories);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch categories\" });\n    }\n  });\n\n  // ===== REVIEWS =====\n\n  /**\n   * @swagger\n   * /products/{id}/reviews:\n   *   get:\n   *     tags: [Reviews]\n   *     summary: Get reviews for a product\n   *     description: |\n   *       Returns all reviews for a specific product.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Product Details Page** (`/products/:id`)\n   *         - Reviews Tab - customer reviews list with ratings\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: integer }\n   *     responses:\n   *       200:\n   *         description: List of reviews\n   */\n  app.get(\"/api/products/:id/reviews\", async (req, res) => {\n    try {\n      const productId = parseInt(req.params.id);\n      const reviews = await storage.getReviewsByProductId(productId);\n      res.json(reviews);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch reviews\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /products/{id}/reviews:\n   *   post:\n   *     tags: [Reviews]\n   *     summary: Create a review (authenticated users only)\n   *     description: |\n   *       Submits a new review for a product.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Product Details Page** (`/products/:id`)\n   *         - Reviews Tab - \"Write a Review\" form (authenticated users only)\n   *     security:\n   *       - bearerAuth: []\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: integer }\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           schema:\n   *             type: object\n   *             required: [rating, comment]\n   *             properties:\n   *               rating: { type: integer, minimum: 1, maximum: 5 }\n   *               comment: { type: string }\n   *     responses:\n   *       201:\n   *         description: Review created\n   *       401:\n   *         description: Authentication required\n   */\n  app.post(\"/api/products/:id/reviews\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Authentication required\" });\n      }\n\n      const productId = parseInt(req.params.id);\n      const validated = insertReviewSchema.parse({\n        ...req.body,\n        productId,\n        userId: req.user.id,\n      });\n\n      const review = await storage.createReview(validated);\n      res.status(201).json(review);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: error.errors });\n      }\n      res.status(500).json({ error: \"Failed to create review\" });\n    }\n  });\n\n  // ===== CART =====\n\n  /**\n   * @swagger\n   * /cart:\n   *   get:\n   *     tags: [Cart]\n   *     summary: Get user's cart\n   *     description: |\n   *       Returns all items in the user's shopping cart with product details.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Cart Page** (`/cart`)\n   *         - Cart Items List - product cards with quantity controls\n   *         - Order Summary - total calculation\n   *       - **Checkout Page** (`/checkout`)\n   *         - Order Review - summary before payment\n   *       - **Navbar** (all authenticated pages)\n   *         - Cart Icon Badge - displays item count\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: Cart items\n   *       401:\n   *         description: Authentication required\n   */\n  app.get(\"/api/cart\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Authentication required\" });\n      }\n\n      const cart = await storage.getCartByUserId(req.user.id);\n      res.json(cart);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch cart\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /cart:\n   *   post:\n   *     tags: [Cart]\n   *     summary: Add item to cart\n   *     description: |\n   *       Adds a product to the user's shopping cart.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Product Details Page** (`/products/:id`)\n   *         - Add to Cart Button - primary CTA in product info section\n   *       - **Product Card** (Products Page, Home Page)\n   *         - Quick Add to Cart icon button\n   *     security:\n   *       - bearerAuth: []\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           schema:\n   *             type: object\n   *             required: [productId]\n   *             properties:\n   *               productId: { type: integer }\n   *               quantity: { type: integer, default: 1 }\n   *     responses:\n   *       201:\n   *         description: Item added to cart\n   *       401:\n   *         description: Authentication required\n   */\n  app.post(\"/api/cart\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Authentication required\" });\n      }\n\n      const validated = insertCartItemSchema.parse({\n        ...req.body,\n        userId: req.user.id,\n      });\n\n      const cartItem = await storage.addToCart(validated);\n      res.status(201).json(cartItem);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: error.errors });\n      }\n      res.status(500).json({ error: \"Failed to add to cart\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /cart/{id}:\n   *   patch:\n   *     tags: [Cart]\n   *     summary: Update cart item quantity\n   *     description: |\n   *       Updates the quantity of an item in the cart.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Cart Page** (`/cart`)\n   *         - Cart Item Row - Plus/Minus quantity buttons\n   *     security:\n   *       - bearerAuth: []\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: integer }\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           schema:\n   *             type: object\n   *             required: [quantity]\n   *             properties:\n   *               quantity: { type: integer, minimum: 1 }\n   *     responses:\n   *       200:\n   *         description: Cart item updated\n   */\n  app.patch(\"/api/cart/:id\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Authentication required\" });\n      }\n\n      const id = parseInt(req.params.id);\n      const { quantity } = req.body;\n\n      if (typeof quantity !== 'number' || quantity < 1) {\n        return res.status(400).json({ error: \"Invalid quantity\" });\n      }\n\n      const updated = await storage.updateCartItem(id, quantity);\n      if (!updated) {\n        return res.status(404).json({ error: \"Cart item not found\" });\n      }\n\n      res.json(updated);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update cart item\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /cart/{id}:\n   *   delete:\n   *     tags: [Cart]\n   *     summary: Remove item from cart\n   *     description: |\n   *       Removes an item from the cart.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Cart Page** (`/cart`)\n   *         - Cart Item Row - \"Remove\" link button\n   *     security:\n   *       - bearerAuth: []\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: integer }\n   *     responses:\n   *       204:\n   *         description: Item removed\n   */\n  app.delete(\"/api/cart/:id\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Authentication required\" });\n      }\n\n      const id = parseInt(req.params.id);\n      await storage.removeFromCart(id);\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to remove cart item\" });\n    }\n  });\n\n  // ===== CHECKOUT (Stripe Integration) =====\n\n  /**\n   * @swagger\n   * /checkout/create-session:\n   *   post:\n   *     tags: [Checkout]\n   *     summary: Create Stripe checkout session\n   *     description: |\n   *       Creates a Stripe checkout session for payment processing.\n   *       Returns checkout URL for Stripe-hosted checkout, or test mode indicator if Stripe is not configured.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Cart Page** (`/cart`)\n   *         - \"Proceed to Checkout\" button - initiates Stripe checkout flow\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: Checkout session URL or test mode indicator\n   */\n  app.post(\"/api/checkout/create-session\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Authentication required\" });\n      }\n\n      // Get cart items\n      const cartItems = await storage.getCartByUserId(req.user.id);\n      if (!cartItems || cartItems.length === 0) {\n        return res.status(400).json({ error: \"Cart is empty\" });\n      }\n\n      // Calculate order total\n      const total = cartItems.reduce((sum, item) => \n        sum + (parseFloat(item.product.price) * item.quantity), 0);\n\n      // Create order items from cart\n      const orderItems = cartItems.map(item => ({\n        productId: item.product.id,\n        name: item.product.name,\n        image: item.product.image,\n        price: item.product.price,\n        quantity: item.quantity,\n      }));\n\n      // Create the order in the database\n      const order = await storage.createOrder(\n        {\n          userId: req.user.id,\n          status: 'pending',\n          total: total.toString(),\n          trackingNumber: `TRK${Date.now().toString(36).toUpperCase()}`,\n          estimatedDelivery: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n        },\n        orderItems\n      );\n\n      // Clear the cart after order creation\n      await storage.clearCart(req.user.id);\n\n      // Try to get Stripe client\n      try {\n        const { getUncachableStripeClient } = await import(\"./stripeClient\");\n        const stripe = await getUncachableStripeClient();\n\n        // Build line items from cart\n        const lineItems = cartItems.map(item => ({\n          price_data: {\n            currency: 'aed',\n            product_data: {\n              name: item.product.name,\n              images: [item.product.image],\n              metadata: {\n                productId: item.product.id.toString(),\n                sku: item.product.sku,\n              },\n            },\n            unit_amount: Math.round(parseFloat(item.product.price) * 100),\n          },\n          quantity: item.quantity,\n        }));\n\n        // Create checkout session\n        const replitDomain = process.env.REPLIT_DOMAINS?.split(',')[0];\n        const baseUrl = replitDomain \n          ? `https://${replitDomain}` \n          : (req.headers.origin || `${req.protocol}://${req.get('host')}`);\n        \n        const session = await stripe.checkout.sessions.create({\n          payment_method_types: ['card'],\n          line_items: lineItems,\n          mode: 'payment',\n          success_url: `${baseUrl}/checkout/success?session_id={CHECKOUT_SESSION_ID}&order_id=${order.id}`,\n          cancel_url: `${baseUrl}/cart`,\n          customer_email: req.user.email,\n          metadata: {\n            userId: req.user.id,\n            orderId: order.id,\n          },\n        });\n\n        res.json({ url: session.url, orderId: order.id });\n      } catch (stripeError: any) {\n        console.log(\"Stripe not configured, using test mode:\", stripeError.message);\n        // Stripe not configured - return test mode response with order info\n        res.json({ \n          testMode: true,\n          orderId: order.id,\n          message: \"Order created successfully. Stripe is not configured - payments would work with valid Stripe credentials.\"\n        });\n      }\n    } catch (error) {\n      console.error(\"Checkout error:\", error);\n      res.status(500).json({ error: \"Failed to create checkout session\" });\n    }\n  });\n\n  // ===== ORDERS =====\n\n  /**\n   * @swagger\n   * /orders:\n   *   get:\n   *     tags: [Orders]\n   *     summary: Get user's orders\n   *     description: |\n   *       Returns a list of all orders placed by the authenticated user.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Profile Page** (`/account/profile`)\n   *         - Orders Tab - order history list with status badges\n   *         - Recent Orders Section - last 3 orders summary\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: List of orders\n   */\n  app.get(\"/api/orders\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Authentication required\" });\n      }\n\n      const orders = await storage.getOrdersByUserId(req.user.id);\n      res.json(orders);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch orders\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /orders/{id}:\n   *   get:\n   *     tags: [Orders]\n   *     summary: Get order by ID\n   *     description: |\n   *       Returns detailed information about a specific order.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Order Details Page** (`/orders/:id`) - _Not yet implemented in frontend_\n   *         - Order Summary - items, totals, shipping info\n   *         - Order Status - tracking information\n   *     security:\n   *       - bearerAuth: []\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: string }\n   *     responses:\n   *       200:\n   *         description: Order details\n   */\n  app.get(\"/api/orders/:id\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Authentication required\" });\n      }\n\n      const order = await storage.getOrderById(req.params.id);\n      \n      if (!order) {\n        return res.status(404).json({ error: \"Order not found\" });\n      }\n\n      if (order.userId !== req.user.id) {\n        return res.status(403).json({ error: \"Access denied\" });\n      }\n\n      res.json(order);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch order\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /orders:\n   *   post:\n   *     tags: [Orders]\n   *     summary: Create order (checkout)\n   *     description: |\n   *       Creates a new order from cart items after payment.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Checkout Success Page** (`/checkout/success`)\n   *         - Order Confirmation - creates order after successful Stripe payment\n   *     security:\n   *       - bearerAuth: []\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           schema:\n   *             type: object\n   *             required: [items]\n   *             properties:\n   *               items:\n   *                 type: array\n   *                 items:\n   *                   type: object\n   *                   properties:\n   *                     productId: { type: integer }\n   *                     name: { type: string }\n   *                     image: { type: string }\n   *                     price: { type: string }\n   *                     quantity: { type: integer }\n   *     responses:\n   *       201:\n   *         description: Order created\n   */\n  app.post(\"/api/orders\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Authentication required\" });\n      }\n\n      const { items } = req.body;\n\n      if (!items || !Array.isArray(items) || items.length === 0) {\n        return res.status(400).json({ error: \"Order must contain at least one item\" });\n      }\n\n      const total = items.reduce((sum: number, item: any) => {\n        return sum + (parseFloat(item.price) * item.quantity);\n      }, 0);\n\n      const orderData = insertOrderSchema.parse({\n        userId: req.user.id,\n        status: 'pending',\n        total: total.toString(),\n      });\n\n      const validatedItems = items.map((item: any) => \n        insertOrderItemSchema.parse(item)\n      );\n\n      const order = await storage.createOrder(orderData, validatedItems);\n\n      await storage.clearCart(req.user.id);\n\n      res.status(201).json(order);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: error.errors });\n      }\n      console.error(\"Error creating order:\", error);\n      res.status(500).json({ error: \"Failed to create order\" });\n    }\n  });\n\n  // ===== REFUNDS =====\n\n  /**\n   * @swagger\n   * /refunds:\n   *   get:\n   *     tags: [Refunds]\n   *     summary: Get user's refunds\n   *     description: |\n   *       Returns all refunds for the authenticated user.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Returns Page** (`/account/returns`)\n   *         - Returns List - displays all refund requests\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: List of refunds\n   *       401:\n   *         description: Not authenticated\n   */\n  app.get(\"/api/refunds\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n\n    try {\n      const refunds = await storage.getRefundsByUserId(req.user.id);\n      res.json(refunds);\n    } catch (error) {\n      console.error(\"Error fetching refunds:\", error);\n      res.status(500).json({ error: \"Failed to fetch refunds\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /refunds/{id}:\n   *   get:\n   *     tags: [Refunds]\n   *     summary: Get refund details\n   *     description: |\n   *       Returns details for a specific refund including items.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Refund Details Page** (`/account/refunds/:id`)\n   *         - Triggered Refunds - status, amount, payment method, dates\n   *         - Triggered Items - products being refunded\n   *         - Refund Breakup - popup showing per-item amounts\n   *     security:\n   *       - bearerAuth: []\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema:\n   *           type: string\n   *     responses:\n   *       200:\n   *         description: Refund details\n   *       404:\n   *         description: Refund not found\n   */\n  app.get(\"/api/refunds/:id\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n\n    try {\n      const refund = await storage.getRefundById(req.params.id);\n      \n      if (!refund || refund.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Refund not found\" });\n      }\n\n      res.json(refund);\n    } catch (error) {\n      console.error(\"Error fetching refund:\", error);\n      res.status(500).json({ error: \"Failed to fetch refund\" });\n    }\n  });\n\n  // ===== ADDRESSES =====\n\n  /**\n   * @swagger\n   * /addresses:\n   *   get:\n   *     tags: [Addresses]\n   *     summary: Get user addresses\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: List of user addresses\n   */\n  app.get(\"/api/addresses\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n    try {\n      const userAddresses = await storage.getAddressesByUserId(req.user.id);\n      res.json(userAddresses);\n    } catch (error) {\n      console.error(\"Error fetching addresses:\", error);\n      res.status(500).json({ error: \"Failed to fetch addresses\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /addresses:\n   *   post:\n   *     tags: [Addresses]\n   *     summary: Create new address\n   *     security:\n   *       - bearerAuth: []\n   */\n  app.post(\"/api/addresses\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n    try {\n      const address = await storage.createAddress({\n        ...req.body,\n        userId: req.user.id\n      });\n      res.status(201).json(address);\n    } catch (error) {\n      console.error(\"Error creating address:\", error);\n      res.status(500).json({ error: \"Failed to create address\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /addresses/{id}:\n   *   put:\n   *     tags: [Addresses]\n   *     summary: Update address\n   *     security:\n   *       - bearerAuth: []\n   */\n  app.put(\"/api/addresses/:id\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n    try {\n      const id = parseInt(req.params.id);\n      const existing = await storage.getAddressById(id);\n      if (!existing || existing.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Address not found\" });\n      }\n      const updated = await storage.updateAddress(id, req.body);\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Error updating address:\", error);\n      res.status(500).json({ error: \"Failed to update address\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /addresses/{id}:\n   *   delete:\n   *     tags: [Addresses]\n   *     summary: Delete address\n   *     security:\n   *       - bearerAuth: []\n   */\n  app.delete(\"/api/addresses/:id\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n    try {\n      const id = parseInt(req.params.id);\n      const existing = await storage.getAddressById(id);\n      if (!existing || existing.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Address not found\" });\n      }\n      await storage.deleteAddress(id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting address:\", error);\n      res.status(500).json({ error: \"Failed to delete address\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /addresses/{id}/default:\n   *   post:\n   *     tags: [Addresses]\n   *     summary: Set default address\n   *     security:\n   *       - bearerAuth: []\n   */\n  app.post(\"/api/addresses/:id/default\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n    try {\n      const id = parseInt(req.params.id);\n      const existing = await storage.getAddressById(id);\n      if (!existing || existing.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Address not found\" });\n      }\n      await storage.setDefaultAddress(req.user.id, id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error setting default address:\", error);\n      res.status(500).json({ error: \"Failed to set default address\" });\n    }\n  });\n\n  // ===== SAVED PAYMENT METHODS =====\n\n  /**\n   * @swagger\n   * /payments:\n   *   get:\n   *     tags: [Payments]\n   *     summary: Get saved payment methods\n   *     description: Returns tokenized payment methods (PCI-DSS compliant - no raw card data)\n   *     security:\n   *       - bearerAuth: []\n   */\n  app.get(\"/api/payments\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n    try {\n      const payments = await storage.getSavedPaymentsByUserId(req.user.id);\n      res.json(payments);\n    } catch (error) {\n      console.error(\"Error fetching payments:\", error);\n      res.status(500).json({ error: \"Failed to fetch payment methods\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /payments:\n   *   post:\n   *     tags: [Payments]\n   *     summary: Save a payment method (from Stripe token)\n   *     description: |\n   *       Stores tokenized payment method reference. \n   *       Compliant with PCI-DSS, RBI (India), and UAE Central Bank regulations.\n   *       Only stores last 4 digits, card brand, and processor token.\n   *     security:\n   *       - bearerAuth: []\n   */\n  app.post(\"/api/payments\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n    try {\n      // Validate required fields for regulatory compliance\n      const { country, processorToken, paymentMethodType } = req.body;\n      if (!country || !processorToken || !paymentMethodType) {\n        return res.status(400).json({ error: \"Missing required fields: country, processorToken, paymentMethodType\" });\n      }\n      \n      // For India (RBI regulations), require explicit consent\n      if (country === 'IN' && !req.body.hasRbiConsent) {\n        return res.status(400).json({ \n          error: \"RBI regulations require explicit consent for card-on-file storage in India\",\n          requiresConsent: true\n        });\n      }\n      \n      const payment = await storage.createSavedPayment({\n        ...req.body,\n        userId: req.user.id,\n        consentTimestamp: req.body.hasRbiConsent ? new Date() : null\n      });\n      res.status(201).json(payment);\n    } catch (error) {\n      console.error(\"Error creating payment method:\", error);\n      res.status(500).json({ error: \"Failed to save payment method\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /payments/{id}:\n   *   delete:\n   *     tags: [Payments]\n   *     summary: Delete saved payment method\n   *     description: Soft deletes the payment method (regulatory compliance requires record keeping)\n   *     security:\n   *       - bearerAuth: []\n   */\n  app.delete(\"/api/payments/:id\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n    try {\n      const id = parseInt(req.params.id);\n      const existing = await storage.getSavedPaymentById(id);\n      if (!existing || existing.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Payment method not found\" });\n      }\n      await storage.deleteSavedPayment(id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting payment method:\", error);\n      res.status(500).json({ error: \"Failed to delete payment method\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /payments/{id}/default:\n   *   post:\n   *     tags: [Payments]\n   *     summary: Set default payment method\n   *     security:\n   *       - bearerAuth: []\n   */\n  app.post(\"/api/payments/:id/default\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Authentication required\" });\n    }\n    try {\n      const id = parseInt(req.params.id);\n      const existing = await storage.getSavedPaymentById(id);\n      if (!existing || existing.userId !== req.user.id) {\n        return res.status(404).json({ error: \"Payment method not found\" });\n      }\n      await storage.setDefaultPayment(req.user.id, id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error setting default payment:\", error);\n      res.status(500).json({ error: \"Failed to set default payment method\" });\n    }\n  });\n\n  // ===== VENDOR =====\n\n  /**\n   * @swagger\n   * /vendor/stats:\n   *   get:\n   *     tags: [Vendor]\n   *     summary: Get vendor statistics\n   *     description: |\n   *       Returns sales statistics for the vendor dashboard.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Vendor Dashboard** (`/vendor`) - _Not yet implemented in frontend_\n   *         - Stats Overview - revenue, orders, products count\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: Vendor stats\n   *         content:\n   *           application/json:\n   *             schema:\n   *               type: object\n   *               properties:\n   *                 revenue: { type: number }\n   *                 orders: { type: integer }\n   *                 products: { type: integer }\n   */\n  app.get(\"/api/vendor/stats\", async (req, res) => {\n    try {\n      if (!req.user || req.user.userType !== 'vendor') {\n        return res.status(403).json({ error: \"Vendor access required\" });\n      }\n\n      const stats = await storage.getVendorStats(req.user.id);\n      res.json(stats);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch vendor stats\" });\n    }\n  });\n\n  /**\n   * @swagger\n   * /vendor/products:\n   *   get:\n   *     tags: [Vendor]\n   *     summary: Get vendor's products\n   *     description: |\n   *       Returns all products created by the authenticated vendor.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Vendor Dashboard** (`/vendor/products`) - _Not yet implemented in frontend_\n   *         - Products Table - manage listings, inventory, pricing\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: List of vendor's products\n   */\n  app.get(\"/api/vendor/products\", async (req, res) => {\n    try {\n      if (!req.user || req.user.userType !== 'vendor') {\n        return res.status(403).json({ error: \"Vendor access required\" });\n      }\n\n      const products = await storage.getProducts({ vendorId: req.user.id });\n      res.json(products);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch vendor products\" });\n    }\n  });\n\n  // ===== USER / FILTERS =====\n\n  /**\n   * @swagger\n   * /user:\n   *   get:\n   *     tags: [Auth]\n   *     summary: Get current user\n   *     description: |\n   *       Returns the currently authenticated user's information.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Navbar** (all pages)\n   *         - User Menu - displays logged-in user info\n   *       - **Profile Page** (`/account/profile`)\n   *         - Account Details Section - user info display\n   *     security:\n   *       - bearerAuth: []\n   *     responses:\n   *       200:\n   *         description: Current user info\n   *       401:\n   *         description: Not authenticated\n   */\n  app.get(\"/api/user\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Not authenticated\" });\n    }\n\n    res.json(req.user);\n  });\n\n  /**\n   * @swagger\n   * /filters:\n   *   get:\n   *     tags: [Products]\n   *     summary: Get filter options\n   *     description: |\n   *       Returns available filter options based on current product inventory.\n   *       \n   *       ## Pages / Sections Used\n   *       - **Products Page** (`/products`)\n   *         - Filter Sidebar - brands, departments, surface types, materials checkboxes\n   *     responses:\n   *       200:\n   *         description: Available filter options\n   */\n  app.get(\"/api/filters\", async (req, res) => {\n    try {\n      const products = await storage.getProducts({});\n      \n      const vendors = [...new Set(products.map(p => p.make))].filter(Boolean);\n      const departments = [...new Set(products.map(p => p.department))].filter(Boolean);\n\n      res.json({\n        brands: vendors,\n        departments,\n        productTypes: [\n          { name: \"Brake Pads\", image: \"https://images.unsplash.com/photo-1600706432502-76b1e601a746?auto=format&fit=crop&q=80&w=200\" },\n          { name: \"Disc Brake Pad\", image: \"https://images.unsplash.com/photo-1616788494707-ec28f08d05a1?auto=format&fit=crop&q=80&w=200\" },\n          { name: \"Brake Rotors\", image: \"https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?auto=format&fit=crop&q=80&w=200\" },\n          { name: \"Parking Brake Shoe\", image: \"https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?auto=format&fit=crop&q=80&w=200\" }\n        ],\n        surfaceTypes: [\"Heavy Duty\", \"Tactical\", \"Standard\", \"Performance\"],\n        frictionalMaterials: [\"Ceramic\", \"Semi-Metallic\", \"Organic\", \"Steel\"]\n      });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch filters\" });\n    }\n  });\n\n  return httpServer;\n}\n","path":null,"size_bytes":63002,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4887,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"server/swagger.ts":{"content":"import swaggerJsdoc from 'swagger-jsdoc';\nimport swaggerUi from 'swagger-ui-express';\nimport type { Express } from 'express';\n\nconst options: swaggerJsdoc.Options = {\n  definition: {\n    openapi: '3.0.0',\n    info: {\n      title: 'ArmoredMart API',\n      version: '1.0.0',\n      description: 'B2B Marketplace API for Defense and Military Vehicle Parts',\n      contact: {\n        name: 'ArmoredMart Support',\n      },\n    },\n    servers: [\n      {\n        url: '/api',\n        description: 'API Server',\n      },\n    ],\n    components: {\n      securitySchemes: {\n        bearerAuth: {\n          type: 'http',\n          scheme: 'bearer',\n          bearerFormat: 'JWT',\n        },\n      },\n      schemas: {\n        User: {\n          type: 'object',\n          properties: {\n            id: { type: 'string' },\n            name: { type: 'string' },\n            email: { type: 'string', format: 'email' },\n            userType: { type: 'string', enum: ['customer', 'vendor', 'admin', 'super_admin'] },\n            avatar: { type: 'string', nullable: true },\n            createdAt: { type: 'string', format: 'date-time' },\n          },\n        },\n        Product: {\n          type: 'object',\n          properties: {\n            id: { type: 'integer' },\n            name: { type: 'string' },\n            sku: { type: 'string' },\n            price: { type: 'string' },\n            image: { type: 'string' },\n            categoryId: { type: 'integer' },\n            description: { type: 'string' },\n            condition: { type: 'string', enum: ['new', 'used', 'refurbished'] },\n            stock: { type: 'integer' },\n            make: { type: 'string' },\n            model: { type: 'string' },\n            year: { type: 'integer' },\n            rating: { type: 'string', nullable: true },\n            reviewCount: { type: 'integer' },\n          },\n        },\n        Category: {\n          type: 'object',\n          properties: {\n            id: { type: 'integer' },\n            name: { type: 'string' },\n            image: { type: 'string' },\n            description: { type: 'string', nullable: true },\n          },\n        },\n        CartItem: {\n          type: 'object',\n          properties: {\n            id: { type: 'integer' },\n            userId: { type: 'string' },\n            productId: { type: 'integer' },\n            quantity: { type: 'integer' },\n            product: { $ref: '#/components/schemas/Product' },\n          },\n        },\n        Order: {\n          type: 'object',\n          properties: {\n            id: { type: 'string' },\n            userId: { type: 'string' },\n            status: { type: 'string', enum: ['pending', 'processing', 'shipped', 'delivered', 'cancelled', 'returned'] },\n            total: { type: 'string' },\n            trackingNumber: { type: 'string', nullable: true },\n            createdAt: { type: 'string', format: 'date-time' },\n          },\n        },\n        Review: {\n          type: 'object',\n          properties: {\n            id: { type: 'integer' },\n            productId: { type: 'integer' },\n            userId: { type: 'string' },\n            rating: { type: 'integer', minimum: 1, maximum: 5 },\n            comment: { type: 'string' },\n            verifiedPurchase: { type: 'boolean' },\n            createdAt: { type: 'string', format: 'date-time' },\n          },\n        },\n        Error: {\n          type: 'object',\n          properties: {\n            error: { type: 'string' },\n          },\n        },\n        AuthResponse: {\n          type: 'object',\n          properties: {\n            user: { $ref: '#/components/schemas/User' },\n            token: { type: 'string' },\n          },\n        },\n      },\n    },\n    tags: [\n      { name: 'Auth', description: 'Authentication endpoints - Used by Login/Register pages' },\n      { name: 'Products', description: 'Product catalog and search - Used by Home, Products, Product Details pages' },\n      { name: 'Categories', description: 'Product categories - Used by Home page and navigation' },\n      { name: 'Cart', description: 'Shopping cart operations - Used by Cart page, Product Details, Navbar' },\n      { name: 'Checkout', description: 'Payment processing with Stripe - Used by Checkout page' },\n      { name: 'Orders', description: 'Order management - Used by Profile page' },\n      { name: 'Reviews', description: 'Product reviews - Used by Product Details page' },\n      { name: 'Vendor', description: 'Vendor dashboard operations - Used by Seller Dashboard' },\n      { name: 'Filters', description: 'Product filter options - Used by Products page' },\n    ],\n  },\n  apis: ['./server/routes.ts'],\n};\n\nconst swaggerSpec = swaggerJsdoc(options);\n\nexport function setupSwagger(app: Express) {\n  app.use('/api/docs', swaggerUi.serve, swaggerUi.setup(swaggerSpec, {\n    customCss: '.swagger-ui .topbar { display: none }',\n    customSiteTitle: 'ArmoredMart API Documentation',\n  }));\n  \n  // Alias /api/doc to redirect to /api/docs\n  app.get('/api/doc', (req, res) => {\n    res.redirect('/api/docs');\n  });\n  \n  app.get('/api/docs.json', (req, res) => {\n    res.setHeader('Content-Type', 'application/json');\n    res.send(swaggerSpec);\n  });\n}\n","path":null,"size_bytes":5152,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1598,"size_tokens":null},"server/seed.ts":{"content":"import { db } from \"./db\";\nimport { categories, products } from \"@shared/schema\";\n\nexport async function seedDatabase() {\n  console.log(\"Seeding database...\");\n\n  try {\n    // Check if categories already exist\n    const existingCategories = await db.select().from(categories);\n    \n    if (existingCategories.length === 0) {\n      // Insert categories\n      const insertedCategories = await db.insert(categories).values([\n        { name: \"Core Vehicle Systems\", image: \"https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?auto=format&fit=crop&q=80&w=400\", description: \"Engines, Transmission, Chassis\" },\n        { name: \"Armor Specific Systems\", image: \"https://images.unsplash.com/photo-1599369262337-ee47696c4266?auto=format&fit=crop&q=80&w=400\", description: \"Ballistic Glass, Steel, Kevlar\" },\n        { name: \"Communication & Control\", image: \"https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80&w=400\", description: \"Radios, GPS, ECMs\" },\n        { name: \"Climate & Interior\", image: \"https://images.unsplash.com/photo-1560965385-a7455d311394?auto=format&fit=crop&q=80&w=400\", description: \"HVAC, Seats, Dashboards\" },\n        { name: \"Exterior & Utility\", image: \"https://images.unsplash.com/photo-1616788494707-ec28f08d05a1?auto=format&fit=crop&q=80&w=400\", description: \"Lighting, Winches, Bumpers\" },\n        { name: \"OEM Sourcing\", image: \"https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?auto=format&fit=crop&q=80&w=400\", description: \"Direct from Manufacturer\" }\n      ]).returning();\n\n      console.log(` Created ${insertedCategories.length} categories`);\n\n      // Map category names to IDs\n      const catMap: Record<string, number> = {};\n      insertedCategories.forEach(cat => {\n        catMap[cat.name] = cat.id;\n      });\n\n      // Insert sample products using actual category IDs\n      const sampleProducts = [\n        {\n          name: \"DFC - 4000 HybridDynamic Hybrid Rear Brake Pads\",\n          sku: \"WHL-RF-001\",\n          price: \"679.00\",\n          originalPrice: \"850.00\",\n          image: \"https://images.unsplash.com/photo-1611417866503-424626569738?auto=format&fit=crop&q=80&w=800\",\n          gallery: [\n            \"https://images.unsplash.com/photo-1611417866503-424626569738?auto=format&fit=crop&q=80&w=800\",\n            \"https://images.unsplash.com/photo-1600706432502-76b1e601a746?auto=format&fit=crop&q=80&w=800\",\n            \"https://images.unsplash.com/photo-1616788494707-ec28f08d05a1?auto=format&fit=crop&q=80&w=800\"\n          ],\n          categoryId: catMap[\"Core Vehicle Systems\"],\n          department: \"Wheels\",\n          description: \"Military-grade runflat inserts for combat wheels. Designed for heavier vehicles with larger brake systems, DFC Heavy-Duty Brake Pads deliver exceptional braking performance in harsh conditions.\",\n          condition: \"new\" as const,\n          stock: 50,\n          make: \"Toyota\",\n          model: \"Land Cruiser 200\",\n          year: 2023,\n          rating: \"4.5\",\n          reviewCount: 3,\n          actionType: \"buy_now\",\n          features: [\n            \"Frequent braking environments, high speed, heavy traffic, steep gradients, towing, or off-roading\",\n            \"Delivers strong, predictable friction level regardless of temperature, speed, or axle load\",\n            \"Engineered to withstand extremely high operating temperature range\",\n            \"Long pad wear, low noise, and low dust\",\n            \"100% Asbestos Free\",\n            \"100% Copper Free Eco-Friendly Formulation\"\n          ],\n          specifications: JSON.stringify({\n            \"Series\": \"4000 HybridDynamic\",\n            \"Friction Material Bonding Type\": \"Integrally Molded\",\n            \"SKU #\": \"314159\",\n            \"Weight\": \"6.64lbs\",\n            \"Material\": \"Iron Alloy\"\n          }),\n          vehicleFitment: JSON.stringify({\n            \"Genesis\": [\"2023-2025 Genesis Electrified GV70\", \"2021-2025 Genesis G80\"],\n            \"Hyundai\": [\"2020-2024 Palisade\"],\n            \"Kia\": [\"2020-2024 Telluride\"]\n          }),\n          warranty: JSON.stringify({ period: \"12 months/12,000 Miles Limited Warranty\" })\n        },\n        {\n          name: \"Tactical LED Headlight System\",\n          sku: \"LGT-TAC-002\",\n          price: \"1450.00\",\n          image: \"https://images.unsplash.com/photo-1552975662-72cb78d7e75b?auto=format&fit=crop&q=80&w=800\",\n          categoryId: catMap[\"Exterior & Utility\"],\n          department: \"Lighting\",\n          description: \"High-intensity tactical lighting for armored vehicles.\",\n          condition: \"new\" as const,\n          stock: 100,\n          make: \"Universal\",\n          model: \"Universal\",\n          year: 2024,\n          rating: \"4.8\",\n          reviewCount: 12,\n          actionType: \"buy_now\"\n        },\n        {\n          name: \"Reinforced Suspension Kits\",\n          sku: \"SUS-HD-003\",\n          price: \"14890.00\",\n          image: \"https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?auto=format&fit=crop&q=80&w=800\",\n          categoryId: catMap[\"Core Vehicle Systems\"],\n          department: \"Suspension\",\n          description: \"Heavy-duty suspension upgrades for up-armored chassis loads.\",\n          condition: \"new\" as const,\n          stock: 15,\n          make: \"Toyota\",\n          model: \"LC300\",\n          year: 2024,\n          rating: \"4.9\",\n          reviewCount: 5,\n          actionType: \"inquiry\"\n        },\n        {\n          name: \"Turbochargers & Superchargers\",\n          sku: \"ENG-TRB-004\",\n          price: \"4500.00\",\n          image: \"https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?auto=format&fit=crop&q=80&w=800\",\n          categoryId: catMap[\"Core Vehicle Systems\"],\n          department: \"Engine\",\n          description: \"Performance forced induction for heavy payloads.\",\n          condition: \"new\" as const,\n          stock: 20,\n          make: \"Nissan\",\n          model: \"Patrol Y62\",\n          year: 2023,\n          rating: \"4.7\",\n          reviewCount: 8,\n          actionType: \"buy_now\"\n        },\n        {\n          name: \"Ballistic Glass Panel B6\",\n          sku: \"ARM-GLS-005\",\n          price: \"2200.00\",\n          image: \"https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80&w=800\",\n          categoryId: catMap[\"Armor Specific Systems\"],\n          department: \"Glass\",\n          description: \"Certified B6 level ballistic protection glass replacement.\",\n          condition: \"new\" as const,\n          stock: 10,\n          make: \"Toyota\",\n          model: \"Hilux\",\n          year: 2022,\n          rating: \"5.0\",\n          reviewCount: 2,\n          actionType: \"inquiry\"\n        },\n        {\n          name: \"Fuel Pumps, Injectors & Rails\",\n          sku: \"ENG-FUL-006\",\n          price: \"850.00\",\n          image: \"https://images.unsplash.com/photo-1606577924004-79d2a2971e38?auto=format&fit=crop&q=80&w=800\",\n          categoryId: catMap[\"Core Vehicle Systems\"],\n          department: \"Fuel System\",\n          description: \"High-flow fuel delivery components.\",\n          condition: \"new\" as const,\n          stock: 40,\n          make: \"Universal\",\n          model: \"Universal\",\n          year: 2024,\n          rating: \"4.6\",\n          reviewCount: 15,\n          actionType: \"buy_now\"\n        },\n        {\n          name: \"Military Radio Communication Kit\",\n          sku: \"COM-RAD-007\",\n          price: \"3200.00\",\n          image: \"https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80&w=800\",\n          categoryId: catMap[\"Communication & Control\"],\n          department: \"Communications\",\n          description: \"Encrypted tactical radio system for secure field communications.\",\n          condition: \"new\" as const,\n          stock: 25,\n          make: \"Harris\",\n          model: \"Falcon III\",\n          year: 2024,\n          rating: \"4.9\",\n          reviewCount: 7,\n          actionType: \"inquiry\"\n        },\n        {\n          name: \"Armored HVAC Climate Control Unit\",\n          sku: \"CLI-HVAC-008\",\n          price: \"5600.00\",\n          image: \"https://images.unsplash.com/photo-1560965385-a7455d311394?auto=format&fit=crop&q=80&w=800\",\n          categoryId: catMap[\"Climate & Interior\"],\n          department: \"Climate Control\",\n          description: \"Heavy-duty climate control designed for armored vehicle cabins.\",\n          condition: \"new\" as const,\n          stock: 12,\n          make: \"Universal\",\n          model: \"AV-Series\",\n          year: 2024,\n          rating: \"4.4\",\n          reviewCount: 4,\n          actionType: \"buy_now\"\n        }\n      ];\n\n      const insertedProducts = await db.insert(products).values(sampleProducts as any).returning();\n      console.log(` Created ${insertedProducts.length} products`);\n\n    } else {\n      console.log(\"Database already seeded, skipping...\");\n    }\n\n    console.log(\" Database seeding completed\");\n  } catch (error) {\n    console.error(\"Error seeding database:\", error);\n    throw error;\n  }\n}\n","path":null,"size_bytes":8965,"size_tokens":null},"client/src/components/ui/spinner.tsx":{"content":"import { Loader2Icon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Spinner({ className, ...props }: React.ComponentProps<\"svg\">) {\n  return (\n    <Loader2Icon\n      role=\"status\"\n      aria-label=\"Loading\"\n      className={cn(\"size-4 animate-spin\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Spinner }\n","path":null,"size_bytes":331,"size_tokens":null},"client/src/pages/home.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport ProductImage from \"@/components/ui/product-image\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { Link } from \"wouter\";\nimport { ArrowRight, Loader2, ChevronRight, ChevronLeft } from \"lucide-react\";\nimport type { Product } from \"@shared/schema\";\nimport {\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselNext,\n  CarouselPrevious,\n} from \"@/components/ui/carousel\";\nimport Autoplay from \"embla-carousel-autoplay\";\nimport { useState, useEffect } from \"react\";\n\n// Mock slides for hero carousel (until we implement slides API)\nconst heroSlides = [\n  { id: 1, image: \"https://images.unsplash.com/photo-1595565312451-35d11ce8e00a?auto=format&fit=crop&q=80&w=1200\", title: \"DEFENCE COMMERCE, REINVENTED.\", subtitle: \"Built for Security. Powered by Compliance.\", link: \"/products\", buttonText: \"EXPLORE MARKETPLACE\" },\n  { id: 2, image: \"https://images.unsplash.com/photo-1601924357840-d0b8db1e5b27?auto=format&fit=crop&q=80&w=1200\", title: \"ARMORED VEHICLE PARTS\", subtitle: \"OEM & Aftermarket Solutions\", link: \"/products\", buttonText: \"SHOP NOW\" },\n];\n\nexport default function Home() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem('auth_token');\n    setIsAuthenticated(!!token);\n  }, []);\n\n  const { data: categories } = useQuery({ queryKey: ['categories'], queryFn: api.categories.getAll });\n  const { data: featuredProducts } = useQuery({ queryKey: ['featuredProducts'], queryFn: api.products.getFeatured });\n  const { data: topSellingProducts } = useQuery({ queryKey: ['topSellingProducts'], queryFn: api.products.getTopSelling });\n\n  if (!categories || !featuredProducts || !topSellingProducts) {\n    return (\n      <Layout>\n        <div className=\"min-h-screen flex items-center justify-center\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-[#D97706]\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  // Helper for Featured Product Card (Dark Theme)\n  const FeaturedCard = ({ product }: { product: Product }) => {\n    const price = product.price ? parseFloat(product.price.toString()) : null;\n    \n    return (\n      <Link href={`/products/${product.id}`} data-testid={`link-product-${product.id}`}>\n        <div className=\"group relative border border-slate-700 bg-[#1A1A1A] p-4 flex flex-col h-full hover:border-[#D97706] transition-colors cursor-pointer\">\n          <div className=\"aspect-[4/3] w-full overflow-hidden mb-4 bg-black/20 flex items-center justify-center\">\n            <ProductImage \n              src={product.image} \n              alt={product.name} \n              className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity\"\n              placeholderClassName=\"w-full h-full\"\n            />\n          </div>\n          <div className=\"mt-auto\">\n            <h3 className=\"text-white font-bold text-sm mb-1 line-clamp-2\">{product.name}</h3>\n            <div className=\"text-slate-400 text-xs mb-4\">\n              {isAuthenticated && price ? `AED ${price.toLocaleString()}` : 'Login for Price'}\n            </div>\n            <span \n              data-testid={`button-view-${product.id}`}\n              className=\"w-full h-9 text-xs font-bold uppercase rounded-none bg-white text-black hover:bg-[#D97706] hover:text-white flex items-center justify-center transition-colors\"\n            >\n              VIEW DETAILS\n            </span>\n          </div>\n        </div>\n      </Link>\n    );\n  };\n\n  return (\n    <Layout>\n      {/* 1. Hero Section - Dark & Industrial Carousel */}\n      <section className=\"relative bg-black h-[500px] overflow-hidden group\">\n        <Carousel \n          className=\"w-full h-full\"\n          plugins={[Autoplay({ delay: 5000 })]}\n          opts={{ loop: true }}\n        >\n          <CarouselContent className=\"h-full ml-0\">\n            {heroSlides.map((slide) => (\n              <CarouselItem key={slide.id} className=\"pl-0 relative h-[500px]\">\n                <div className=\"absolute inset-0\">\n                  <img \n                    src={slide.image} \n                    className=\"w-full h-full object-cover opacity-40\" \n                    alt=\"Armored Vehicle\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-black via-black/50 to-transparent\" />\n                </div>\n                \n                <div className=\"container mx-auto px-4 h-full flex items-center relative z-10\">\n                  <div className=\"max-w-xl\">\n                    <h1 className=\"text-5xl lg:text-6xl font-display font-bold text-[#D97706] leading-tight mb-2 uppercase\">\n                      {slide.title}\n                    </h1>\n                    <p className=\"text-lg text-slate-300 mb-8 font-light\">\n                      {slide.subtitle}\n                    </p>\n                    <Link href={slide.link}>\n                      <Button data-testid=\"button-hero-explore\" className=\"bg-[#D97706] hover:bg-orange-700 text-white font-bold uppercase rounded-none h-12 px-8\">\n                        {slide.buttonText}\n                      </Button>\n                    </Link>\n                  </div>\n                </div>\n              </CarouselItem>\n            ))}\n          </CarouselContent>\n          <div className=\"absolute bottom-8 right-8 flex gap-2\">\n            <CarouselPrevious className=\"static translate-y-0 h-10 w-10 border-slate-600 bg-black/50 hover:bg-[#D97706] hover:text-white hover:border-[#D97706] rounded-none text-slate-300\" />\n            <CarouselNext className=\"static translate-y-0 h-10 w-10 border-slate-600 bg-black/50 hover:bg-[#D97706] hover:text-white hover:border-[#D97706] rounded-none text-slate-300\" />\n          </div>\n        </Carousel>\n      </section>\n\n      {/* 2. Categories Carousel - Industrial Cards */}\n      <section className=\"py-16 bg-[#2A2A2A]\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex justify-between items-end mb-8 border-b border-slate-700 pb-4\">\n            <h2 className=\"text-2xl font-display font-bold text-white uppercase border-l-4 border-[#D97706] pl-4\">\n              CATEGORIES\n            </h2>\n          </div>\n          \n          <Carousel\n            opts={{\n              align: \"start\",\n              loop: true,\n            }}\n            className=\"w-full\"\n          >\n            <CarouselContent className=\"-ml-4\">\n              {categories.map((cat) => (\n                <CarouselItem key={cat.id} className=\"pl-4 basis-1/2 md:basis-1/3 lg:basis-1/6\">\n                  <Link href={`/products?cat=${cat.id}`}>\n                    <div className=\"group cursor-pointer\">\n                      <div className=\"aspect-square bg-slate-800 relative overflow-hidden mb-3 border border-transparent group-hover:border-[#D97706] transition-colors\">\n                        <img \n                          src={cat.image} \n                          alt={cat.name}\n                          className=\"w-full h-full object-cover opacity-70 group-hover:opacity-100 group-hover:scale-105 transition-all duration-500\"\n                        />\n                      </div>\n                      <h3 className=\"text-slate-300 text-xs font-bold uppercase group-hover:text-white leading-tight min-h-[2.5em]\">\n                        {cat.name}\n                      </h3>\n                    </div>\n                  </Link>\n                </CarouselItem>\n              ))}\n            </CarouselContent>\n            <div className=\"flex justify-end gap-2 mt-6\">\n               <CarouselPrevious className=\"static translate-y-0 h-8 w-8 border-slate-600 bg-transparent hover:bg-[#D97706] hover:text-white hover:border-[#D97706] rounded-none text-slate-400\" />\n               <CarouselNext className=\"static translate-y-0 h-8 w-8 border-slate-600 bg-transparent hover:bg-[#D97706] hover:text-white hover:border-[#D97706] rounded-none text-slate-400\" />\n            </div>\n          </Carousel>\n        </div>\n      </section>\n\n      {/* 3. Featured Products Carousel - Dark Theme */}\n      <section className=\"py-16 bg-[#1A1A1A] border-t border-slate-800\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex justify-between items-end mb-8\">\n            <h2 className=\"text-2xl font-display font-bold text-white uppercase border-l-4 border-white pl-4\">\n              FEATURED PRODUCTS\n            </h2>\n          </div>\n\n          <Carousel\n            opts={{\n              align: \"start\",\n              loop: true,\n            }}\n            className=\"w-full\"\n          >\n            <CarouselContent className=\"-ml-6\">\n              {featuredProducts.map((product) => (\n                <CarouselItem key={product.id} className=\"pl-6 basis-full md:basis-1/2 lg:basis-1/3\">\n                  <div className=\"h-full\">\n                    <FeaturedCard product={product} />\n                  </div>\n                </CarouselItem>\n              ))}\n            </CarouselContent>\n            <div className=\"flex justify-center mt-8 gap-2\">\n               <CarouselPrevious className=\"static translate-y-0 h-8 w-8 border-slate-600 bg-transparent hover:bg-white hover:text-black hover:border-white rounded-none text-slate-400\" />\n               <div className=\"w-8 h-1 bg-[#D97706] self-center\" />\n               <div className=\"w-8 h-1 bg-slate-700 self-center\" />\n               <CarouselNext className=\"static translate-y-0 h-8 w-8 border-slate-600 bg-transparent hover:bg-white hover:text-black hover:border-white rounded-none text-slate-400\" />\n            </div>\n          </Carousel>\n        </div>\n      </section>\n\n      {/* 4. Top Selling - Light Beige Theme */}\n      <section className=\"py-16 bg-[#EFEBE4]\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center\">\n            \n            {/* Left: Product Carousel Grid */}\n            <div>\n              <div className=\"flex justify-between items-center mb-8 border-l-4 border-[#1A1A1A] pl-4\">\n                <h2 className=\"text-2xl font-display font-bold text-[#1A1A1A] uppercase\">\n                  TOP SELLING PRODUCTS\n                </h2>\n              </div>\n              \n              <Carousel className=\"w-full\">\n                <CarouselContent>\n                  {/* Slide 1 - Grid of 6 */}\n                  <CarouselItem>\n                    <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-8\">\n                      {topSellingProducts.slice(0, 6).map((product) => (\n                        <Link key={product.id} href={`/products/${product.id}`}>\n                          <div className=\"group cursor-pointer text-center\">\n                            <div className=\"aspect-square bg-white border border-slate-200 mb-3 p-2 group-hover:border-[#D97706] transition-colors\">\n                              <ProductImage src={product.image} className=\"w-full h-full object-contain\" alt={product.name} placeholderClassName=\"w-full h-full\" />\n                            </div>\n                            <h3 className=\"text-[10px] font-bold text-slate-800 uppercase leading-tight line-clamp-2 h-8\">\n                              {product.name}\n                            </h3>\n                          </div>\n                        </Link>\n                      ))}\n                    </div>\n                  </CarouselItem>\n                  {/* Slide 2 - Next set (simulated by repeating for now if not enough data) */}\n                   <CarouselItem>\n                    <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-8\">\n                      {topSellingProducts.slice(0, 6).map((product) => (\n                        <Link key={`dup-${product.id}`} href={`/products/${product.id}`}>\n                          <div className=\"group cursor-pointer text-center\">\n                            <div className=\"aspect-square bg-white border border-slate-200 mb-3 p-2 group-hover:border-[#D97706] transition-colors\">\n                              <ProductImage src={product.image} className=\"w-full h-full object-contain\" alt={product.name} placeholderClassName=\"w-full h-full\" />\n                            </div>\n                            <h3 className=\"text-[10px] font-bold text-slate-800 uppercase leading-tight line-clamp-2 h-8\">\n                              {product.name}\n                            </h3>\n                          </div>\n                        </Link>\n                      ))}\n                    </div>\n                  </CarouselItem>\n                </CarouselContent>\n                <div className=\"flex justify-center gap-2 mt-6\">\n                  <CarouselPrevious className=\"static translate-y-0 h-8 w-8 border-slate-300 bg-transparent hover:bg-[#1A1A1A] hover:text-white rounded-none text-slate-500\" />\n                  <CarouselNext className=\"static translate-y-0 h-8 w-8 border-slate-300 bg-transparent hover:bg-[#1A1A1A] hover:text-white rounded-none text-slate-500\" />\n                </div>\n              </Carousel>\n            </div>\n\n            {/* Right: Featured Highlight */}\n            <div className=\"relative h-full min-h-[400px] bg-slate-200 overflow-hidden group cursor-pointer\">\n               <img \n                 src=\"https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?auto=format&fit=crop&q=80&w=800\" \n                 className=\"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105\"\n                 alt=\"Highlight\"\n               />\n               <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent\" />\n               <div className=\"absolute bottom-8 left-8 right-8 text-center\">\n                 <h3 className=\"text-2xl font-bold text-white mb-2\">Turbochargers & Superchargers</h3>\n                 <div className=\"flex justify-center items-center gap-2 text-[#D97706] text-sm mb-4\">\n                   <span></span>\n                   <span className=\"text-slate-300\">(2083)</span>\n                 </div>\n                 <Button className=\"bg-white text-[#D97706] hover:bg-[#D97706] hover:text-white font-bold uppercase h-10 px-8 rounded-none\">\n                   BUY NOW\n                 </Button>\n               </div>\n               \n               {/* Navigation Arrows Mockup */}\n               <div className=\"absolute top-1/2 -translate-y-1/2 left-4 text-white/50 hover:text-white cursor-pointer transition-colors hover:scale-110\">\n                 <ChevronLeft className=\"h-8 w-8\" />\n               </div>\n               <div className=\"absolute top-1/2 -translate-y-1/2 right-4 text-white/50 hover:text-white cursor-pointer transition-colors hover:scale-110\">\n                 <ChevronRight className=\"h-8 w-8\" />\n               </div>\n            </div>\n\n          </div>\n        </div>\n      </section>\n\n      {/* Sponsored Ad Banner */}\n      <section className=\"bg-[#1A1A1A] py-8 border-t border-slate-800\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"bg-black border border-slate-700 p-1 flex items-center justify-between\">\n             <div className=\"bg-white px-6 py-4\">\n               <img src=\"https://via.placeholder.com/150x40?text=LOGO\" alt=\"Brand Logo\" className=\"h-8 opacity-80\" />\n             </div>\n             <div className=\"flex-1 px-8 flex items-center gap-4\">\n               <img src=\"https://via.placeholder.com/60x60?text=ITEM\" alt=\"Item\" className=\"h-12 w-12 rounded border border-slate-600\" />\n               <div>\n                 <h3 className=\"text-white font-bold text-lg uppercase tracking-wider\">VIZZ 550 RGB</h3>\n                 <p className=\"text-slate-400 text-xs\">Specialty Color Waterproof Headlamp</p>\n               </div>\n             </div>\n             <Button className=\"bg-[#D97706] text-white hover:bg-orange-700 font-bold uppercase rounded-none mr-4\">\n               SHOP NOW\n             </Button>\n          </div>\n          <p className=\"text-[10px] text-slate-600 mt-2 text-center\">\n            Disclaimer: This is a sponsored content. ArmoredMart assumes no responsibility...\n          </p>\n        </div>\n      </section>\n\n      {/* Trust Badges - Dark */}\n      <section className=\"bg-[#2A2A2A] py-12 border-t border-slate-700\">\n        <div className=\"container mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 text-center\">\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-12 h-12 border border-slate-500 rounded flex items-center justify-center mb-4 text-slate-400\">\n              <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n            </div>\n            <h4 className=\"text-white font-bold uppercase text-sm mb-1\">Compliance Built In</h4>\n            <p className=\"text-slate-500 text-xs\">Global standards. Automatic protection.</p>\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-12 h-12 border border-slate-500 rounded flex items-center justify-center mb-4 text-slate-400\">\n              <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" /></svg>\n            </div>\n            <h4 className=\"text-white font-bold uppercase text-sm mb-1\">Secure Commerce Platform</h4>\n            <p className=\"text-slate-500 text-xs\">Every transaction, fully encrypted.</p>\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-12 h-12 border border-slate-500 rounded flex items-center justify-center mb-4 text-slate-400\">\n              <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" /></svg>\n            </div>\n            <h4 className=\"text-white font-bold uppercase text-sm mb-1\">Verified Sellers & Buyers</h4>\n            <p className=\"text-slate-500 text-xs\">Only trusted partners allowed.</p>\n          </div>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":18701,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"import * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3007,"size_tokens":null},"client/src/lib/api.ts":{"content":"import type { Product, Category, Review, CartItem, Order, Refund, RefundItem, Address, SavedPaymentMethod } from \"@shared/schema\";\n\nconst API_BASE = \"/api\";\n\n// Token storage keys\nconst ACCESS_TOKEN_KEY = 'access_token';\nconst REFRESH_TOKEN_KEY = 'refresh_token';\nconst TOKEN_EXPIRY_KEY = 'token_expiry';\n\n// Get stored tokens\nexport function getAccessToken(): string | null {\n  return localStorage.getItem(ACCESS_TOKEN_KEY);\n}\n\nexport function getRefreshToken(): string | null {\n  return localStorage.getItem(REFRESH_TOKEN_KEY);\n}\n\n// Store tokens\nexport function storeTokens(accessToken: string, refreshToken: string, expiresIn: number) {\n  localStorage.setItem(ACCESS_TOKEN_KEY, accessToken);\n  localStorage.setItem(REFRESH_TOKEN_KEY, refreshToken);\n  localStorage.setItem(TOKEN_EXPIRY_KEY, String(Date.now() + (expiresIn * 1000)));\n}\n\n// Clear tokens (logout)\nexport function clearTokens() {\n  localStorage.removeItem(ACCESS_TOKEN_KEY);\n  localStorage.removeItem(REFRESH_TOKEN_KEY);\n  localStorage.removeItem(TOKEN_EXPIRY_KEY);\n  localStorage.removeItem('user');\n  // Also clear old token key for backward compatibility\n  localStorage.removeItem('auth_token');\n}\n\n// Check if token is about to expire (within 60 seconds)\nfunction isTokenExpiringSoon(): boolean {\n  const expiry = localStorage.getItem(TOKEN_EXPIRY_KEY);\n  if (!expiry) return true;\n  return Date.now() > (parseInt(expiry) - 60000);\n}\n\n// Refresh tokens\nlet refreshPromise: Promise<boolean> | null = null;\n\nasync function refreshAccessToken(): Promise<boolean> {\n  // Prevent multiple simultaneous refresh requests\n  if (refreshPromise) {\n    return refreshPromise;\n  }\n\n  const refreshToken = getRefreshToken();\n  if (!refreshToken) {\n    return false;\n  }\n\n  refreshPromise = (async () => {\n    try {\n      const response = await fetch(`${API_BASE}/auth/refresh`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ refreshToken }),\n      });\n\n      if (!response.ok) {\n        clearTokens();\n        return false;\n      }\n\n      const data = await response.json();\n      storeTokens(data.accessToken, data.refreshToken, data.expiresIn);\n      return true;\n    } catch (error) {\n      clearTokens();\n      return false;\n    } finally {\n      refreshPromise = null;\n    }\n  })();\n\n  return refreshPromise;\n}\n\nfunction getAuthHeaders(): HeadersInit {\n  const token = getAccessToken();\n  return token ? { Authorization: `Bearer ${token}` } : {};\n}\n\nasync function fetchJson<T>(url: string, options?: RequestInit, retry = true): Promise<T> {\n  // Check if token needs refresh before making request\n  if (isTokenExpiringSoon() && getRefreshToken()) {\n    await refreshAccessToken();\n  }\n\n  const response = await fetch(`${API_BASE}${url}`, {\n    ...options,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...getAuthHeaders(),\n      ...options?.headers,\n    },\n  });\n\n  // If unauthorized and we have a refresh token, try to refresh and retry\n  if (response.status === 401 && retry && getRefreshToken()) {\n    const refreshed = await refreshAccessToken();\n    if (refreshed) {\n      return fetchJson<T>(url, options, false);\n    }\n  }\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({ error: response.statusText }));\n    throw new Error(error.error || \"Request failed\");\n  }\n\n  return response.json();\n}\n\nexport const api = {\n  // Products\n  products: {\n    getAll: (filters?: {\n      categoryId?: number;\n      search?: string;\n      minPrice?: number;\n      maxPrice?: number;\n    }) => {\n      const params = new URLSearchParams();\n      if (filters?.categoryId) params.set(\"categoryId\", filters.categoryId.toString());\n      if (filters?.search) params.set(\"search\", filters.search);\n      if (filters?.minPrice) params.set(\"minPrice\", filters.minPrice.toString());\n      if (filters?.maxPrice) params.set(\"maxPrice\", filters.maxPrice.toString());\n      \n      const query = params.toString();\n      return fetchJson<Product[]>(`/products${query ? `?${query}` : \"\"}`);\n    },\n    \n    getFeatured: () => fetchJson<Product[]>(\"/products/featured\"),\n    \n    getTopSelling: () => fetchJson<Product[]>(\"/products/top-selling\"),\n    \n    getById: (id: number) => fetchJson<Product>(`/products/${id}`),\n    \n    getSimilar: (id: number) => fetchJson<Product[]>(`/products/${id}/similar`),\n    \n    getRecommended: (id: number) => fetchJson<Product[]>(`/products/${id}/recommended`),\n  },\n\n  // Categories\n  categories: {\n    getAll: () => fetchJson<Category[]>(\"/categories\"),\n  },\n\n  // Reviews\n  reviews: {\n    getByProduct: (productId: number) => \n      fetchJson<(Review & { user: { name: string; avatar?: string } })[]>(`/products/${productId}/reviews`),\n    \n    create: (productId: number, data: { rating: number; comment: string }) =>\n      fetchJson<Review>(`/products/${productId}/reviews`, {\n        method: \"POST\",\n        body: JSON.stringify(data),\n      }),\n  },\n\n  // Cart\n  cart: {\n    get: () => fetchJson<(CartItem & { product: Product })[]>(\"/cart\"),\n    \n    add: (productId: number, quantity: number = 1) =>\n      fetchJson<CartItem>(\"/cart\", {\n        method: \"POST\",\n        body: JSON.stringify({ productId, quantity }),\n      }),\n    \n    update: (id: number, quantity: number) =>\n      fetchJson<CartItem>(`/cart/${id}`, {\n        method: \"PATCH\",\n        body: JSON.stringify({ quantity }),\n      }),\n    \n    remove: (id: number) =>\n      fetch(`${API_BASE}/cart/${id}`, { \n        method: \"DELETE\",\n        headers: getAuthHeaders(),\n      }),\n  },\n  \n  // Checkout\n  checkout: {\n    createSession: () => \n      fetchJson<{ url?: string; testMode?: boolean; error?: string }>(\"/checkout/create-session\", {\n        method: \"POST\",\n      }),\n  },\n\n  // Orders\n  orders: {\n    getAll: () => fetchJson<(Order & { items: any[] })[]>(\"/orders\"),\n    \n    getById: (id: string) => fetchJson<Order & { items: any[] }>(`/orders/${id}`),\n    \n    create: (items: any[]) =>\n      fetchJson<Order>(\"/orders\", {\n        method: \"POST\",\n        body: JSON.stringify({ items }),\n      }),\n  },\n\n  // Refunds\n  refunds: {\n    getAll: () => fetchJson<(Refund & { items: RefundItem[] })[]>(\"/refunds\"),\n    \n    getById: (id: string) => fetchJson<Refund & { items: RefundItem[] }>(`/refunds/${id}`),\n  },\n\n  // Vendor\n  vendor: {\n    getStats: () => \n      fetchJson<{ revenue: number; orders: number; products: number }>(\"/vendor/stats\"),\n    \n    getProducts: () => fetchJson<Product[]>(\"/vendor/products\"),\n  },\n\n  // Filters\n  filters: {\n    get: () => \n      fetchJson<{\n        brands: string[];\n        departments: string[];\n        productTypes: { name: string; image: string }[];\n        surfaceTypes: string[];\n        frictionalMaterials: string[];\n      }>(\"/filters\"),\n  },\n\n  // User\n  user: {\n    getCurrent: () => \n      fetchJson<{ id: string; email: string; name: string; userType: 'customer' | 'vendor' | 'admin' | 'super_admin' }>(\"/user\"),\n  },\n\n  // Auth\n  auth: {\n    login: (email: string, password: string) =>\n      fetch(`${API_BASE}/auth/login`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password }),\n      }).then(async (res) => {\n        const data = await res.json();\n        if (!res.ok) throw new Error(data.error || 'Login failed');\n        return data as {\n          user: { id: string; email: string; name: string; userType: string };\n          accessToken: string;\n          refreshToken: string;\n          expiresIn: number;\n        };\n      }),\n\n    register: (name: string, email: string, password: string, userType: string) =>\n      fetch(`${API_BASE}/auth/register`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name, email, password, userType }),\n      }).then(async (res) => {\n        const data = await res.json();\n        if (!res.ok) throw new Error(data.error || 'Registration failed');\n        return data as {\n          user: { id: string; email: string; name: string; userType: string };\n          accessToken: string;\n          refreshToken: string;\n          expiresIn: number;\n        };\n      }),\n\n    logout: () =>\n      fetch(`${API_BASE}/auth/logout`, {\n        method: 'POST',\n        headers: getAuthHeaders(),\n      }),\n\n    logoutAll: () =>\n      fetchJson<{ message: string }>('/auth/logout-all', { method: 'POST' }),\n\n    getSessions: () =>\n      fetchJson<Array<{\n        id: string;\n        deviceLabel: string;\n        ipAddress: string;\n        lastUsedAt: string;\n        createdAt: string;\n        isCurrent: boolean;\n      }>>('/auth/sessions'),\n\n    revokeSession: (sessionId: string) =>\n      fetchJson<{ message: string }>(`/auth/sessions/${sessionId}`, { method: 'DELETE' }),\n\n    me: () =>\n      fetchJson<{ id: string; email: string; name: string; userType: string; completionPercentage?: number }>('/auth/me'),\n  },\n\n  // Addresses\n  addresses: {\n    getAll: () => fetchJson<Address[]>('/addresses'),\n    create: (data: Partial<Address>) => \n      fetchJson<Address>('/addresses', { method: 'POST', body: JSON.stringify(data) }),\n    update: (id: number, data: Partial<Address>) => \n      fetchJson<Address>(`/addresses/${id}`, { method: 'PUT', body: JSON.stringify(data) }),\n    delete: (id: number) => \n      fetchJson<{ success: boolean }>(`/addresses/${id}`, { method: 'DELETE' }),\n    setDefault: (id: number) => \n      fetchJson<{ success: boolean }>(`/addresses/${id}/default`, { method: 'POST' }),\n  },\n\n  // Saved Payments (PCI-DSS, RBI, UAE Central Bank compliant)\n  payments: {\n    getAll: () => fetchJson<SavedPaymentMethod[]>('/payments'),\n    create: (data: Partial<SavedPaymentMethod>) => \n      fetchJson<SavedPaymentMethod>('/payments', { method: 'POST', body: JSON.stringify(data) }),\n    delete: (id: number) => \n      fetchJson<{ success: boolean }>(`/payments/${id}`, { method: 'DELETE' }),\n    setDefault: (id: number) => \n      fetchJson<{ success: boolean }>(`/payments/${id}/default`, { method: 'POST' }),\n  },\n};\n","path":null,"size_bytes":10047,"size_tokens":null},"server/stripeClient.ts":{"content":"import Stripe from 'stripe';\n\nlet connectionSettings: any;\n\nasync function getCredentials() {\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME;\n  const xReplitToken = process.env.REPL_IDENTITY\n    ? 'repl ' + process.env.REPL_IDENTITY\n    : process.env.WEB_REPL_RENEWAL\n      ? 'depl ' + process.env.WEB_REPL_RENEWAL\n      : null;\n\n  if (!xReplitToken) {\n    throw new Error('X_REPLIT_TOKEN not found for repl/depl');\n  }\n\n  const connectorName = 'stripe';\n\n  const isProduction = process.env.REPLIT_DEPLOYMENT === '1';\n  const targetEnvironment = isProduction ? 'production' : 'development';\n\n  const url = new URL(`https://${hostname}/api/v2/connection`);\n  url.searchParams.set('include_secrets', 'true');\n  url.searchParams.set('connector_names', connectorName);\n  url.searchParams.set('environment', targetEnvironment);\n\n  const response = await fetch(url.toString(), {\n    headers: {\n      'Accept': 'application/json',\n      'X_REPLIT_TOKEN': xReplitToken\n    }\n  });\n\n  const data = await response.json();\n  \n  connectionSettings = data.items?.[0];\n\n  if (!connectionSettings || (!connectionSettings.settings.publishable || !connectionSettings.settings.secret)) {\n    throw new Error(`Stripe ${targetEnvironment} connection not found`);\n  }\n\n  return {\n    publishableKey: connectionSettings.settings.publishable,\n    secretKey: connectionSettings.settings.secret,\n  };\n}\n\nexport async function getUncachableStripeClient() {\n  const { secretKey } = await getCredentials();\n\n  return new Stripe(secretKey, {\n    apiVersion: '2025-08-27.basil',\n  });\n}\n\nexport async function getStripePublishableKey() {\n  const { publishableKey } = await getCredentials();\n\n  return publishableKey;\n}\n\nexport async function getStripeSecretKey() {\n  const { secretKey } = await getCredentials();\n  return secretKey;\n}\n\nlet stripeSync: any = null;\n\nexport async function getStripeSync() {\n  if (!stripeSync) {\n    const { StripeSync } = await import('stripe-replit-sync');\n    const secretKey = await getStripeSecretKey();\n\n    stripeSync = new StripeSync({\n      poolConfig: {\n        connectionString: process.env.DATABASE_URL!,\n        max: 2,\n      },\n      stripeSecretKey: secretKey,\n    });\n  }\n  return stripeSync;\n}\n","path":null,"size_bytes":2222,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1486,"size_tokens":null},"vite-plugin-meta-images.ts":{"content":"import type { Plugin } from 'vite';\nimport fs from 'fs';\nimport path from 'path';\n\n/**\n * Vite plugin that updates og:image and twitter:image meta tags\n * to point to the app's opengraph image with the correct Replit domain.\n */\nexport function metaImagesPlugin(): Plugin {\n  return {\n    name: 'vite-plugin-meta-images',\n    transformIndexHtml(html) {\n      const baseUrl = getDeploymentUrl();\n      if (!baseUrl) {\n        log('[meta-images] no Replit deployment domain found, skipping meta tag updates');\n        return html;\n      }\n\n      // Check if opengraph image exists in public directory\n      const publicDir = path.resolve(process.cwd(), 'client', 'public');\n      const opengraphPngPath = path.join(publicDir, 'opengraph.png');\n      const opengraphJpgPath = path.join(publicDir, 'opengraph.jpg');\n      const opengraphJpegPath = path.join(publicDir, 'opengraph.jpeg');\n\n      let imageExt: string | null = null;\n      if (fs.existsSync(opengraphPngPath)) {\n        imageExt = 'png';\n      } else if (fs.existsSync(opengraphJpgPath)) {\n        imageExt = 'jpg';\n      } else if (fs.existsSync(opengraphJpegPath)) {\n        imageExt = 'jpeg';\n      }\n\n      if (!imageExt) {\n        log('[meta-images] OpenGraph image not found, skipping meta tag updates');\n        return html;\n      }\n\n      const imageUrl = `${baseUrl}/opengraph.${imageExt}`;\n\n      log('[meta-images] updating meta image tags to:', imageUrl);\n\n      html = html.replace(\n        /<meta\\s+property=\"og:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta property=\"og:image\" content=\"${imageUrl}\" />`\n      );\n\n      html = html.replace(\n        /<meta\\s+name=\"twitter:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta name=\"twitter:image\" content=\"${imageUrl}\" />`\n      );\n\n      return html;\n    },\n  };\n}\n\nfunction getDeploymentUrl(): string | null {\n  if (process.env.REPLIT_INTERNAL_APP_DOMAIN) {\n    const url = `https://${process.env.REPLIT_INTERNAL_APP_DOMAIN}`;\n    log('[meta-images] using internal app domain:', url);\n    return url;\n  }\n\n  if (process.env.REPLIT_DEV_DOMAIN) {\n    const url = `https://${process.env.REPLIT_DEV_DOMAIN}`;\n    log('[meta-images] using dev domain:', url);\n    return url;\n  }\n\n  return null;\n}\n\nfunction log(...args: any[]): void {\n  if (process.env.NODE_ENV === 'production') {\n    console.log(...args);\n  }\n}\n","path":null,"size_bytes":2333,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-3.5 w-3.5 fill-primary\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1410,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7606,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":547,"size_tokens":null},"client/src/pages/checkout.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { ArrowLeft, MapPin, CreditCard, AlertTriangle, Loader2, ShoppingBag, Lock } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { api, getAccessToken } from \"@/lib/api\";\nimport { useState, useEffect } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\n\nexport default function CheckoutPage() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState(\"card\");\n  const [showTestModeWarning, setShowTestModeWarning] = useState(false);\n\n  useEffect(() => {\n    const token = getAccessToken();\n    setIsAuthenticated(!!token);\n    if (!token) {\n      setLocation('/auth/login');\n    }\n  }, [setLocation]);\n\n  const { data: cartItems, isLoading: cartLoading } = useQuery({\n    queryKey: ['cart'],\n    queryFn: api.cart.get,\n    enabled: isAuthenticated,\n  });\n\n  const checkoutMutation = useMutation({\n    mutationFn: api.checkout.createSession,\n    onSuccess: (data: { url?: string; testMode?: boolean; orderId?: string; error?: string }) => {\n      // Invalidate cart query since checkout clears the cart\n      queryClient.invalidateQueries({ queryKey: ['cart'] });\n      queryClient.invalidateQueries({ queryKey: ['orders'] });\n      \n      if (data.url) {\n        window.location.href = data.url;\n      } else if (data.testMode && data.orderId) {\n        // Order created successfully in test mode, redirect to orders\n        toast({\n          title: \"Order Placed Successfully!\",\n          description: \"Your order has been created. Redirecting to your orders...\",\n        });\n        setTimeout(() => {\n          setLocation('/account/profile');\n        }, 1500);\n      } else if (data.testMode) {\n        setShowTestModeWarning(true);\n        toast({\n          title: \"Sample Environment\",\n          description: \"Stripe is not configured. This is a demo environment.\",\n        });\n      }\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Checkout Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handlePlaceOrder = () => {\n    if (paymentMethod === \"card\") {\n      checkoutMutation.mutate();\n    } else {\n      toast({\n        title: \"Coming Soon\",\n        description: \"This payment method will be available soon.\",\n      });\n    }\n  };\n\n  if (!isAuthenticated || cartLoading) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen flex items-center justify-center\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-orange-600\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  if (!cartItems || cartItems.length === 0) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen pb-20\">\n          <div className=\"container mx-auto px-4 py-20 text-center\">\n            <ShoppingBag className=\"h-16 w-16 mx-auto text-slate-300 mb-4\" />\n            <h2 className=\"text-2xl font-bold mb-2\">Your cart is empty</h2>\n            <p className=\"text-slate-500 mb-6\">Add some products to checkout</p>\n            <Link href=\"/products\">\n              <Button className=\"bg-orange-600 hover:bg-orange-700\">Browse Products</Button>\n            </Link>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n\n  const subtotal = cartItems.reduce((acc, item) => \n    acc + (parseFloat(item.product.price) * item.quantity), 0);\n  const shipping = subtotal > 500 ? 0 : 40;\n  const tax = subtotal * 0.05;\n  const total = subtotal + shipping + tax;\n\n  return (\n    <Layout>\n      <div className=\"bg-slate-50 min-h-screen pb-20\">\n        <div className=\"bg-[#3D4736] text-white py-3 px-4 text-xs font-medium\">\n          <div className=\"container mx-auto\">\n            <Link href=\"/cart\">\n              <span className=\"cursor-pointer hover:underline\">BACK TO CART ({cartItems.length} Items)</span>\n            </Link>\n          </div>\n        </div>\n\n        <div className=\"container mx-auto px-4 py-8\">\n          {showTestModeWarning && (\n            <Alert className=\"mb-6 border-orange-300 bg-orange-50\">\n              <AlertTriangle className=\"h-4 w-4 text-orange-600\" />\n              <AlertTitle className=\"text-orange-800\">Sample Environment</AlertTitle>\n              <AlertDescription className=\"text-orange-700\">\n                This is a sample environment. Stripe payment integration requires valid API credentials to process real payments.\n                In production, customers would be redirected to Stripe's secure checkout page.\n              </AlertDescription>\n            </Alert>\n          )}\n\n          <h1 className=\"text-2xl font-display font-bold mb-8 uppercase flex items-center gap-2\">\n            <Link href=\"/cart\">\n              <ArrowLeft className=\"h-5 w-5 cursor-pointer hover:text-orange-600\" />\n            </Link>\n            Checkout\n          </h1>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            <div className=\"lg:col-span-2 space-y-8\">\n              <div className=\"bg-[#EFEBE4] rounded-lg p-6\">\n                <h3 className=\"font-bold text-sm uppercase mb-4\">Shipping Address</h3>\n                <div className=\"bg-white p-4 rounded border border-orange-200 flex justify-between items-start\">\n                  <div className=\"flex gap-3\">\n                    <MapPin className=\"h-5 w-5 text-slate-600 mt-1\" />\n                    <div>\n                      <div className=\"font-bold text-sm mb-1\">Default Address</div>\n                      <div className=\"text-xs text-muted-foreground leading-relaxed max-w-md\">\n                        Please update your shipping address during checkout\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-[#EFEBE4] rounded-lg p-6\">\n                <h3 className=\"font-bold text-sm uppercase mb-4 flex justify-between\">\n                  Delivery Instructions\n                </h3>\n                <div className=\"flex items-center space-x-2\">\n                  <Checkbox id=\"items-together\" defaultChecked />\n                  <label htmlFor=\"items-together\" className=\"text-sm font-medium leading-none\">\n                    Get items together\n                  </label>\n                </div>\n              </div>\n\n              <div>\n                <h2 className=\"text-2xl font-display font-bold mb-6 uppercase\">Your Order</h2>\n                <div className=\"space-y-4\">\n                  {cartItems.map((item, index) => (\n                    <div key={item.id} className=\"bg-[#EFEBE4] p-4 rounded-lg flex gap-4\" data-testid={`checkout-item-${item.id}`}>\n                      <div className=\"w-16 h-16 bg-white rounded border flex-shrink-0 overflow-hidden\">\n                        <img src={item.product.image} alt={item.product.name} className=\"w-full h-full object-contain p-1\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <div className=\"flex justify-between\">\n                          <h4 className=\"font-bold text-sm\">\n                            Shipment {index + 1} of {cartItems.length} \n                            <span className=\"text-slate-500 font-normal\"> ({item.quantity} item{item.quantity > 1 ? 's' : ''})</span>\n                          </h4>\n                          <span className=\"text-xs text-green-600 font-bold\">Est. 3-5 business days</span>\n                        </div>\n                        <p className=\"text-sm font-medium mt-1 line-clamp-1\">{item.product.name}</p>\n                        <p className=\"font-bold text-sm mt-1\">AED {(parseFloat(item.product.price) * item.quantity).toFixed(2)}</p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <h2 className=\"text-2xl font-display font-bold mb-6 uppercase\">Payment</h2>\n                <div className=\"bg-[#EFEBE4] rounded-lg overflow-hidden\">\n                  <RadioGroup value={paymentMethod} onValueChange={setPaymentMethod} className=\"gap-0 divide-y divide-slate-200\">\n                    <div className=\"flex items-center justify-between p-4 bg-white/50\">\n                      <div className=\"flex items-center space-x-2\">\n                        <RadioGroupItem value=\"card\" id=\"card\" />\n                        <Label htmlFor=\"card\">Debit/Credit Card (Stripe)</Label>\n                      </div>\n                      <CreditCard className=\"h-5 w-5 text-slate-500\" />\n                    </div>\n                  </RadioGroup>\n                </div>\n                <div className=\"mt-4 p-4 bg-slate-100 rounded-lg flex items-center gap-3 text-sm text-slate-600\">\n                  <Lock className=\"h-4 w-4\" />\n                  <span>Your payment is secured with SSL encryption and processed by Stripe</span>\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <div className=\"bg-[#EFEBE4] rounded-lg p-6 sticky top-24\">\n                <h3 className=\"font-display font-bold text-lg mb-6 uppercase\">Order Summary</h3>\n                \n                <div className=\"space-y-3 text-sm font-medium mb-4\">\n                  <div className=\"flex justify-between\">\n                    <span>Subtotal ({cartItems.length} items)</span>\n                    <span>AED {subtotal.toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-slate-500\">\n                    <span>Shipping</span>\n                    <span>{shipping === 0 ? 'FREE' : `AED ${shipping.toFixed(2)}`}</span>\n                  </div>\n                  <div className=\"flex justify-between text-slate-500\">\n                    <span>VAT (5%)</span>\n                    <span>AED {tax.toFixed(2)}</span>\n                  </div>\n                </div>\n\n                <div className=\"flex justify-between items-baseline mb-1 pt-4 border-t border-slate-300\">\n                  <span className=\"font-bold text-lg\">Total <span className=\"text-xs font-normal text-slate-500\">(Inclusive of VAT)</span></span>\n                  <span className=\"font-bold text-xl\">AED {total.toFixed(2)}</span>\n                </div>\n                <div className=\"text-xs text-right text-slate-500 mb-6\">Estimated VAT: AED {tax.toFixed(2)}</div>\n\n                <Button \n                  className=\"w-full h-12 text-base font-bold bg-orange-600 hover:bg-orange-700 uppercase tracking-wider\"\n                  onClick={handlePlaceOrder}\n                  disabled={checkoutMutation.isPending}\n                  data-testid=\"button-place-order\"\n                >\n                  {checkoutMutation.isPending ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                      Processing...\n                    </>\n                  ) : (\n                    'Place Order'\n                  )}\n                </Button>\n\n                <p className=\"text-xs text-center text-slate-500 mt-4\">\n                  By placing this order, you agree to our Terms of Service and Privacy Policy\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":11847,"size_tokens":null},"client/src/pages/seller/dashboard.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { \n  LayoutDashboard, \n  Package, \n  ShoppingCart, \n  MessageSquare, \n  BarChart3, \n  Settings,\n  Plus,\n  DollarSign,\n  TrendingUp,\n  Users\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nexport default function SellerDashboard() {\n  const stats = [\n    { title: \"Total Revenue\", value: \"$45,231.89\", change: \"+20.1% from last month\", icon: DollarSign },\n    { title: \"Orders\", value: \"+2350\", change: \"+180.1% from last month\", icon: ShoppingCart },\n    { title: \"Active Products\", value: \"124\", change: \"+12 new this week\", icon: Package },\n    { title: \"Active Customers\", value: \"+573\", change: \"+201 since last hour\", icon: Users },\n  ];\n\n  return (\n    <Layout>\n      <div className=\"flex h-[calc(100vh-64px)]\">\n        {/* Sidebar */}\n        <aside className=\"hidden lg:flex w-64 flex-col border-r bg-slate-50/50\">\n          <div className=\"p-6\">\n            <h2 className=\"text-lg font-bold font-display text-slate-800\">Vendor Portal</h2>\n          </div>\n          <nav className=\"flex-1 px-4 space-y-2\">\n            <Button variant=\"secondary\" className=\"w-full justify-start gap-3 bg-white shadow-sm font-medium\">\n              <LayoutDashboard className=\"h-4 w-4\" /> Dashboard\n            </Button>\n            <Button variant=\"ghost\" className=\"w-full justify-start gap-3 text-muted-foreground\">\n              <Package className=\"h-4 w-4\" /> Products\n            </Button>\n            <Button variant=\"ghost\" className=\"w-full justify-start gap-3 text-muted-foreground\">\n              <ShoppingCart className=\"h-4 w-4\" /> Orders\n            </Button>\n            <Button variant=\"ghost\" className=\"w-full justify-start gap-3 text-muted-foreground\">\n              <MessageSquare className=\"h-4 w-4\" /> Messages\n            </Button>\n            <Button variant=\"ghost\" className=\"w-full justify-start gap-3 text-muted-foreground\">\n              <BarChart3 className=\"h-4 w-4\" /> Analytics\n            </Button>\n            <Button variant=\"ghost\" className=\"w-full justify-start gap-3 text-muted-foreground\">\n              <Settings className=\"h-4 w-4\" /> Settings\n            </Button>\n          </nav>\n        </aside>\n\n        {/* Main Content */}\n        <main className=\"flex-1 overflow-y-auto p-8\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h1 className=\"text-3xl font-display font-bold\">Dashboard</h1>\n              <p className=\"text-muted-foreground\">Overview of your store's performance.</p>\n            </div>\n            <Button className=\"gap-2\">\n              <Plus className=\"h-4 w-4\" /> Add New Product\n            </Button>\n          </div>\n\n          {/* Stats Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n            {stats.map((stat) => (\n              <Card key={stat.title}>\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                  <CardTitle className=\"text-sm font-medium\">\n                    {stat.title}\n                  </CardTitle>\n                  <stat.icon className=\"h-4 w-4 text-muted-foreground\" />\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-2xl font-bold\">{stat.value}</div>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {stat.change}\n                  </p>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          {/* Recent Orders */}\n          <Card className=\"col-span-4\">\n            <CardHeader>\n              <CardTitle>Recent Orders</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {[1, 2, 3, 4, 5].map((i) => (\n                  <div key={i} className=\"flex items-center justify-between p-4 border rounded-lg bg-card hover:bg-slate-50 transition-colors\">\n                    <div className=\"flex items-center gap-4\">\n                      <div className=\"h-10 w-10 rounded-full bg-primary/10 grid place-items-center text-primary font-bold\">\n                        #{1000 + i}\n                      </div>\n                      <div>\n                        <div className=\"font-medium\">Order #{1000 + i}</div>\n                        <div className=\"text-sm text-muted-foreground\">2 items  $125.00</div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-4\">\n                      <div className=\"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700\">\n                        Paid\n                      </div>\n                      <Button variant=\"outline\" size=\"sm\">View</Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </main>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":5083,"size_tokens":null},"client/src/components/layout/Navbar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { Search, ShoppingCart, User, Menu, X, LayoutDashboard, LogOut, MapPin, CreditCard, Package } from \"lucide-react\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\nimport { Input } from \"@/components/ui/input\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { api, getAccessToken, clearTokens } from \"@/lib/api\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\ninterface AuthUser {\n  id: string;\n  name: string;\n  email: string;\n  userType: 'customer' | 'vendor' | 'admin' | 'super_admin';\n}\n\nexport default function Navbar() {\n  const [location, setLocation] = useLocation();\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [user, setUser] = useState<AuthUser | null>(null);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [showSuggestions, setShowSuggestions] = useState(false);\n\n  const { data: products } = useQuery({\n    queryKey: ['products'],\n    queryFn: () => api.products.getAll(),\n    staleTime: 5 * 60 * 1000,\n  });\n\n  const isLoggedIn = !!user;\n\n  const { data: cartItems } = useQuery({\n    queryKey: ['cart'],\n    queryFn: api.cart.get,\n    enabled: isLoggedIn,\n  });\n\n  const cartCount = cartItems?.reduce((sum, item) => sum + item.quantity, 0) || 0;\n\n  const searchSuggestions = useMemo(() => {\n    if (!products || !searchTerm.trim() || searchTerm.length < 2) return [];\n    const term = searchTerm.toLowerCase();\n    return products\n      .filter(p => \n        p.name.toLowerCase().includes(term) ||\n        p.sku?.toLowerCase().includes(term) ||\n        p.make?.toLowerCase().includes(term)\n      )\n      .slice(0, 5);\n  }, [products, searchTerm]);\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (searchTerm.trim()) {\n      setLocation(`/products?search=${encodeURIComponent(searchTerm)}`);\n      setShowSuggestions(false);\n    }\n  };\n  \n  // Check localStorage for auth state on mount and when location changes\n  useEffect(() => {\n    const checkAuth = () => {\n      const storedUser = localStorage.getItem('user');\n      const token = getAccessToken();\n      if (storedUser && token) {\n        try {\n          setUser(JSON.parse(storedUser));\n        } catch {\n          setUser(null);\n        }\n      } else {\n        setUser(null);\n      }\n    };\n    \n    checkAuth();\n    \n    // Listen for storage changes (e.g., login/logout in another tab)\n    window.addEventListener('storage', checkAuth);\n    return () => window.removeEventListener('storage', checkAuth);\n  }, [location]);\n\n  const handleLogout = async () => {\n    try {\n      await api.auth.logout();\n    } catch (e) {\n      // Ignore errors\n    }\n    clearTokens();\n    setUser(null);\n    setLocation('/');\n  };\n  \n  const isVendor = user?.userType === 'vendor';\n\n  // New darker Green theme matching Figma\n  const NAV_BG = \"bg-white\"; \n  const TOP_BAR_BG = \"bg-[#3D4736]\"; // Dark Green\n  const BUTTON_ORANGE = \"bg-[#D97706]\"; // Orange\n\n  const navLinks = [\n    { href: \"/products?cat=core\", label: \"Core Systems\" },\n    { href: \"/products?cat=armor\", label: \"Armor Systems\" },\n    { href: \"/products?cat=comms\", label: \"Comms & Control\" },\n    { href: \"/products?cat=climate\", label: \"Climate & Interior\" },\n    { href: \"/products?cat=exterior\", label: \"Exterior & Utility\" },\n    { href: \"/products?cat=oem\", label: \"OEM / Custom Support\" },\n    { href: \"/products?cat=chassis\", label: \"Chassis & Platforms\" },\n    { href: \"/products?cat=sourcing\", label: \"OEM Sourcing\" },\n    { href: \"/products?cat=tactical\", label: \"Tactical Hardware\" },\n  ];\n\n  return (\n    <div className=\"flex flex-col sticky top-0 z-50\">\n      {/* Top Header - White */}\n      <div className=\"bg-white border-b py-3\">\n        <div className=\"container mx-auto px-4 flex items-center justify-between gap-4\">\n          {/* Logo */}\n          <Link href=\"/\" className=\"flex items-center gap-2\">\n            <div className=\"flex flex-col leading-none\">\n              <span className=\"text-2xl font-display font-bold text-[#3D4736] tracking-tighter\">\n                ARMOREDMART\n              </span>\n              <span className=\"text-[0.5rem] tracking-wide text-slate-500 uppercase\">\n                The World's First Compliance Integrated Defence E-Store\n              </span>\n            </div>\n          </Link>\n\n          {/* Search Bar */}\n          <form onSubmit={handleSearch} className=\"hidden lg:flex flex-1 max-w-xl mx-8 relative\">\n            <Input\n              type=\"search\"\n              placeholder=\"Search Products\"\n              value={searchTerm}\n              onChange={(e) => {\n                setSearchTerm(e.target.value);\n                setShowSuggestions(true);\n              }}\n              onFocus={() => setShowSuggestions(true)}\n              onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}\n              className=\"w-full h-10 border-slate-300 rounded-none focus-visible:ring-0 focus-visible:border-[#D97706]\"\n              data-testid=\"input-navbar-search\"\n            />\n            <Button type=\"submit\" className={`${BUTTON_ORANGE} hover:bg-orange-700 text-white rounded-none h-10 px-4`}>\n              <Search className=\"h-4 w-4\" />\n            </Button>\n            \n            {showSuggestions && searchSuggestions.length > 0 && (\n              <div className=\"absolute top-full left-0 right-0 bg-white border border-slate-200 shadow-lg z-50 max-h-80 overflow-y-auto\">\n                {searchSuggestions.map((product) => (\n                  <Link \n                    key={product.id} \n                    href={`/products/${product.id}`}\n                    onClick={() => {\n                      setShowSuggestions(false);\n                      setSearchTerm(\"\");\n                    }}\n                  >\n                    <div \n                      className=\"flex items-center gap-3 p-3 hover:bg-slate-50 cursor-pointer border-b border-slate-100\"\n                      data-testid={`navbar-suggestion-${product.id}`}\n                    >\n                      <img src={product.image} alt=\"\" className=\"w-12 h-12 object-contain bg-slate-100 p-1\" />\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"text-sm font-medium text-slate-800 truncate\">{product.name}</div>\n                        <div className=\"text-xs text-slate-500\">{product.make}  {product.model}</div>\n                      </div>\n                      {isLoggedIn ? (\n                        <div className=\"text-sm font-bold text-[#D97706]\">AED {parseFloat(product.price).toLocaleString()}</div>\n                      ) : (\n                        <div className=\"text-xs text-slate-400 italic\">Login for price</div>\n                      )}\n                    </div>\n                  </Link>\n                ))}\n                <Link \n                  href={`/products?search=${encodeURIComponent(searchTerm)}`}\n                  onClick={() => setShowSuggestions(false)}\n                >\n                  <div className=\"p-3 text-center text-sm text-[#D97706] font-medium hover:bg-slate-50 cursor-pointer\">\n                    View all results for \"{searchTerm}\"\n                  </div>\n                </Link>\n              </div>\n            )}\n          </form>\n\n          {/* Right Actions */}\n          <div className=\"flex items-center gap-3\">\n            <div className=\"hidden md:flex items-center gap-2 border border-slate-300 px-2 py-1 rounded-sm text-xs font-bold text-slate-700\">\n              <img src=\"https://flagcdn.com/w20/ae.png\" className=\"w-5 h-3\" alt=\"UAE\" />\n              <span>EN</span>\n            </div>\n\n            {isVendor && (\n              <Link href=\"/seller/dashboard\">\n                <Button className={`${TOP_BAR_BG} text-white hover:bg-[#2A3324] font-bold text-xs uppercase h-9 rounded-full px-6`}>\n                  Supplier Zone\n                </Button>\n              </Link>\n            )}\n            \n            {isLoggedIn ? (\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button className={`${BUTTON_ORANGE} text-white hover:bg-orange-700 font-bold text-xs uppercase h-9 rounded-full px-6`}>\n                    <User className=\"h-4 w-4 mr-2\" />\n                    {user?.name?.split(' ')[0] || \"Account\"}\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-48\">\n                  <DropdownMenuItem asChild>\n                    <Link href=\"/account/profile\" className=\"cursor-pointer\">\n                      <User className=\"h-4 w-4 mr-2\" />\n                      My Profile\n                    </Link>\n                  </DropdownMenuItem>\n                  <DropdownMenuItem asChild>\n                    <Link href=\"/account/profile?section=orders\" className=\"cursor-pointer\">\n                      <Package className=\"h-4 w-4 mr-2\" />\n                      Orders\n                    </Link>\n                  </DropdownMenuItem>\n                  <DropdownMenuItem asChild>\n                    <Link href=\"/account/profile?section=addresses\" className=\"cursor-pointer\">\n                      <MapPin className=\"h-4 w-4 mr-2\" />\n                      Addresses\n                    </Link>\n                  </DropdownMenuItem>\n                  <DropdownMenuItem asChild>\n                    <Link href=\"/account/profile?section=payments\" className=\"cursor-pointer\">\n                      <CreditCard className=\"h-4 w-4 mr-2\" />\n                      Saved Payments\n                    </Link>\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={handleLogout} className=\"cursor-pointer text-red-600\">\n                    <LogOut className=\"h-4 w-4 mr-2\" />\n                    Logout\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            ) : (\n              <Link href=\"/auth/login\">\n                <Button className={`${BUTTON_ORANGE} text-white hover:bg-orange-700 font-bold text-xs uppercase h-9 rounded-full px-6`}>\n                  Login\n                </Button>\n              </Link>\n            )}\n\n            <Link href=\"/cart\">\n              <Button variant=\"ghost\" size=\"icon\" className=\"relative text-slate-600 hover:text-[#D97706]\">\n                <ShoppingCart className=\"h-5 w-5\" />\n                {cartCount > 0 && (\n                  <span className=\"absolute -top-1 -right-1 bg-[#D97706] text-white text-[10px] w-4 h-4 rounded-full grid place-items-center font-bold\">\n                    {cartCount > 99 ? '99+' : cartCount}\n                  </span>\n                )}\n              </Button>\n            </Link>\n\n            {/* Mobile Menu Trigger */}\n            <Sheet open={isMenuOpen} onOpenChange={setIsMenuOpen}>\n              <SheetTrigger asChild>\n                <Button variant=\"ghost\" size=\"icon\" className=\"lg:hidden text-slate-600\">\n                  <Menu className=\"h-6 w-6\" />\n                </Button>\n              </SheetTrigger>\n              <SheetContent side=\"left\" className=\"w-[300px] sm:w-[400px]\">\n                <div className=\"flex flex-col gap-6 mt-6\">\n                  <div className=\"flex flex-col gap-2\">\n                    {navLinks.map((link) => (\n                      <Link key={link.href} href={link.href} onClick={() => setIsMenuOpen(false)}>\n                        <span className=\"text-sm font-medium py-2 block border-b border-slate-100 text-slate-700\">\n                          {link.label}\n                        </span>\n                      </Link>\n                    ))}\n                  </div>\n                </div>\n              </SheetContent>\n            </Sheet>\n          </div>\n        </div>\n      </div>\n\n      {/* Bottom Nav - Dark Green */}\n      <div className={`${TOP_BAR_BG} text-white hidden lg:block`}>\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex items-center justify-between text-[10px] font-medium tracking-wide\">\n            <div className=\"py-2.5 px-3 bg-[#D97706] cursor-pointer\">\n              <Menu className=\"h-3 w-3\" />\n            </div>\n            {navLinks.map((link) => (\n              <Link key={link.href} href={link.href}>\n                <span className=\"hover:text-[#D97706] transition-colors py-2.5 cursor-pointer uppercase truncate px-2\">\n                  {link.label}\n                </span>\n              </Link>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":12706,"size_tokens":null},"client/src/components/ui/kbd.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Kbd({ className, ...props }: React.ComponentProps<\"kbd\">) {\n  return (\n    <kbd\n      data-slot=\"kbd\"\n      className={cn(\n        \"bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 select-none items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium\",\n        \"[&_svg:not([class*='size-'])]:size-3\",\n        \"[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction KbdGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <kbd\n      data-slot=\"kbd-group\"\n      className={cn(\"inline-flex items-center gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Kbd, KbdGroup }\n","path":null,"size_bytes":862,"size_tokens":null},"client/src/pages/product-details.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"@/components/ui/accordion\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport ProductImage from \"@/components/ui/product-image\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { useRoute, Link, useLocation } from \"wouter\";\nimport { \n  ShoppingCart, Heart, Truck, Shield, RotateCcw, \n  Star, Share2, Award, CheckCircle2,\n  AlertCircle, Lock, Loader2\n} from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function ProductDetailsPage() {\n  const [, params] = useRoute(\"/products/:id\");\n  const [, setLocation] = useLocation();\n  const id = params ? parseInt(params.id) : 0;\n  const [activeImage, setActiveImage] = useState<string | null>(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n\n  useEffect(() => {\n    const token = localStorage.getItem('auth_token');\n    setIsAuthenticated(!!token);\n  }, []);\n\n  const { data: product, isLoading } = useQuery({\n    queryKey: ['product', id],\n    queryFn: () => api.products.getById(id)\n  });\n\n  const { data: similarProducts } = useQuery({\n    queryKey: ['similar', id],\n    queryFn: () => api.products.getSimilar(id),\n    enabled: !!id\n  });\n\n  const { data: recommendedProducts } = useQuery({\n    queryKey: ['recommended', id],\n    queryFn: () => api.products.getRecommended(id),\n    enabled: !!id\n  });\n\n  const addToCartMutation = useMutation({\n    mutationFn: (productId: number) => api.cart.add(productId, 1),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['cart'] });\n      toast({\n        title: \"Added to cart!\",\n        description: \"Product has been added to your cart.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Please log in to add items to cart.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleAddToCart = () => {\n    if (!isAuthenticated) {\n      toast({\n        title: \"Please log in\",\n        description: \"You need to be logged in to add items to cart.\",\n      });\n      setLocation('/auth/login');\n      return;\n    }\n    addToCartMutation.mutate(id);\n  };\n\n  const handleAddToWishlist = () => {\n    if (!isAuthenticated) {\n      toast({\n        title: \"Please log in\",\n        description: \"You need to be logged in to add items to wishlist.\",\n      });\n      setLocation('/auth/login');\n      return;\n    }\n    const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');\n    if (wishlist.includes(id)) {\n      toast({\n        title: \"Already in wishlist\",\n        description: \"This product is already in your wishlist.\",\n      });\n      return;\n    }\n    wishlist.push(id);\n    localStorage.setItem('wishlist', JSON.stringify(wishlist));\n    toast({\n      title: \"Added to wishlist!\",\n      description: \"Product has been added to your wishlist.\",\n    });\n  };\n\n  if (isLoading || !product) {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-20 text-center\">\n          <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-orange-600\" />\n          <p className=\"mt-4 text-slate-500\">Loading product details...</p>\n        </div>\n      </Layout>\n    );\n  }\n\n  const currentImage = activeImage || product.image;\n  const specifications = product.specifications ? JSON.parse(product.specifications) : null;\n  const vehicleFitment = product.vehicleFitment ? JSON.parse(product.vehicleFitment) : null;\n  const warranty = product.warranty ? JSON.parse(product.warranty) : null;\n\n  const renderStars = (rating: number = 0) => (\n    <div className=\"flex text-yellow-400\">\n      {[1, 2, 3, 4, 5].map((star) => (\n        <Star \n          key={star} \n          className={`h-4 w-4 ${star <= Math.round(rating) ? \"fill-current\" : \"text-muted-foreground/20\"}`} \n        />\n      ))}\n    </div>\n  );\n\n  return (\n    <Layout>\n      <div className=\"bg-slate-50 py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-8\">\n            \n            <div className=\"lg:col-span-5 space-y-4\">\n              <div className=\"aspect-[4/3] bg-white rounded-lg overflow-hidden border shadow-sm relative group\">\n                <ProductImage \n                  src={currentImage} \n                  alt={product.name} \n                  className=\"w-full h-full object-contain p-4\"\n                  placeholderClassName=\"w-full h-full\"\n                />\n                <Button size=\"icon\" variant=\"secondary\" className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                  <Share2 className=\"h-4 w-4\" />\n                </Button>\n              </div>\n              \n              <div className=\"grid grid-cols-4 gap-3\">\n                <div \n                  className={`aspect-square bg-white rounded-md cursor-pointer border-2 overflow-hidden ${currentImage === product.image ? \"border-primary\" : \"border-transparent\"}`}\n                  onClick={() => setActiveImage(product.image)}\n                >\n                  <ProductImage src={product.image} className=\"w-full h-full object-cover\" alt=\"Main\" placeholderClassName=\"w-full h-full\" />\n                </div>\n                {product.gallery?.map((img, idx) => (\n                  <div \n                    key={idx} \n                    className={`aspect-square bg-white rounded-md cursor-pointer border-2 overflow-hidden ${currentImage === img ? \"border-primary\" : \"border-transparent\"}`}\n                    onClick={() => setActiveImage(img)}\n                  >\n                    <ProductImage src={img} className=\"w-full h-full object-cover\" alt={`Gallery ${idx}`} placeholderClassName=\"w-full h-full\" />\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"lg:col-span-4 space-y-6\">\n              <div>\n                <div className=\"flex items-center gap-2 mb-2 text-sm text-muted-foreground\">\n                  <span className=\"font-semibold text-primary\">{product.make}</span>\n                  <span></span>\n                  <span>SKU: {product.sku}</span>\n                </div>\n                \n                <h1 className=\"text-2xl font-display font-bold mb-2 leading-tight text-slate-900\">{product.name}</h1>\n                \n                <div className=\"flex items-center gap-2 mb-4\">\n                  {renderStars(parseFloat(product.rating || \"0\"))}\n                  <span className=\"text-sm text-muted-foreground underline cursor-pointer\">\n                    {product.reviewCount || 0} reviews\n                  </span>\n                </div>\n\n                <div className=\"flex flex-wrap gap-2 mb-4\">\n                  <Badge variant=\"outline\" className=\"text-xs\">{product.condition.toUpperCase()}</Badge>\n                  <Badge variant=\"secondary\" className=\"text-xs\">\n                    {product.stock > 0 ? \"In Stock\" : \"Out of Stock\"}\n                  </Badge>\n                  {product.stock < 5 && product.stock > 0 && (\n                    <Badge variant=\"destructive\" className=\"text-xs\">Low Stock</Badge>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"p-4 bg-white rounded-lg border space-y-4\">\n                {isAuthenticated ? (\n                  <div className=\"flex items-baseline gap-3\">\n                    <span className=\"text-3xl font-bold text-slate-900\">AED {parseFloat(product.price).toLocaleString()}</span>\n                    {product.originalPrice && (\n                      <span className=\"text-lg text-muted-foreground line-through\">AED {parseFloat(product.originalPrice).toLocaleString()}</span>\n                    )}\n                  </div>\n                ) : (\n                  <div className=\"flex items-center gap-2 text-slate-500\">\n                    <Lock className=\"h-4 w-4\" />\n                    <span className=\"text-lg font-medium\">Login to see price</span>\n                  </div>\n                )}\n\n                <Separator />\n                \n                <div className=\"space-y-3 text-sm\">\n                  <div className=\"flex items-center gap-3 text-slate-700\">\n                    <Truck className=\"h-4 w-4 text-green-600\" />\n                    <span>Free shipping on orders over AED 500</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 text-slate-700\">\n                    <Shield className=\"h-4 w-4 text-green-600\" />\n                    <span>Warranty Included</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 text-slate-700\">\n                    <RotateCcw className=\"h-4 w-4 text-green-600\" />\n                    <span>30-Day Return Policy</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex flex-col gap-3\">\n                {isAuthenticated ? (\n                  <Button \n                    size=\"lg\" \n                    className=\"w-full font-bold h-12 text-base shadow-lg shadow-primary/20 bg-orange-600 hover:bg-orange-700\"\n                    onClick={handleAddToCart}\n                    disabled={addToCartMutation.isPending || product.stock === 0}\n                    data-testid=\"button-add-to-cart\"\n                  >\n                    {addToCartMutation.isPending ? (\n                      <Loader2 className=\"h-5 w-5 animate-spin mr-2\" />\n                    ) : (\n                      <ShoppingCart className=\"h-5 w-5 mr-2\" />\n                    )}\n                    Add to Cart\n                  </Button>\n                ) : (\n                  <Link href=\"/auth/login\">\n                    <Button \n                      size=\"lg\" \n                      className=\"w-full font-bold h-12 text-base shadow-lg shadow-primary/20 bg-orange-600 hover:bg-orange-700\"\n                      data-testid=\"button-login-to-buy\"\n                    >\n                      <Lock className=\"h-5 w-5 mr-2\" />\n                      Login to Purchase\n                    </Button>\n                  </Link>\n                )}\n                <Button variant=\"ghost\" size=\"sm\" className=\"w-full text-muted-foreground\" onClick={handleAddToWishlist}>\n                  <Heart className=\"h-4 w-4 mr-2\" /> Add to Wishlist\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"lg:col-span-3 space-y-6\">\n              <div className=\"bg-white p-5 rounded-lg border shadow-sm\">\n                <h3 className=\"font-display font-bold text-sm uppercase tracking-wider text-muted-foreground mb-4\">Sold By</h3>\n                <div className=\"flex items-center gap-3 mb-4\">\n                  <div className=\"w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center font-bold text-slate-500\">\n                    {product.make.substring(0, 2).toUpperCase()}\n                  </div>\n                  <div>\n                    <div className=\"font-bold text-slate-900\">{product.make}</div>\n                    <div className=\"text-xs text-green-600 flex items-center gap-1\">\n                      <CheckCircle2 className=\"h-3 w-3\" /> Verified Seller\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"space-y-2 text-sm text-slate-600 mb-4\">\n                  <div className=\"flex justify-between\">\n                    <span>Vehicle</span>\n                    <span className=\"font-medium\">{product.make} {product.model} {product.year}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Condition</span>\n                    <span className=\"font-medium capitalize\">{product.condition}</span>\n                  </div>\n                </div>\n\n                <Button variant=\"outline\" className=\"w-full text-xs h-8\">\n                  View Storefront\n                </Button>\n              </div>\n\n              <div className=\"bg-slate-100 p-4 rounded-lg border border-slate-200 text-xs text-slate-600 space-y-2\">\n                <div className=\"flex items-center gap-2 font-semibold text-slate-800\">\n                  <Shield className=\"h-4 w-4\" /> Secure Transaction\n                </div>\n                <p>Your transaction is secure. We work hard to protect your security and privacy.</p>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n\n      <div className=\"container mx-auto px-4 py-12\">\n        <Tabs defaultValue=\"details\" className=\"w-full\">\n          <TabsList className=\"w-full justify-start border-b rounded-none h-auto p-0 bg-transparent gap-6 overflow-x-auto\">\n            <TabsTrigger value=\"details\" className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none py-3 px-1 font-bold text-base\">Product Details</TabsTrigger>\n            <TabsTrigger value=\"fitment\" className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none py-3 px-1 font-bold text-base\">Vehicle Fitment</TabsTrigger>\n            <TabsTrigger value=\"specs\" className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none py-3 px-1 font-bold text-base\">Specifications</TabsTrigger>\n            <TabsTrigger value=\"warranty\" className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none py-3 px-1 font-bold text-base\">Warranty</TabsTrigger>\n          </TabsList>\n\n          <div className=\"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-12\">\n            <div className=\"lg:col-span-2\">\n              \n              <TabsContent value=\"details\" className=\"m-0 space-y-8 animate-in fade-in duration-300\">\n                <div>\n                  <h3 className=\"text-lg font-bold font-display mb-4\">Description</h3>\n                  <p className=\"text-slate-600 leading-relaxed\">{product.description}</p>\n                </div>\n                \n                {product.features && product.features.length > 0 && (\n                  <div>\n                    <h3 className=\"text-lg font-bold font-display mb-4\">Key Features</h3>\n                    <ul className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                      {product.features.map((feature, i) => (\n                        <li key={i} className=\"flex items-start gap-2 text-slate-700 text-sm\">\n                          <CheckCircle2 className=\"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0\" />\n                          <span>{feature}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n              </TabsContent>\n\n              <TabsContent value=\"fitment\" className=\"m-0 animate-in fade-in duration-300\">\n                <div className=\"bg-white border rounded-lg overflow-hidden\">\n                  <div className=\"bg-slate-50 p-4 border-b\">\n                    <h3 className=\"font-bold text-slate-800\">Compatible Vehicles</h3>\n                    <p className=\"text-xs text-muted-foreground mt-1\">Please verify fitment with your specific VIN if unsure.</p>\n                  </div>\n                  {vehicleFitment ? (\n                    <Accordion type=\"single\" collapsible className=\"w-full\">\n                      {Object.entries(vehicleFitment).map(([make, models]) => (\n                        <AccordionItem key={make} value={make} className=\"border-b-0 px-4\">\n                          <AccordionTrigger className=\"hover:no-underline py-4\">\n                            <span className=\"font-semibold\">{make}</span>\n                          </AccordionTrigger>\n                          <AccordionContent>\n                            <ul className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 pb-4 pl-4\">\n                              {(models as string[]).map((model, mIdx) => (\n                                <li key={mIdx} className=\"text-sm text-slate-600 flex items-center gap-2\">\n                                  <div className=\"w-1.5 h-1.5 bg-slate-300 rounded-full\" />\n                                  {model}\n                                </li>\n                              ))}\n                            </ul>\n                          </AccordionContent>\n                        </AccordionItem>\n                      ))}\n                    </Accordion>\n                  ) : (\n                    <div className=\"p-8 text-center text-muted-foreground\">\n                      <AlertCircle className=\"h-8 w-8 mx-auto mb-2 opacity-20\" />\n                      <p>Universal Fitment - Compatible with {product.make} {product.model} {product.year}</p>\n                    </div>\n                  )}\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"specs\" className=\"m-0 animate-in fade-in duration-300\">\n                <div className=\"bg-white border rounded-lg overflow-hidden\">\n                  <table className=\"w-full text-sm text-left\">\n                    <tbody className=\"divide-y\">\n                      {specifications ? (\n                        Object.entries(specifications).map(([key, value], idx) => (\n                          <tr key={key} className={idx % 2 === 0 ? \"bg-slate-50/50\" : \"bg-white\"}>\n                            <td className=\"px-6 py-4 font-medium text-slate-600 w-1/3\">{key}</td>\n                            <td className=\"px-6 py-4 text-slate-900\">{value as string}</td>\n                          </tr>\n                        ))\n                      ) : (\n                        <tr>\n                          <td className=\"px-6 py-8 text-center text-muted-foreground\" colSpan={2}>\n                            No detailed specifications available.\n                          </td>\n                        </tr>\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"warranty\" className=\"m-0 animate-in fade-in duration-300\">\n                <div className=\"bg-white border rounded-lg p-6 space-y-6\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-12 h-12 bg-blue-50 text-blue-600 rounded-lg flex items-center justify-center\">\n                      <Award className=\"h-6 w-6\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-bold text-lg\">Warranty Coverage</h3>\n                      <p className=\"text-primary font-medium\">{warranty?.period || \"Standard Manufacturer Warranty\"}</p>\n                    </div>\n                  </div>\n                </div>\n              </TabsContent>\n\n            </div>\n\n            <div className=\"lg:col-span-1 space-y-8\">\n              <div>\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"font-bold font-display text-sm uppercase tracking-wider\">Similar Items</h3>\n                  <Link href=\"/products\" className=\"text-xs text-primary hover:underline\">View All</Link>\n                </div>\n                <div className=\"space-y-4\">\n                  {similarProducts?.slice(0, 3).map((item) => (\n                    <Link key={item.id} href={`/products/${item.id}`}>\n                      <div className=\"group flex gap-3 cursor-pointer\">\n                        <div className=\"w-16 h-16 bg-white border rounded-md overflow-hidden flex-shrink-0\">\n                          <ProductImage src={item.image} className=\"w-full h-full object-cover group-hover:scale-105 transition-transform\" alt={item.name} placeholderClassName=\"w-full h-full\" />\n                        </div>\n                        <div>\n                          <h4 className=\"text-sm font-medium line-clamp-2 group-hover:text-primary transition-colors\">{item.name}</h4>\n                          <div className=\"text-xs text-muted-foreground mt-1\">{item.make}</div>\n                          <div className=\"font-bold text-sm mt-1\">AED {parseFloat(item.price).toLocaleString()}</div>\n                        </div>\n                      </div>\n                    </Link>\n                  ))}\n                </div>\n              </div>\n\n              <Separator />\n\n              <div>\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"font-bold font-display text-sm uppercase tracking-wider\">Recommended</h3>\n                </div>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {recommendedProducts?.slice(0, 4).map((item) => (\n                    <Link key={item.id} href={`/products/${item.id}`}>\n                      <div className=\"group cursor-pointer\">\n                        <div className=\"aspect-square bg-white border rounded-md overflow-hidden mb-2\">\n                          <ProductImage src={item.image} className=\"w-full h-full object-cover group-hover:scale-105 transition-transform\" alt={item.name} placeholderClassName=\"w-full h-full\" />\n                        </div>\n                        <h4 className=\"text-xs font-medium line-clamp-2 group-hover:text-primary transition-colors\">{item.name}</h4>\n                      </div>\n                    </Link>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </Tabs>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":22003,"size_tokens":null},"shared/schema.ts":{"content":"import { sql, relations } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, decimal, boolean, timestamp, pgEnum } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema, createSelectSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Enums\nexport const userTypeEnum = pgEnum('user_type', ['customer', 'vendor', 'admin', 'super_admin']);\nexport const productConditionEnum = pgEnum('product_condition', ['new', 'used', 'refurbished']);\nexport const orderStatusEnum = pgEnum('order_status', ['pending', 'processing', 'shipped', 'delivered', 'cancelled', 'returned']);\nexport const refundStatusEnum = pgEnum('refund_status', ['processing', 'completed', 'failed']);\n\n// Users table\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  email: text(\"email\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  userType: userTypeEnum(\"user_type\").notNull().default('customer'),\n  avatar: text(\"avatar\"),\n  completionPercentage: integer(\"completion_percentage\").default(0),\n  tokenVersion: integer(\"token_version\").default(0),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Categories table\nexport const categories = pgTable(\"categories\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  name: text(\"name\").notNull(),\n  image: text(\"image\").notNull(),\n  description: text(\"description\"),\n});\n\n// Products table\nexport const products = pgTable(\"products\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  name: text(\"name\").notNull(),\n  sku: text(\"sku\").notNull().unique(),\n  price: decimal(\"price\", { precision: 10, scale: 2 }).notNull(),\n  originalPrice: decimal(\"original_price\", { precision: 10, scale: 2 }),\n  image: text(\"image\").notNull(),\n  gallery: text(\"gallery\").array(),\n  categoryId: integer(\"category_id\").references(() => categories.id),\n  department: text(\"department\"),\n  description: text(\"description\").notNull(),\n  condition: productConditionEnum(\"condition\").notNull().default('new'),\n  stock: integer(\"stock\").notNull().default(0),\n  vendorId: varchar(\"vendor_id\").references(() => users.id),\n  make: text(\"make\").notNull(),\n  model: text(\"model\").notNull(),\n  year: integer(\"year\").notNull(),\n  rating: decimal(\"rating\", { precision: 2, scale: 1 }),\n  reviewCount: integer(\"review_count\").default(0),\n  features: text(\"features\").array(),\n  specifications: text(\"specifications\"), // JSON string\n  vehicleFitment: text(\"vehicle_fitment\"), // JSON string\n  warranty: text(\"warranty\"), // JSON string\n  actionType: text(\"action_type\").default('buy_now'), // 'buy_now' | 'inquiry'\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Reviews table\nexport const reviews = pgTable(\"reviews\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  productId: integer(\"product_id\").notNull().references(() => products.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  rating: integer(\"rating\").notNull(),\n  comment: text(\"comment\").notNull(),\n  verifiedPurchase: boolean(\"verified_purchase\").default(false),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Cart items table\nexport const cartItems = pgTable(\"cart_items\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  productId: integer(\"product_id\").notNull().references(() => products.id),\n  quantity: integer(\"quantity\").notNull().default(1),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Orders table\nexport const orders = pgTable(\"orders\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  status: orderStatusEnum(\"status\").notNull().default('pending'),\n  total: decimal(\"total\", { precision: 10, scale: 2 }).notNull(),\n  trackingNumber: text(\"tracking_number\"),\n  estimatedDelivery: text(\"estimated_delivery\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Order items table\nexport const orderItems = pgTable(\"order_items\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  orderId: varchar(\"order_id\").notNull().references(() => orders.id),\n  productId: integer(\"product_id\").notNull().references(() => products.id),\n  name: text(\"name\").notNull(),\n  image: text(\"image\").notNull(),\n  price: decimal(\"price\", { precision: 10, scale: 2 }).notNull(),\n  quantity: integer(\"quantity\").notNull(),\n});\n\n// Refunds table\nexport const refunds = pgTable(\"refunds\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  orderId: varchar(\"order_id\").notNull().references(() => orders.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  status: refundStatusEnum(\"status\").notNull().default('processing'),\n  amount: decimal(\"amount\", { precision: 10, scale: 2 }).notNull(),\n  paymentMethod: text(\"payment_method\").notNull().default('Tamara'),\n  triggerDate: timestamp(\"trigger_date\").notNull().defaultNow(),\n  estimatedCreditDate: timestamp(\"estimated_credit_date\"),\n  completedAt: timestamp(\"completed_at\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Refund items table\nexport const refundItems = pgTable(\"refund_items\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  refundId: varchar(\"refund_id\").notNull().references(() => refunds.id),\n  productId: integer(\"product_id\").notNull().references(() => products.id),\n  name: text(\"name\").notNull(),\n  image: text(\"image\").notNull(),\n  price: decimal(\"price\", { precision: 10, scale: 2 }).notNull(),\n  quantity: integer(\"quantity\").notNull(),\n});\n\n// Address type enum\nexport const addressTypeEnum = pgEnum('address_type', ['home', 'work', 'other']);\n\n// User addresses table\nexport const addresses = pgTable(\"addresses\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  label: text(\"label\").notNull(), // e.g., \"Home\", \"Office\", \"Warehouse\"\n  addressType: addressTypeEnum(\"address_type\").notNull().default('home'),\n  fullName: text(\"full_name\").notNull(),\n  phone: text(\"phone\").notNull(),\n  addressLine1: text(\"address_line_1\").notNull(),\n  addressLine2: text(\"address_line_2\"),\n  city: text(\"city\").notNull(),\n  state: text(\"state\").notNull(),\n  postalCode: text(\"postal_code\").notNull(),\n  country: text(\"country\").notNull(), // ISO country code\n  isDefault: boolean(\"is_default\").default(false),\n  isVerified: boolean(\"is_verified\").default(false),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Payment method type enum (regulatory compliant - no raw card data stored)\nexport const paymentMethodTypeEnum = pgEnum('payment_method_type', ['card', 'bank_account', 'upi', 'wallet']);\n\n// Saved payment methods table (PCI-DSS, RBI, UAE Central Bank compliant)\n// Only stores tokenized references from payment processors, never raw card numbers\nexport const savedPaymentMethods = pgTable(\"saved_payment_methods\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  paymentMethodType: paymentMethodTypeEnum(\"payment_method_type\").notNull(),\n  // For cards: last 4 digits only (PCI-DSS compliant)\n  lastFourDigits: text(\"last_four_digits\"),\n  // Card brand (visa, mastercard, amex, etc.)\n  cardBrand: text(\"card_brand\"),\n  // Expiry month/year (for display only, actual validation done by payment processor)\n  expiryMonth: integer(\"expiry_month\"),\n  expiryYear: integer(\"expiry_year\"),\n  // Cardholder name (can be stored as per PCI-DSS)\n  cardholderName: text(\"cardholder_name\"),\n  // For bank accounts: masked account number\n  maskedAccountNumber: text(\"masked_account_number\"),\n  // Bank name\n  bankName: text(\"bank_name\"),\n  // For UPI: masked VPA (India specific - RBI compliant)\n  maskedUpiId: text(\"masked_upi_id\"),\n  // Payment processor token (Stripe payment_method ID, etc.)\n  // This is the only identifier used for transactions\n  processorToken: text(\"processor_token\").notNull(),\n  // Payment processor name (stripe, razorpay, etc.)\n  processorName: text(\"processor_name\").notNull().default('stripe'),\n  // Billing address reference\n  billingAddressId: integer(\"billing_address_id\").references(() => addresses.id),\n  // Country for regulatory compliance (affects what data we can store)\n  country: text(\"country\").notNull(), // ISO country code\n  // Is this the default payment method\n  isDefault: boolean(\"is_default\").default(false),\n  // RBI mandate: explicit consent for card-on-file storage (India)\n  hasRbiConsent: boolean(\"has_rbi_consent\").default(false),\n  // Consent timestamp (regulatory requirement)\n  consentTimestamp: timestamp(\"consent_timestamp\"),\n  // Status\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Auth sessions table for JWT session management\nexport const authSessions = pgTable(\"auth_sessions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  refreshTokenHash: text(\"refresh_token_hash\").notNull(),\n  userAgent: text(\"user_agent\"),\n  ipAddress: text(\"ip_address\"),\n  deviceLabel: text(\"device_label\"),\n  expiresAt: timestamp(\"expires_at\").notNull(),\n  lastUsedAt: timestamp(\"last_used_at\").notNull().defaultNow(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  revokedAt: timestamp(\"revoked_at\"),\n});\n\n// Relations\nexport const usersRelations = relations(users, ({ many }) => ({\n  products: many(products),\n  reviews: many(reviews),\n  cartItems: many(cartItems),\n  orders: many(orders),\n  sessions: many(authSessions),\n  addresses: many(addresses),\n  savedPaymentMethods: many(savedPaymentMethods),\n}));\n\nexport const addressesRelations = relations(addresses, ({ one, many }) => ({\n  user: one(users, {\n    fields: [addresses.userId],\n    references: [users.id],\n  }),\n  paymentMethods: many(savedPaymentMethods),\n}));\n\nexport const savedPaymentMethodsRelations = relations(savedPaymentMethods, ({ one }) => ({\n  user: one(users, {\n    fields: [savedPaymentMethods.userId],\n    references: [users.id],\n  }),\n  billingAddress: one(addresses, {\n    fields: [savedPaymentMethods.billingAddressId],\n    references: [addresses.id],\n  }),\n}));\n\nexport const authSessionsRelations = relations(authSessions, ({ one }) => ({\n  user: one(users, {\n    fields: [authSessions.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const categoriesRelations = relations(categories, ({ many }) => ({\n  products: many(products),\n}));\n\nexport const productsRelations = relations(products, ({ one, many }) => ({\n  category: one(categories, {\n    fields: [products.categoryId],\n    references: [categories.id],\n  }),\n  vendor: one(users, {\n    fields: [products.vendorId],\n    references: [users.id],\n  }),\n  reviews: many(reviews),\n  cartItems: many(cartItems),\n  orderItems: many(orderItems),\n}));\n\nexport const reviewsRelations = relations(reviews, ({ one }) => ({\n  product: one(products, {\n    fields: [reviews.productId],\n    references: [products.id],\n  }),\n  user: one(users, {\n    fields: [reviews.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const cartItemsRelations = relations(cartItems, ({ one }) => ({\n  user: one(users, {\n    fields: [cartItems.userId],\n    references: [users.id],\n  }),\n  product: one(products, {\n    fields: [cartItems.productId],\n    references: [products.id],\n  }),\n}));\n\nexport const ordersRelations = relations(orders, ({ one, many }) => ({\n  user: one(users, {\n    fields: [orders.userId],\n    references: [users.id],\n  }),\n  items: many(orderItems),\n}));\n\nexport const orderItemsRelations = relations(orderItems, ({ one }) => ({\n  order: one(orders, {\n    fields: [orderItems.orderId],\n    references: [orders.id],\n  }),\n  product: one(products, {\n    fields: [orderItems.productId],\n    references: [products.id],\n  }),\n}));\n\nexport const refundsRelations = relations(refunds, ({ one, many }) => ({\n  order: one(orders, {\n    fields: [refunds.orderId],\n    references: [orders.id],\n  }),\n  user: one(users, {\n    fields: [refunds.userId],\n    references: [users.id],\n  }),\n  items: many(refundItems),\n}));\n\nexport const refundItemsRelations = relations(refundItems, ({ one }) => ({\n  refund: one(refunds, {\n    fields: [refundItems.refundId],\n    references: [refunds.id],\n  }),\n  product: one(products, {\n    fields: [refundItems.productId],\n    references: [products.id],\n  }),\n}));\n\n// Insert Schemas\nexport const insertUserSchema = createInsertSchema(users, {\n  email: z.string().email(),\n  password: z.string().min(6),\n}).omit({\n  id: true,\n  createdAt: true,\n  completionPercentage: true,\n});\n\nexport const insertCategorySchema = createInsertSchema(categories).omit({\n  id: true,\n});\n\nexport const insertProductSchema = createInsertSchema(products).omit({\n  id: true,\n  createdAt: true,\n  rating: true,\n  reviewCount: true,\n});\n\nexport const insertReviewSchema = createInsertSchema(reviews).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertCartItemSchema = createInsertSchema(cartItems).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertOrderSchema = createInsertSchema(orders).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertOrderItemSchema = createInsertSchema(orderItems).omit({\n  id: true,\n});\n\nexport const insertAuthSessionSchema = createInsertSchema(authSessions).omit({\n  id: true,\n  lastUsedAt: true,\n  createdAt: true,\n  revokedAt: true,\n});\n\nexport const insertRefundSchema = createInsertSchema(refunds).omit({\n  id: true,\n  createdAt: true,\n  completedAt: true,\n});\n\nexport const insertRefundItemSchema = createInsertSchema(refundItems).omit({\n  id: true,\n});\n\nexport const insertAddressSchema = createInsertSchema(addresses).omit({\n  id: true,\n  createdAt: true,\n  isVerified: true,\n});\n\nexport const insertSavedPaymentMethodSchema = createInsertSchema(savedPaymentMethods).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\nexport type Category = typeof categories.$inferSelect;\nexport type InsertCategory = z.infer<typeof insertCategorySchema>;\n\nexport type Product = typeof products.$inferSelect;\nexport type InsertProduct = z.infer<typeof insertProductSchema>;\n\nexport type Review = typeof reviews.$inferSelect;\nexport type InsertReview = z.infer<typeof insertReviewSchema>;\n\nexport type CartItem = typeof cartItems.$inferSelect;\nexport type InsertCartItem = z.infer<typeof insertCartItemSchema>;\n\nexport type Order = typeof orders.$inferSelect;\nexport type InsertOrder = z.infer<typeof insertOrderSchema>;\n\nexport type OrderItem = typeof orderItems.$inferSelect;\nexport type InsertOrderItem = z.infer<typeof insertOrderItemSchema>;\n\nexport type AuthSession = typeof authSessions.$inferSelect;\nexport type InsertAuthSession = z.infer<typeof insertAuthSessionSchema>;\n\nexport type Refund = typeof refunds.$inferSelect;\nexport type InsertRefund = z.infer<typeof insertRefundSchema>;\n\nexport type RefundItem = typeof refundItems.$inferSelect;\nexport type InsertRefundItem = z.infer<typeof insertRefundItemSchema>;\n\nexport type Address = typeof addresses.$inferSelect;\nexport type InsertAddress = z.infer<typeof insertAddressSchema>;\n\nexport type SavedPaymentMethod = typeof savedPaymentMethods.$inferSelect;\nexport type InsertSavedPaymentMethod = z.infer<typeof insertSavedPaymentMethodSchema>;\n","path":null,"size_bytes":15635,"size_tokens":null},"client/src/lib/mockApi.ts":{"content":"// Mock Data and simulated API calls based on the SRS and API list\n// In a real app, these would be fetch calls to the backend\n\nexport interface Review {\n  id: number;\n  user: string;\n  rating: number;\n  date: string;\n  comment: string;\n  verifiedPurchase: boolean;\n  avatar?: string;\n}\n\nexport interface Product {\n  id: number;\n  name: string;\n  sku: string;\n  price: number | null; // Price can be null if not authenticated\n  originalPrice?: number;\n  image: string;\n  gallery?: string[];\n  category: string;\n  department?: string;\n  description: string;\n  condition: 'new' | 'used' | 'refurbished';\n  stock: number;\n  vendor: string;\n  make: string;\n  model: string;\n  year: number;\n  rating?: number;\n  reviewCount?: number;\n  attributes?: {\n    surfaceType?: string;\n    frictionalMaterial?: string;\n    abutmentClipsIncluded?: boolean;\n    brakeLubricantIncluded?: boolean;\n    [key: string]: any;\n  };\n  // New fields\n  features?: string[];\n  specifications?: Record<string, string>;\n  vehicleFitment?: Record<string, string[]>; // Brand -> Models\n  warranty?: {\n    period: string;\n    details: Record<string, string>;\n  };\n  sellerInfo?: {\n    name: string;\n    rating: number;\n    joinedDate: string;\n    responseRate: string;\n  };\n  reviews?: Review[];\n  actionType?: 'buy_now' | 'inquiry'; // For different button types\n}\n\nexport interface User {\n  id: number;\n  name: string;\n  email: string;\n  role: 'customer' | 'admin' | 'vendor_owner' | 'vendor_employee';\n  is_vendor: boolean; // Explicit flag as requested\n  avatar?: string;\n  completionPercentage?: number;\n}\n\nexport interface Order {\n  id: string;\n  date: string;\n  status: 'pending' | 'processing' | 'shipped' | 'delivered' | 'cancelled' | 'returned';\n  total: number;\n  items: {\n    productId: number;\n    name: string;\n    image: string;\n    price: number;\n    quantity: number;\n  }[];\n  trackingNumber?: string;\n  estimatedDelivery?: string;\n}\n\nexport interface Category {\n  id: number;\n  name: string;\n  image: string;\n  description: string; // Not visible in frontend\n}\n\nexport interface Slide {\n  id: number;\n  title?: string;\n  subtitle?: string;\n  buttonText: string;\n  image: string;\n  link: string;\n}\n\nexport const MOCK_SLIDES: Slide[] = [\n  {\n    id: 1,\n    title: \"DEFENCE COMMERCE, REINVENTED.\",\n    subtitle: \"Built for Security. Powered by Compliance.\",\n    buttonText: \"LEARN MORE\",\n    image: \"https://images.unsplash.com/photo-1595208823526-a322dc84f509?auto=format&fit=crop&q=80&w=1600\", // Placeholder for armored vehicle\n    link: \"/products\"\n  }\n];\n\nexport const MOCK_CATEGORIES: Category[] = [\n  { id: 1, name: \"Core Vehicle Systems\", image: \"https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?auto=format&fit=crop&q=80&w=400\", description: \"Engines, Transmission, Chassis\" },\n  { id: 2, name: \"Armor Specific Systems\", image: \"https://images.unsplash.com/photo-1599369262337-ee47696c4266?auto=format&fit=crop&q=80&w=400\", description: \"Ballistic Glass, Steel, Kevlar\" },\n  { id: 3, name: \"Communication & Control\", image: \"https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80&w=400\", description: \"Radios, GPS, ECMs\" },\n  { id: 4, name: \"Climate & Interior\", image: \"https://images.unsplash.com/photo-1560965385-a7455d311394?auto=format&fit=crop&q=80&w=400\", description: \"HVAC, Seats, Dashboards\" },\n  { id: 5, name: \"Exterior & Utility\", image: \"https://images.unsplash.com/photo-1616788494707-ec28f08d05a1?auto=format&fit=crop&q=80&w=400\", description: \"Lighting, Winches, Bumpers\" },\n  { id: 6, name: \"OEM Sourcing\", image: \"https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?auto=format&fit=crop&q=80&w=400\", description: \"Direct from Manufacturer\" }\n];\n\nexport const MOCK_PRODUCTS: Product[] = [\n  {\n    id: 1,\n    name: \"DFC - 4000 HybridDynamic Hybrid Rear Brake Pads\",\n    sku: \"WHL-RF-001\",\n    price: 679.00,\n    originalPrice: 850.00,\n    image: \"https://images.unsplash.com/photo-1611417866503-424626569738?auto=format&fit=crop&q=80&w=800\",\n    gallery: [\n      \"https://images.unsplash.com/photo-1611417866503-424626569738?auto=format&fit=crop&q=80&w=800\",\n      \"https://images.unsplash.com/photo-1600706432502-76b1e601a746?auto=format&fit=crop&q=80&w=800\",\n      \"https://images.unsplash.com/photo-1616788494707-ec28f08d05a1?auto=format&fit=crop&q=80&w=800\",\n      \"https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?auto=format&fit=crop&q=80&w=800\"\n    ],\n    category: \"Core Vehicle Systems\",\n    department: \"Wheels\",\n    description: \"Military-grade runflat inserts for combat wheels. Designed for heavier vehicles with larger brake systems, DFC Heavy-Duty Brake Pads deliver exceptional braking performance in harsh conditions. DFC Heavy-Duty brake pads are exclusively engineered and formulated to withstand extreme heat, heavy duty operation, frequent stopping, or towing.\",\n    condition: 'new',\n    stock: 50,\n    vendor: \"ArmoredMart Direct\",\n    make: \"Toyota\",\n    model: \"Land Cruiser 200\",\n    year: 2023,\n    rating: 4.5,\n    reviewCount: 3,\n    actionType: 'buy_now',\n    specifications: {\n       \"Series\": \"4000 HybridDynamic\",\n       \"Friction Material Bonding Type\": \"Integrally Molded\",\n       \"SKU #\": \"314159\",\n       \"Weight\": \"6.64lbs\",\n       \"Brake Kit Vented Type Front\": \"Vented\",\n       \"Material\": \"Iron Alloy\",\n       \"Minimum Pad Quantity\": \"4\",\n       \"Mounting Bolt Hole Quantity\": \"5\",\n       \"Outside Diameter\": \"12.2mm\",\n       \"Center Hole Diameter\": \"65.5mm\"\n    },\n    features: [\n       \"Frequent braking environments, high speed, heavy traffic, steep gradients, towing, or off-roading\",\n       \"Delivers strong, predictable friction level regardless of temperature, speed, or axle load\",\n       \"Engineered to withstand extremely high operating temperature range\",\n       \"Long pad wear, low noise, and low dust\",\n       \"100% Asbestos Free\",\n       \"100% Copper Free Eco-Friendly Formulation\"\n    ],\n    vehicleFitment: {\n       \"Genesis\": [\"2023-2025 Genesis Electrified GV70\", \"2021-2025 Genesis G80\", \"2023-2025 Genesis G90\"],\n       \"Hyundai\": [\"2020-2024 Palisade\", \"2021-2024 Santa Fe\"],\n       \"Kia\": [\"2020-2024 Telluride\"]\n    },\n    warranty: {\n       period: \"12 months/12,000 Miles Limited Warranty\",\n       details: {}\n    },\n    reviews: [\n       {\n          id: 1,\n          user: \"Omar Abdullah Al Mansoori\",\n          rating: 5,\n          date: \"Nov 23, 2024\",\n          verifiedPurchase: true,\n          comment: \"Great price, good quality, only supplier that had them except gm who wanted 183 just for the front. CAMO sent all four say no more for 350. I'm fine okay.\",\n          avatar: \"https://randomuser.me/api/portraits/men/32.jpg\"\n       },\n       {\n          id: 2,\n          user: \"Anonymous\",\n          rating: 4,\n          date: \"Oct 15, 2024\",\n          verifiedPurchase: true,\n          comment: \"Buy them now, you won't regret it day night and day, you will be shocked at the difference, absolutely shocked!!\",\n          avatar: \"https://randomuser.me/api/portraits/men/44.jpg\"\n       },\n       {\n          id: 3,\n          user: \"John Smith\",\n          rating: 5,\n          date: \"Sep 01, 2024\",\n          verifiedPurchase: true,\n          comment: \"Perfect fit for my LC200. Very happy with the performance.\",\n          avatar: \"https://randomuser.me/api/portraits/men/12.jpg\"\n       }\n    ]\n  },\n  {\n    id: 2,\n    name: \"Headlights (LED, HID, Halogen)\",\n    sku: \"LGT-TAC-002\",\n    price: 1450.00,\n    image: \"https://images.unsplash.com/photo-1552975662-72cb78d7e75b?auto=format&fit=crop&q=80&w=800\", // Tactical light placeholder\n    category: \"Exterior & Utility\",\n    department: \"Lighting\",\n    description: \"High-intensity tactical lighting for armored vehicles.\",\n    condition: 'new',\n    stock: 100,\n    vendor: \"Lumina Defense\",\n    make: \"Universal\",\n    model: \"Universal\",\n    year: 2024,\n    rating: 4.8,\n    reviewCount: 12,\n    actionType: 'buy_now'\n  },\n  {\n    id: 3,\n    name: \"Reinforced Suspension Kits\",\n    sku: \"SUS-HD-003\",\n    price: 14890.00,\n    image: \"https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?auto=format&fit=crop&q=80&w=800\",\n    category: \"Core Vehicle Systems\",\n    department: \"Suspension\",\n    description: \"Heavy-duty suspension upgrades for up-armored chassis loads.\",\n    condition: 'new',\n    stock: 15,\n    vendor: \"TrackReady Defense\",\n    make: \"Toyota\",\n    model: \"LC300\",\n    year: 2024,\n    rating: 4.9,\n    reviewCount: 5,\n    actionType: 'inquiry'\n  },\n  {\n    id: 4,\n    name: \"Turbochargers & Superchargers\",\n    sku: \"ENG-TRB-004\",\n    price: 4500.00,\n    image: \"https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?auto=format&fit=crop&q=80&w=800\",\n    category: \"Core Vehicle Systems\",\n    department: \"Engine\",\n    description: \"Performance forced induction for heavy payloads.\",\n    condition: 'new',\n    stock: 20,\n    vendor: \"PowerTrain Systems\",\n    make: \"Nissan\",\n    model: \"Patrol Y62\",\n    year: 2023,\n    rating: 4.7,\n    reviewCount: 8,\n    actionType: 'buy_now'\n  },\n  {\n    id: 5,\n    name: \"Ballistic Glass Panel B6\",\n    sku: \"ARM-GLS-005\",\n    price: 2200.00,\n    image: \"https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80&w=800\",\n    category: \"Armor Specific Systems\",\n    department: \"Glass\",\n    description: \"Certified B6 level ballistic protection glass replacement.\",\n    condition: 'new',\n    stock: 10,\n    vendor: \"ShieldGlass\",\n    make: \"Toyota\",\n    model: \"Hilux\",\n    year: 2022,\n    rating: 5.0,\n    reviewCount: 2,\n    actionType: 'inquiry'\n  },\n  {\n    id: 6,\n    name: \"Fuel Pumps, Injectors & Rails\",\n    sku: \"ENG-FUL-006\",\n    price: 850.00,\n    image: \"https://images.unsplash.com/photo-1606577924004-79d2a2971e38?auto=format&fit=crop&q=80&w=800\",\n    category: \"Core Vehicle Systems\",\n    department: \"Fuel System\",\n    description: \"High-flow fuel delivery components.\",\n    condition: 'new',\n    stock: 40,\n    vendor: \"FuelFlow\",\n    make: \"Universal\",\n    model: \"Universal\",\n    year: 2024,\n    rating: 4.6,\n    reviewCount: 15,\n    actionType: 'buy_now'\n  }\n];\n\nexport const MOCK_FILTERS = {\n  brands: [\"ArmoredMart Direct\", \"Lumina Defense\", \"TrackReady Defense\", \"PowerTrain Systems\", \"ShieldGlass\", \"FuelFlow\"],\n  departments: [\"Wheels\", \"Lighting\", \"Suspension\", \"Engine\", \"Glass\", \"Fuel System\"],\n  productTypes: [\n    { name: \"Brake Pads\", image: \"https://images.unsplash.com/photo-1600706432502-76b1e601a746?auto=format&fit=crop&q=80&w=200\" },\n    { name: \"Disc Brake Pad\", image: \"https://images.unsplash.com/photo-1616788494707-ec28f08d05a1?auto=format&fit=crop&q=80&w=200\" },\n    { name: \"Brake Rotors\", image: \"https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?auto=format&fit=crop&q=80&w=200\" },\n    { name: \"Parking Brake Shoe\", image: \"https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?auto=format&fit=crop&q=80&w=200\" }\n  ],\n  surfaceTypes: [\"Heavy Duty\", \"Tactical\", \"Standard\", \"Performance\"],\n  frictionalMaterials: [\"Ceramic\", \"Semi-Metallic\", \"Organic\", \"Steel\"]\n};\n\n// Simulated API calls matching the SRS requirements\nexport const api = {\n  // Public / Common\n  getProducts: async (filters?: any) => {\n    await new Promise(resolve => setTimeout(resolve, 500)); // Simulate latency\n    return MOCK_PRODUCTS;\n  },\n  \n  getTopSellingProducts: async () => {\n    await new Promise(resolve => setTimeout(resolve, 400));\n    // Return items for the grid part of Top Selling\n    return [MOCK_PRODUCTS[3], MOCK_PRODUCTS[5], MOCK_PRODUCTS[0], MOCK_PRODUCTS[1]];\n  },\n\n  getFeaturedProducts: async () => {\n    await new Promise(resolve => setTimeout(resolve, 400));\n    // Return items for the dark cards section\n    return [MOCK_PRODUCTS[0], MOCK_PRODUCTS[1], MOCK_PRODUCTS[2]];\n  },\n\n  getProductById: async (id: number) => {\n    await new Promise(resolve => setTimeout(resolve, 300));\n    return MOCK_PRODUCTS.find(p => p.id === id);\n  },\n  \n  getSimilarProducts: async (productId: number) => {\n    await new Promise(resolve => setTimeout(resolve, 300));\n    return MOCK_PRODUCTS.filter(p => p.id !== productId).slice(0, 3);\n  },\n\n  getRecommendedProducts: async (productId: number) => {\n    await new Promise(resolve => setTimeout(resolve, 300));\n    return MOCK_PRODUCTS.slice(3, 6);\n  },\n\n  getCategories: async () => {\n    return MOCK_CATEGORIES;\n  },\n  \n  getSlides: async () => {\n    return MOCK_SLIDES;\n  },\n\n  getFilters: async () => {\n    return MOCK_FILTERS;\n  },\n  \n  // Auth\n  login: async (email: string) => {\n    await new Promise(resolve => setTimeout(resolve, 800));\n    const isVendor = email.includes('vendor');\n    return {\n      id: 123,\n      name: \"John Martin\",\n      email: email,\n      role: isVendor ? 'vendor_owner' : 'customer',\n      is_vendor: isVendor,\n      completionPercentage: 80\n    } as User;\n  },\n  \n  // User/Cart\n  getCart: async () => {\n    return []; \n  },\n  addToCart: async (productId: number, qty: number) => {\n    return { success: true };\n  },\n  \n  // Orders\n  getOrders: async () => {\n    return [\n      { \n        id: \"AMZ-12345678-987654\", \n        date: \"2024-02-15\", \n        status: \"processing\", \n        total: 679.00, \n        trackingNumber: \"TRK123456789\",\n        estimatedDelivery: \"Today\",\n        items: [\n          { productId: 1, name: \"DFC - 4000 HybridDynamic Hybrid Rear Brake Pads\", image: \"https://images.unsplash.com/photo-1600706432502-76b1e601a746?auto=format&fit=crop&q=80&w=200\", price: 679.00, quantity: 1 }\n        ]\n      },\n      { \n        id: \"AMZ-87654321-123456\", \n        date: \"2023-11-03\", \n        status: \"delivered\", \n        total: 679.00, \n        items: [\n           { productId: 1, name: \"DFC - 4000 HybridDynamic Hybrid Rear Brake Pads\", image: \"https://images.unsplash.com/photo-1600706432502-76b1e601a746?auto=format&fit=crop&q=80&w=200\", price: 679.00, quantity: 1 }\n        ]\n      },\n      { \n        id: \"AMZ-12345678-987654\", \n        date: \"2023-11-04\", \n        status: \"cancelled\", \n        total: 475.00, \n        items: [\n          { productId: 2, name: \"Duralast 45084DL High-Performance Disc Brake Rotor\", image: \"https://images.unsplash.com/photo-1616788494707-ec28f08d05a1?auto=format&fit=crop&q=80&w=200\", price: 475.00, quantity: 1 }\n        ]\n      }\n    ] as Order[];\n  },\n  \n  // Vendor\n  getVendorStats: async () => {\n    return {\n      revenue: 45231.89,\n      orders: 2350,\n      products: 124\n    };\n  }\n};\n","path":null,"size_bytes":14377,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":724,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":792,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":768,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","path":null,"size_bytes":1828,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"import * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1237,"size_tokens":null},"client/src/components/ui/field.tsx":{"content":"\"use client\"\n\nimport { useMemo } from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction FieldSet({ className, ...props }: React.ComponentProps<\"fieldset\">) {\n  return (\n    <fieldset\n      data-slot=\"field-set\"\n      className={cn(\n        \"flex flex-col gap-6\",\n        \"has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLegend({\n  className,\n  variant = \"legend\",\n  ...props\n}: React.ComponentProps<\"legend\"> & { variant?: \"legend\" | \"label\" }) {\n  return (\n    <legend\n      data-slot=\"field-legend\"\n      data-variant={variant}\n      className={cn(\n        \"mb-3 font-medium\",\n        \"data-[variant=legend]:text-base\",\n        \"data-[variant=label]:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-group\"\n      className={cn(\n        \"group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst fieldVariants = cva(\n  \"group/field data-[invalid=true]:text-destructive flex w-full gap-3\",\n  {\n    variants: {\n      orientation: {\n        vertical: [\"flex-col [&>*]:w-full [&>.sr-only]:w-auto\"],\n        horizontal: [\n          \"flex-row items-center\",\n          \"[&>[data-slot=field-label]]:flex-auto\",\n          \"has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px has-[>[data-slot=field-content]]:items-start\",\n        ],\n        responsive: [\n          \"@md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto flex-col [&>*]:w-full [&>.sr-only]:w-auto\",\n          \"@md/field-group:[&>[data-slot=field-label]]:flex-auto\",\n          \"@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\n        ],\n      },\n    },\n    defaultVariants: {\n      orientation: \"vertical\",\n    },\n  }\n)\n\nfunction Field({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof fieldVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"field\"\n      data-orientation={orientation}\n      className={cn(fieldVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction FieldContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-content\"\n      className={cn(\n        \"group/field-content flex flex-1 flex-col gap-1.5 leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof Label>) {\n  return (\n    <Label\n      data-slot=\"field-label\"\n      className={cn(\n        \"group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50\",\n        \"has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>[data-slot=field]]:p-4\",\n        \"has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-label\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug group-data-[disabled=true]/field:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"field-description\"\n      className={cn(\n        \"text-muted-foreground text-sm font-normal leading-normal group-has-[[data-orientation=horizontal]]/field:text-balance\",\n        \"nth-last-2:-mt-1 last:mt-0 [[data-variant=legend]+&]:-mt-1.5\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldSeparator({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  children?: React.ReactNode\n}) {\n  return (\n    <div\n      data-slot=\"field-separator\"\n      data-content={!!children}\n      className={cn(\n        \"relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2\",\n        className\n      )}\n      {...props}\n    >\n      <Separator className=\"absolute inset-0 top-1/2\" />\n      {children && (\n        <span\n          className=\"bg-background text-muted-foreground relative mx-auto block w-fit px-2\"\n          data-slot=\"field-separator-content\"\n        >\n          {children}\n        </span>\n      )}\n    </div>\n  )\n}\n\nfunction FieldError({\n  className,\n  children,\n  errors,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  errors?: Array<{ message?: string } | undefined>\n}) {\n  const content = useMemo(() => {\n    if (children) {\n      return children\n    }\n\n    if (!errors) {\n      return null\n    }\n\n    if (errors?.length === 1 && errors[0]?.message) {\n      return errors[0].message\n    }\n\n    return (\n      <ul className=\"ml-4 flex list-disc flex-col gap-1\">\n        {errors.map(\n          (error, index) =>\n            error?.message && <li key={index}>{error.message}</li>\n        )}\n      </ul>\n    )\n  }, [children, errors])\n\n  if (!content) {\n    return null\n  }\n\n  return (\n    <div\n      role=\"alert\"\n      data-slot=\"field-error\"\n      className={cn(\"text-destructive text-sm font-normal\", className)}\n      {...props}\n    >\n      {content}\n    </div>\n  )\n}\n\nexport {\n  Field,\n  FieldLabel,\n  FieldDescription,\n  FieldError,\n  FieldGroup,\n  FieldLegend,\n  FieldSeparator,\n  FieldSet,\n  FieldContent,\n  FieldTitle,\n}\n","path":null,"size_bytes":6044,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1037,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1419,"size_tokens":null},"client/src/components/ui/empty.tsx":{"content":"import { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Empty({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty\"\n      className={cn(\n        \"flex min-w-0 flex-1 flex-col items-center justify-center gap-6 text-balance rounded-lg border-dashed p-6 text-center md:p-12\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-header\"\n      className={cn(\n        \"flex max-w-sm flex-col items-center gap-2 text-center\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst emptyMediaVariants = cva(\n  \"mb-2 flex shrink-0 items-center justify-center [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction EmptyMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof emptyMediaVariants>) {\n  return (\n    <div\n      data-slot=\"empty-icon\"\n      data-variant={variant}\n      className={cn(emptyMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-title\"\n      className={cn(\"text-lg font-medium tracking-tight\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <div\n      data-slot=\"empty-description\"\n      className={cn(\n        \"text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-content\"\n      className={cn(\n        \"flex w-full min-w-0 max-w-sm flex-col items-center gap-4 text-balance text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Empty,\n  EmptyHeader,\n  EmptyTitle,\n  EmptyDescription,\n  EmptyContent,\n  EmptyMedia,\n}\n","path":null,"size_bytes":2396,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5745,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1148,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"import * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8608,"size_tokens":null},"client/src/components/layout/Footer.tsx":{"content":"export default function Footer() {\n  return (\n    <footer className=\"bg-slate-900 text-slate-300 py-12 border-t border-slate-800 mt-auto\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8\">\n          <div>\n            <div className=\"flex items-center gap-2 mb-4\">\n              <div className=\"bg-primary text-white p-1 rounded-sm\">\n                <div className=\"w-6 h-6 border-2 border-current rounded-sm grid place-items-center\">\n                  <span className=\"text-xs font-bold font-display\">AP</span>\n                </div>\n              </div>\n              <span className=\"text-xl font-bold font-display tracking-tight text-white\">\n                AutoParts<span className=\"text-primary\">.B2B</span>\n              </span>\n            </div>\n            <p className=\"text-sm text-slate-400 leading-relaxed\">\n              The leading B2B marketplace for automotive parts, connecting verified vendors with workshops and retailers worldwide.\n            </p>\n          </div>\n          \n          <div>\n            <h4 className=\"font-display font-bold text-white mb-4\">Platform</h4>\n            <ul className=\"space-y-2 text-sm\">\n              <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Marketplace</a></li>\n              <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Sell on Platform</a></li>\n              <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Vendor Directory</a></li>\n              <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Bulk Orders</a></li>\n            </ul>\n          </div>\n\n          <div>\n            <h4 className=\"font-display font-bold text-white mb-4\">Support</h4>\n            <ul className=\"space-y-2 text-sm\">\n              <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Help Center</a></li>\n              <li><a href=\"#\" className=\"hover:text-primary transition-colors\">API Documentation</a></li>\n              <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Return Policy</a></li>\n              <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Contact Us</a></li>\n            </ul>\n          </div>\n\n          <div>\n            <h4 className=\"font-display font-bold text-white mb-4\">Legal</h4>\n            <ul className=\"space-y-2 text-sm\">\n              <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Terms of Service</a></li>\n              <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Privacy Policy</a></li>\n              <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Cookie Policy</a></li>\n            </ul>\n          </div>\n        </div>\n        \n        <div className=\"border-t border-slate-800 pt-8 flex flex-col md:flex-row items-center justify-between gap-4 text-xs text-slate-500\">\n          <p>&copy; 2025 AutoParts Marketplace Inc. All rights reserved.</p>\n          <div className=\"flex gap-4\">\n            <span>Secured by Stripe</span>\n            <span>Verified Vendor Network</span>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","path":null,"size_bytes":3165,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n\" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n           // @replit: no hover, and add primary border\n           \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm border-destructive-border\",\n        outline:\n          // @replit Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color. Uses shadow-xs. no shadow on active\n          // No hover state\n          \" border [border-color:var(--button-outline)] shadow-xs active:shadow-none \",\n        secondary:\n          // @replit border, no hover, no shadow, secondary border.\n          \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // @replit no hover, transparent border\n        ghost: \"border border-transparent\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        // @replit changed sizes\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2356,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from \"lucide-react\"\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button, buttonVariants } from \"@/components/ui/button\"\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = \"label\",\n  buttonVariant = \"ghost\",\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"]\n}) {\n  const defaultClassNames = getDefaultClassNames()\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\n        \"bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\n        className\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString(\"default\", { month: \"short\" }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn(\"w-fit\", defaultClassNames.root),\n        months: cn(\n          \"relative flex flex-col gap-4 md:flex-row\",\n          defaultClassNames.months\n        ),\n        month: cn(\"flex w-full flex-col gap-4\", defaultClassNames.month),\n        nav: cn(\n          \"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\",\n          defaultClassNames.nav\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_previous\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_next\n        ),\n        month_caption: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]\",\n          defaultClassNames.month_caption\n        ),\n        dropdowns: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium\",\n          defaultClassNames.dropdowns\n        ),\n        dropdown_root: cn(\n          \"has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border\",\n          defaultClassNames.dropdown_root\n        ),\n        dropdown: cn(\n          \"bg-popover absolute inset-0 opacity-0\",\n          defaultClassNames.dropdown\n        ),\n        caption_label: cn(\n          \"select-none font-medium\",\n          captionLayout === \"label\"\n            ? \"text-sm\"\n            : \"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5\",\n          defaultClassNames.caption_label\n        ),\n        table: \"w-full border-collapse\",\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\n        weekday: cn(\n          \"text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal\",\n          defaultClassNames.weekday\n        ),\n        week: cn(\"mt-2 flex w-full\", defaultClassNames.week),\n        week_number_header: cn(\n          \"w-[--cell-size] select-none\",\n          defaultClassNames.week_number_header\n        ),\n        week_number: cn(\n          \"text-muted-foreground select-none text-[0.8rem]\",\n          defaultClassNames.week_number\n        ),\n        day: cn(\n          \"group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md\",\n          defaultClassNames.day\n        ),\n        range_start: cn(\n          \"bg-accent rounded-l-md\",\n          defaultClassNames.range_start\n        ),\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\n        range_end: cn(\"bg-accent rounded-r-md\", defaultClassNames.range_end),\n        today: cn(\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\n          defaultClassNames.today\n        ),\n        outside: cn(\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\n          defaultClassNames.outside\n        ),\n        disabled: cn(\n          \"text-muted-foreground opacity-50\",\n          defaultClassNames.disabled\n        ),\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          )\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === \"left\") {\n            return (\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\n            )\n          }\n\n          if (orientation === \"right\") {\n            return (\n              <ChevronRightIcon\n                className={cn(\"size-4\", className)}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\n          )\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-[--cell-size] items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          )\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  )\n}\n\nfunction CalendarDayButton({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) {\n  const defaultClassNames = getDefaultClassNames()\n\n  const ref = React.useRef<HTMLButtonElement>(null)\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus()\n  }, [modifiers.focused])\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70\",\n        defaultClassNames.day,\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Calendar, CalendarDayButton }\n","path":null,"size_bytes":7569,"size_tokens":null},"client/src/pages/account/wishlist.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport ProductImage from \"@/components/ui/product-image\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { api, getAccessToken, clearTokens } from \"@/lib/api\";\nimport { Link, useLocation } from \"wouter\";\nimport { \n  Heart, Trash2, ShoppingCart, Loader2, User, Package, \n  RotateCcw, Shield, Bell, Lock, LogOut, Monitor, CreditCard\n} from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function WishlistPage() {\n  const [location, setLocation] = useLocation();\n  const [wishlistIds, setWishlistIds] = useState<number[]>([]);\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean | null>(null);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    const token = getAccessToken();\n    const authenticated = !!token;\n    setIsAuthenticated(authenticated);\n    \n    if (!authenticated) {\n      setLocation('/auth/login');\n      return;\n    }\n    \n    const stored = localStorage.getItem('wishlist');\n    if (stored) {\n      try {\n        setWishlistIds(JSON.parse(stored));\n      } catch {\n        setWishlistIds([]);\n      }\n    }\n  }, [setLocation]);\n\n  const { data: allProducts, isLoading } = useQuery({\n    queryKey: ['products'],\n    queryFn: () => api.products.getAll(),\n  });\n\n  const wishlistProducts = allProducts?.filter(p => wishlistIds.includes(p.id)) || [];\n\n  const removeFromWishlist = (productId: number) => {\n    const newWishlist = wishlistIds.filter(id => id !== productId);\n    setWishlistIds(newWishlist);\n    localStorage.setItem('wishlist', JSON.stringify(newWishlist));\n    toast({\n      title: \"Removed from wishlist\",\n      description: \"Product has been removed from your wishlist.\",\n    });\n  };\n\n  const handleLogout = async () => {\n    try {\n      await api.auth.logout();\n    } catch (e) {\n      // Ignore errors\n    }\n    clearTokens();\n    setLocation('/');\n  };\n\n  const SidebarItem = ({ icon: Icon, label, active = false, onClick, href }: { icon: any, label: string, active?: boolean, onClick?: () => void, href?: string }) => {\n    const content = (\n      <div \n        className={`flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors ${active ? \"bg-[#3D4736] text-white\" : \"hover:bg-slate-100 text-slate-700\"}`}\n        onClick={onClick}\n        data-testid={`sidebar-${label.toLowerCase().replace(/\\s+/g, '-')}`}\n      >\n        <Icon className=\"h-4 w-4\" />\n        <span className=\"text-sm font-medium\">{label}</span>\n      </div>\n    );\n    \n    if (href) {\n      return <Link href={href}>{content}</Link>;\n    }\n    return content;\n  };\n\n  if (isAuthenticated === null || isLoading) {\n    return (\n      <Layout>\n        <div className=\"min-h-screen flex items-center justify-center bg-slate-50\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-orange-600\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return (\n    <Layout>\n      <div className=\"bg-[#3D4736] text-white py-2\">\n        <div className=\"container mx-auto px-4 flex justify-between items-center text-xs\">\n          <div className=\"flex gap-4\">\n          </div>\n          <div className=\"flex items-center gap-4\">\n             <Link href=\"/seller/dashboard\">\n               <Button size=\"sm\" variant=\"outline\" className=\"h-7 bg-white text-slate-900 border-white hover:bg-slate-100 font-bold text-xs uppercase rounded-full px-4\">\n                 Supplier Zone\n               </Button>\n             </Link>\n             <div className=\"flex items-center gap-2\">\n               <span>Account</span>\n               <div className=\"w-6 h-6 rounded-full border border-white grid place-items-center\">\n                 <User className=\"h-3 w-3\" />\n               </div>\n             </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-slate-50 min-h-screen py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex flex-col lg:flex-row gap-8\">\n            \n            {/* Sidebar */}\n            <aside className=\"w-full lg:w-64 flex-shrink-0 space-y-6\">\n              {/* User Profile Summary */}\n              <div className=\"bg-[#EFEBE4] p-6 rounded-lg\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <div className=\"w-10 h-10 bg-[#3D4736] rounded-full text-white grid place-items-center font-bold\">\n                    <User className=\"h-5 w-5\" />\n                  </div>\n                  <div>\n                    <div className=\"font-bold text-sm\">My Account</div>\n                    <div className=\"text-xs text-muted-foreground\">Manage your profile</div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Navigation Menu */}\n              <div className=\"bg-white rounded-lg overflow-hidden shadow-sm\">\n                <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase\">Orders & Activity</div>\n                <SidebarItem icon={Package} label=\"Orders\" href=\"/account/profile\" />\n                <SidebarItem icon={Heart} label=\"Wishlist\" active />\n                <SidebarItem icon={RotateCcw} label=\"Returns\" />\n                <SidebarItem icon={Shield} label=\"Warranty Claims\" />\n                \n                <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase mt-2\">My Account</div>\n                <SidebarItem icon={User} label=\"User Profile\" />\n                <SidebarItem icon={User} label=\"Address\" />\n                <SidebarItem icon={CreditCard} label=\"Payments\" />\n\n                <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase mt-2\">Security</div>\n                <SidebarItem icon={Monitor} label=\"Active Sessions\" href=\"/account/profile\" />\n                <SidebarItem icon={Bell} label=\"Notifications\" />\n                <SidebarItem icon={Lock} label=\"Security Settings\" />\n                \n                <div className=\"p-4 mt-2 border-t\">\n                  <Button variant=\"ghost\" className=\"w-full justify-start gap-3 text-red-600 hover:text-red-700 hover:bg-red-50\" onClick={handleLogout}>\n                    <LogOut className=\"h-4 w-4\" /> Log Out\n                  </Button>\n                </div>\n              </div>\n            </aside>\n\n            {/* Main Content */}\n            <main className=\"flex-1\">\n              <h1 className=\"text-2xl font-display font-bold mb-6 uppercase\">Wishlist</h1>\n\n              {wishlistProducts.length === 0 ? (\n                <div className=\"bg-[#EFEBE4] rounded-lg p-12 text-center\">\n                  <Heart className=\"h-16 w-16 mx-auto text-slate-400 mb-4\" />\n                  <h2 className=\"text-xl font-bold mb-2 text-slate-800\">Your wishlist is empty</h2>\n                  <p className=\"text-slate-500 mb-6\">Browse products and add them to your wishlist</p>\n                  <Link href=\"/products\">\n                    <Button className=\"bg-orange-600 hover:bg-orange-700\">Browse Products</Button>\n                  </Link>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  <p className=\"text-sm text-muted-foreground mb-4\">{wishlistProducts.length} item{wishlistProducts.length !== 1 ? 's' : ''} in your wishlist</p>\n                  \n                  {wishlistProducts.map((product) => (\n                    <div \n                      key={product.id} \n                      className=\"bg-[#EFEBE4] rounded-lg p-6 border border-slate-200\"\n                      data-testid={`wishlist-item-${product.id}`}\n                    >\n                      <div className=\"flex gap-4 items-center\">\n                        <Link href={`/products/${product.id}`}>\n                          <div className=\"w-20 h-20 bg-white rounded p-2 flex-shrink-0 cursor-pointer hover:ring-2 ring-orange-300 transition-all\">\n                            <ProductImage \n                              src={product.image} \n                              alt={product.name}\n                              className=\"w-full h-full object-contain\"\n                              placeholderClassName=\"w-full h-full\" \n                            />\n                          </div>\n                        </Link>\n                        <div className=\"flex-1\">\n                          <Link href={`/products/${product.id}`}>\n                            <h4 className=\"font-bold text-sm text-slate-900 hover:text-orange-600 cursor-pointer\">{product.name}</h4>\n                          </Link>\n                          {product.sku && (\n                            <p className=\"text-xs text-muted-foreground mt-1\">SKU: {product.sku}</p>\n                          )}\n                          <div className=\"font-bold text-sm mt-2\">AED {parseFloat(product.price?.toString() || '0').toLocaleString()}</div>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <Link href={`/products/${product.id}`}>\n                            <Button \n                              className=\"bg-[#3D4736] hover:bg-[#2A3324] text-xs\"\n                              data-testid={`wishlist-view-${product.id}`}\n                            >\n                              <ShoppingCart className=\"h-4 w-4 mr-1\" />\n                              View Product\n                            </Button>\n                          </Link>\n                          <Button \n                            variant=\"outline\" \n                            size=\"icon\"\n                            className=\"border-red-200 hover:bg-red-50\"\n                            onClick={() => removeFromWishlist(product.id)}\n                            data-testid={`wishlist-remove-${product.id}`}\n                          >\n                            <Trash2 className=\"h-4 w-4 text-red-500\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </main>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":10195,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4280,"size_tokens":null},"server/storage.ts":{"content":"// Integration: blueprint:javascript_database\nimport { \n  users, products, categories, reviews, cartItems, orders, orderItems, authSessions,\n  refunds, refundItems, addresses, savedPaymentMethods,\n  type User, type InsertUser,\n  type Product, type InsertProduct,\n  type Category, type InsertCategory,\n  type Review, type InsertReview,\n  type CartItem, type InsertCartItem,\n  type Order, type InsertOrder,\n  type OrderItem, type InsertOrderItem,\n  type AuthSession, type InsertAuthSession,\n  type Refund, type InsertRefund,\n  type RefundItem, type InsertRefundItem,\n  type Address, type InsertAddress,\n  type SavedPaymentMethod, type InsertSavedPaymentMethod\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, and, desc, sql, or, ilike, isNull } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // Users\n  getUser(id: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUserProfile(id: string, data: { name?: string; email?: string }): Promise<User | undefined>;\n\n  // Categories\n  getCategories(): Promise<Category[]>;\n  createCategory(category: InsertCategory): Promise<Category>;\n\n  // Products\n  getProducts(filters?: {\n    categoryId?: number;\n    vendorId?: string;\n    search?: string;\n    minPrice?: number;\n    maxPrice?: number;\n  }): Promise<Product[]>;\n  getProductById(id: number): Promise<Product | undefined>;\n  createProduct(product: InsertProduct): Promise<Product>;\n  updateProduct(id: number, product: Partial<InsertProduct>): Promise<Product | undefined>;\n  \n  // Reviews\n  getReviewsByProductId(productId: number): Promise<(Review & { user: User })[]>;\n  createReview(review: InsertReview): Promise<Review>;\n\n  // Cart\n  getCartByUserId(userId: string): Promise<(CartItem & { product: Product })[]>;\n  addToCart(item: InsertCartItem): Promise<CartItem>;\n  updateCartItem(id: number, quantity: number): Promise<CartItem | undefined>;\n  removeFromCart(id: number): Promise<void>;\n  clearCart(userId: string): Promise<void>;\n\n  // Orders\n  getOrdersByUserId(userId: string): Promise<(Order & { items: OrderItem[] })[]>;\n  getOrderById(id: string): Promise<(Order & { items: OrderItem[] }) | undefined>;\n  createOrder(order: InsertOrder, items: InsertOrderItem[]): Promise<Order>;\n\n  // Vendor Stats\n  getVendorStats(vendorId: string): Promise<{\n    revenue: number;\n    orders: number;\n    products: number;\n  }>;\n\n  // Auth Sessions\n  createSession(session: InsertAuthSession): Promise<AuthSession>;\n  getSessionById(id: string): Promise<AuthSession | undefined>;\n  getActiveSessionsByUserId(userId: string): Promise<AuthSession[]>;\n  updateSessionLastUsed(id: string): Promise<void>;\n  revokeSession(id: string): Promise<void>;\n  revokeAllUserSessions(userId: string, exceptSessionId?: string): Promise<void>;\n  updateUserTokenVersion(userId: string): Promise<number>;\n\n  // Refunds\n  getRefundsByUserId(userId: string): Promise<(Refund & { items: RefundItem[] })[]>;\n  getRefundById(id: string): Promise<(Refund & { items: RefundItem[] }) | undefined>;\n  createRefund(refund: InsertRefund, items: InsertRefundItem[]): Promise<Refund>;\n\n  // Addresses\n  getAddressesByUserId(userId: string): Promise<Address[]>;\n  getAddressById(id: number): Promise<Address | undefined>;\n  createAddress(address: InsertAddress): Promise<Address>;\n  updateAddress(id: number, address: Partial<InsertAddress>): Promise<Address | undefined>;\n  deleteAddress(id: number): Promise<void>;\n  setDefaultAddress(userId: string, addressId: number): Promise<void>;\n\n  // Saved Payment Methods\n  getSavedPaymentsByUserId(userId: string): Promise<SavedPaymentMethod[]>;\n  getSavedPaymentById(id: number): Promise<SavedPaymentMethod | undefined>;\n  createSavedPayment(payment: InsertSavedPaymentMethod): Promise<SavedPaymentMethod>;\n  updateSavedPayment(id: number, payment: Partial<InsertSavedPaymentMethod>): Promise<SavedPaymentMethod | undefined>;\n  deleteSavedPayment(id: number): Promise<void>;\n  setDefaultPayment(userId: string, paymentId: number): Promise<void>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Users\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.email, email));\n    return user || undefined;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(insertUser).returning();\n    return user;\n  }\n\n  async updateUserProfile(id: string, data: { name?: string; email?: string }): Promise<User | undefined> {\n    const [updatedUser] = await db\n      .update(users)\n      .set({\n        name: data.name,\n        email: data.email\n      })\n      .where(eq(users.id, id))\n      .returning();\n    return updatedUser || undefined;\n  }\n\n  // Categories\n  async getCategories(): Promise<Category[]> {\n    return await db.select().from(categories);\n  }\n\n  async createCategory(category: InsertCategory): Promise<Category> {\n    const [newCategory] = await db.insert(categories).values(category as any).returning();\n    return newCategory;\n  }\n\n  // Products\n  async getProducts(filters?: {\n    categoryId?: number;\n    vendorId?: string;\n    search?: string;\n    minPrice?: number;\n    maxPrice?: number;\n  }): Promise<Product[]> {\n    let query = db.select().from(products);\n\n    const conditions = [];\n    \n    if (filters?.categoryId) {\n      conditions.push(eq(products.categoryId, filters.categoryId));\n    }\n    if (filters?.vendorId) {\n      conditions.push(eq(products.vendorId, filters.vendorId));\n    }\n    if (filters?.search) {\n      conditions.push(\n        or(\n          ilike(products.name, `%${filters.search}%`),\n          ilike(products.description, `%${filters.search}%`)\n        )\n      );\n    }\n    if (filters?.minPrice !== undefined) {\n      conditions.push(sql`${products.price}::numeric >= ${filters.minPrice}`);\n    }\n    if (filters?.maxPrice !== undefined) {\n      conditions.push(sql`${products.price}::numeric <= ${filters.maxPrice}`);\n    }\n\n    if (conditions.length > 0) {\n      query = query.where(and(...conditions)) as any;\n    }\n\n    return await query;\n  }\n\n  async getProductById(id: number): Promise<Product | undefined> {\n    const [product] = await db.select().from(products).where(eq(products.id, id));\n    return product || undefined;\n  }\n\n  async createProduct(product: InsertProduct): Promise<Product> {\n    const [newProduct] = await db.insert(products).values(product as any).returning();\n    return newProduct;\n  }\n\n  async updateProduct(id: number, product: Partial<InsertProduct>): Promise<Product | undefined> {\n    const [updated] = await db\n      .update(products)\n      .set(product)\n      .where(eq(products.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  // Reviews\n  async getReviewsByProductId(productId: number): Promise<(Review & { user: User })[]> {\n    const result = await db\n      .select()\n      .from(reviews)\n      .innerJoin(users, eq(reviews.userId, users.id))\n      .where(eq(reviews.productId, productId))\n      .orderBy(desc(reviews.createdAt));\n\n    return result.map(row => ({\n      ...row.reviews,\n      user: row.users,\n    }));\n  }\n\n  async createReview(review: InsertReview): Promise<Review> {\n    const [newReview] = await db.insert(reviews).values(review as any).returning();\n    \n    // Update product rating and review count\n    const productReviews = await db\n      .select()\n      .from(reviews)\n      .where(eq(reviews.productId, newReview.productId));\n    \n    const avgRating = productReviews.reduce((sum, r) => sum + r.rating, 0) / productReviews.length;\n    \n    await db\n      .update(products)\n      .set({\n        rating: avgRating.toFixed(1),\n        reviewCount: productReviews.length,\n      })\n      .where(eq(products.id, newReview.productId));\n\n    return newReview;\n  }\n\n  // Cart\n  async getCartByUserId(userId: string): Promise<(CartItem & { product: Product })[]> {\n    const result = await db\n      .select()\n      .from(cartItems)\n      .innerJoin(products, eq(cartItems.productId, products.id))\n      .where(eq(cartItems.userId, userId));\n\n    return result.map(row => ({\n      ...row.cart_items,\n      product: row.products,\n    }));\n  }\n\n  async addToCart(item: InsertCartItem): Promise<CartItem> {\n    // Check if item already exists in cart\n    const [existing] = await db\n      .select()\n      .from(cartItems)\n      .where(\n        and(\n          eq(cartItems.userId, item.userId!),\n          eq(cartItems.productId, item.productId!)\n        )\n      );\n\n    if (existing) {\n      // Update quantity\n      const [updated] = await db\n        .update(cartItems)\n        .set({ quantity: existing.quantity + (item.quantity || 1) })\n        .where(eq(cartItems.id, existing.id))\n        .returning();\n      return updated;\n    }\n\n    const [newItem] = await db.insert(cartItems).values(item as any).returning();\n    return newItem;\n  }\n\n  async updateCartItem(id: number, quantity: number): Promise<CartItem | undefined> {\n    const [updated] = await db\n      .update(cartItems)\n      .set({ quantity })\n      .where(eq(cartItems.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  async removeFromCart(id: number): Promise<void> {\n    await db.delete(cartItems).where(eq(cartItems.id, id));\n  }\n\n  async clearCart(userId: string): Promise<void> {\n    await db.delete(cartItems).where(eq(cartItems.userId, userId));\n  }\n\n  // Orders\n  async getOrdersByUserId(userId: string): Promise<(Order & { items: OrderItem[] })[]> {\n    const userOrders = await db\n      .select()\n      .from(orders)\n      .where(eq(orders.userId, userId))\n      .orderBy(desc(orders.createdAt));\n\n    const ordersWithItems = await Promise.all(\n      userOrders.map(async (order) => {\n        const items = await db\n          .select()\n          .from(orderItems)\n          .where(eq(orderItems.orderId, order.id));\n        \n        return {\n          ...order,\n          items,\n        };\n      })\n    );\n\n    return ordersWithItems;\n  }\n\n  async getOrderById(id: string): Promise<(Order & { items: OrderItem[] }) | undefined> {\n    const [order] = await db.select().from(orders).where(eq(orders.id, id));\n    if (!order) return undefined;\n\n    const items = await db.select().from(orderItems).where(eq(orderItems.orderId, id));\n\n    return {\n      ...order,\n      items,\n    };\n  }\n\n  async createOrder(order: InsertOrder, items: InsertOrderItem[]): Promise<Order> {\n    const [newOrder] = await db.insert(orders).values(order as any).returning();\n    \n    if (items.length > 0) {\n      await db.insert(orderItems).values(\n        items.map(item => ({\n          ...item,\n          orderId: newOrder.id,\n        })) as any\n      );\n    }\n\n    return newOrder;\n  }\n\n  // Vendor Stats\n  async getVendorStats(vendorId: string): Promise<{\n    revenue: number;\n    orders: number;\n    products: number;\n  }> {\n    // Get product count\n    const vendorProducts = await db\n      .select()\n      .from(products)\n      .where(eq(products.vendorId, vendorId));\n\n    // Get orders containing vendor products\n    const productIds = vendorProducts.map(p => p.id);\n    \n    const vendorOrderItems = await db\n      .select()\n      .from(orderItems)\n      .where(sql`${orderItems.productId} = ANY(${productIds})`);\n\n    const revenue = vendorOrderItems.reduce((sum, item) => {\n      return sum + parseFloat(item.price.toString()) * item.quantity;\n    }, 0);\n\n    const uniqueOrders = new Set(vendorOrderItems.map(item => item.orderId));\n\n    return {\n      revenue,\n      orders: uniqueOrders.size,\n      products: vendorProducts.length,\n    };\n  }\n\n  // Auth Sessions\n  async createSession(session: InsertAuthSession): Promise<AuthSession> {\n    const [newSession] = await db.insert(authSessions).values(session as any).returning();\n    return newSession;\n  }\n\n  async getSessionById(id: string): Promise<AuthSession | undefined> {\n    const [session] = await db\n      .select()\n      .from(authSessions)\n      .where(eq(authSessions.id, id));\n    return session || undefined;\n  }\n\n  async getActiveSessionsByUserId(userId: string): Promise<AuthSession[]> {\n    return await db\n      .select()\n      .from(authSessions)\n      .where(\n        and(\n          eq(authSessions.userId, userId),\n          isNull(authSessions.revokedAt),\n          sql`${authSessions.expiresAt} > NOW()`\n        )\n      )\n      .orderBy(desc(authSessions.lastUsedAt));\n  }\n\n  async updateSessionLastUsed(id: string): Promise<void> {\n    await db\n      .update(authSessions)\n      .set({ lastUsedAt: new Date() })\n      .where(eq(authSessions.id, id));\n  }\n\n  async revokeSession(id: string): Promise<void> {\n    await db\n      .update(authSessions)\n      .set({ revokedAt: new Date() })\n      .where(eq(authSessions.id, id));\n  }\n\n  async revokeAllUserSessions(userId: string, exceptSessionId?: string): Promise<void> {\n    if (exceptSessionId) {\n      await db\n        .update(authSessions)\n        .set({ revokedAt: new Date() })\n        .where(\n          and(\n            eq(authSessions.userId, userId),\n            isNull(authSessions.revokedAt),\n            sql`${authSessions.id} != ${exceptSessionId}`\n          )\n        );\n    } else {\n      await db\n        .update(authSessions)\n        .set({ revokedAt: new Date() })\n        .where(\n          and(\n            eq(authSessions.userId, userId),\n            isNull(authSessions.revokedAt)\n          )\n        );\n    }\n  }\n\n  async updateUserTokenVersion(userId: string): Promise<number> {\n    const [updated] = await db\n      .update(users)\n      .set({ tokenVersion: sql`COALESCE(${users.tokenVersion}, 0) + 1` })\n      .where(eq(users.id, userId))\n      .returning();\n    return updated?.tokenVersion || 1;\n  }\n\n  // Refunds\n  async getRefundsByUserId(userId: string): Promise<(Refund & { items: RefundItem[] })[]> {\n    const userRefunds = await db\n      .select()\n      .from(refunds)\n      .where(eq(refunds.userId, userId))\n      .orderBy(desc(refunds.createdAt));\n    \n    const result = await Promise.all(\n      userRefunds.map(async (refund) => {\n        const items = await db\n          .select()\n          .from(refundItems)\n          .where(eq(refundItems.refundId, refund.id));\n        return { ...refund, items };\n      })\n    );\n    \n    return result;\n  }\n\n  async getRefundById(id: string): Promise<(Refund & { items: RefundItem[] }) | undefined> {\n    const [refund] = await db\n      .select()\n      .from(refunds)\n      .where(eq(refunds.id, id));\n    \n    if (!refund) return undefined;\n    \n    const items = await db\n      .select()\n      .from(refundItems)\n      .where(eq(refundItems.refundId, refund.id));\n    \n    return { ...refund, items };\n  }\n\n  async createRefund(refund: InsertRefund, items: InsertRefundItem[]): Promise<Refund> {\n    const [newRefund] = await db.insert(refunds).values(refund as any).returning();\n    \n    if (items.length > 0) {\n      await db.insert(refundItems).values(\n        items.map(item => ({ ...item, refundId: newRefund.id })) as any\n      );\n    }\n    \n    return newRefund;\n  }\n\n  // Addresses\n  async getAddressesByUserId(userId: string): Promise<Address[]> {\n    return await db\n      .select()\n      .from(addresses)\n      .where(eq(addresses.userId, userId))\n      .orderBy(desc(addresses.isDefault), desc(addresses.createdAt));\n  }\n\n  async getAddressById(id: number): Promise<Address | undefined> {\n    const [address] = await db.select().from(addresses).where(eq(addresses.id, id));\n    return address || undefined;\n  }\n\n  async createAddress(address: InsertAddress): Promise<Address> {\n    // If this is the first address or marked as default, reset other defaults\n    if (address.isDefault) {\n      await db\n        .update(addresses)\n        .set({ isDefault: false })\n        .where(eq(addresses.userId, address.userId));\n    }\n    const [newAddress] = await db.insert(addresses).values(address as any).returning();\n    return newAddress;\n  }\n\n  async updateAddress(id: number, address: Partial<InsertAddress>): Promise<Address | undefined> {\n    const [updatedAddress] = await db\n      .update(addresses)\n      .set(address as any)\n      .where(eq(addresses.id, id))\n      .returning();\n    return updatedAddress || undefined;\n  }\n\n  async deleteAddress(id: number): Promise<void> {\n    await db.delete(addresses).where(eq(addresses.id, id));\n  }\n\n  async setDefaultAddress(userId: string, addressId: number): Promise<void> {\n    // Reset all defaults for user\n    await db\n      .update(addresses)\n      .set({ isDefault: false })\n      .where(eq(addresses.userId, userId));\n    // Set the new default\n    await db\n      .update(addresses)\n      .set({ isDefault: true })\n      .where(eq(addresses.id, addressId));\n  }\n\n  // Saved Payment Methods\n  async getSavedPaymentsByUserId(userId: string): Promise<SavedPaymentMethod[]> {\n    return await db\n      .select()\n      .from(savedPaymentMethods)\n      .where(and(\n        eq(savedPaymentMethods.userId, userId),\n        eq(savedPaymentMethods.isActive, true)\n      ))\n      .orderBy(desc(savedPaymentMethods.isDefault), desc(savedPaymentMethods.createdAt));\n  }\n\n  async getSavedPaymentById(id: number): Promise<SavedPaymentMethod | undefined> {\n    const [payment] = await db.select().from(savedPaymentMethods).where(eq(savedPaymentMethods.id, id));\n    return payment || undefined;\n  }\n\n  async createSavedPayment(payment: InsertSavedPaymentMethod): Promise<SavedPaymentMethod> {\n    // If this is the first payment or marked as default, reset other defaults\n    if (payment.isDefault) {\n      await db\n        .update(savedPaymentMethods)\n        .set({ isDefault: false })\n        .where(eq(savedPaymentMethods.userId, payment.userId));\n    }\n    const [newPayment] = await db.insert(savedPaymentMethods).values(payment as any).returning();\n    return newPayment;\n  }\n\n  async updateSavedPayment(id: number, payment: Partial<InsertSavedPaymentMethod>): Promise<SavedPaymentMethod | undefined> {\n    const [updatedPayment] = await db\n      .update(savedPaymentMethods)\n      .set({ ...payment as any, updatedAt: new Date() })\n      .where(eq(savedPaymentMethods.id, id))\n      .returning();\n    return updatedPayment || undefined;\n  }\n\n  async deleteSavedPayment(id: number): Promise<void> {\n    // Soft delete - mark as inactive (regulatory compliance requires keeping records)\n    await db\n      .update(savedPaymentMethods)\n      .set({ isActive: false, updatedAt: new Date() })\n      .where(eq(savedPaymentMethods.id, id));\n  }\n\n  async setDefaultPayment(userId: string, paymentId: number): Promise<void> {\n    // Reset all defaults for user\n    await db\n      .update(savedPaymentMethods)\n      .set({ isDefault: false, updatedAt: new Date() })\n      .where(eq(savedPaymentMethods.userId, userId));\n    // Set the new default\n    await db\n      .update(savedPaymentMethods)\n      .set({ isDefault: true, updatedAt: new Date() })\n      .where(eq(savedPaymentMethods.id, paymentId));\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":19148,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2859,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\nimport { seedDatabase } from \"./seed\";\nimport { setupSwagger } from \"./swagger\";\n\nconst app = express();\nconst httpServer = createServer(app);\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\napp.use(\n  express.json({\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  // Seed database on startup\n  await seedDatabase();\n  \n  // Setup Swagger documentation\n  setupSwagger(app);\n  \n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":2755,"size_tokens":null},"client/src/components/ui/product-card.tsx":{"content":"\nimport { Product } from \"@/lib/mockApi\";\nimport { Card, CardContent, CardFooter } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport ProductImage from \"@/components/ui/product-image\";\nimport { ShoppingCart, Lock, Star } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\ninterface ProductCardProps {\n  product: Product;\n}\n\nexport default function ProductCard({ product }: ProductCardProps) {\n  // Mock rating rendering helper\n  const renderRating = (rating?: number) => {\n    if (!rating) return null;\n    return (\n      <div className=\"flex items-center gap-1 mb-2\">\n        {[1, 2, 3, 4, 5].map((star) => (\n          <Star \n            key={star} \n            className={`h-3 w-3 ${star <= Math.round(rating) ? \"fill-yellow-400 text-yellow-400\" : \"text-muted-foreground/30\"}`} \n          />\n        ))}\n        <span className=\"text-xs text-muted-foreground ml-1\">({Math.floor(Math.random() * 50) + 1})</span>\n      </div>\n    );\n  };\n\n  return (\n    <Card className=\"overflow-hidden group hover:border-primary/50 transition-colors duration-300 h-full flex flex-col\">\n      <Link href={`/products/${product.id}`}>\n        <div className=\"aspect-[4/3] overflow-hidden bg-secondary relative cursor-pointer\">\n          <ProductImage \n            src={product.image} \n            alt={product.name}\n            className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105\"\n            placeholderClassName=\"w-full h-full\"\n          />\n          {product.stock < 10 && product.stock > 0 && (\n            <Badge variant=\"destructive\" className=\"absolute top-2 right-2 shadow-sm\">\n              Low Stock: {product.stock}\n            </Badge>\n          )}\n          {product.stock === 0 && (\n            <Badge variant=\"secondary\" className=\"absolute top-2 right-2 shadow-sm bg-slate-800 text-white\">\n              Out of Stock\n            </Badge>\n          )}\n          <Badge variant=\"secondary\" className=\"absolute top-2 left-2 shadow-sm backdrop-blur-md bg-background/80\">\n            {product.condition.toUpperCase()}\n          </Badge>\n        </div>\n      </Link>\n      \n      <CardContent className=\"p-4 flex-1\">\n        <div className=\"flex justify-between items-start mb-1\">\n          <div className=\"text-xs text-muted-foreground font-medium\">{product.vendor}</div>\n          {/* Random rating for mock purposes if not present in data yet */}\n          {renderRating(4.5)} \n        </div>\n        \n        <Link href={`/products/${product.id}`}>\n          <h3 className=\"font-semibold text-lg leading-tight mb-2 line-clamp-2 hover:text-primary transition-colors cursor-pointer\">\n            {product.name}\n          </h3>\n        </Link>\n        <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-3\">\n          <span className=\"bg-secondary px-2 py-0.5 rounded text-xs\">{product.make} {product.model}</span>\n          <span>{product.year}</span>\n        </div>\n        <div className=\"font-mono text-xs text-muted-foreground\">SKU: {product.sku}</div>\n      </CardContent>\n      \n      <CardFooter className=\"p-4 pt-0 flex items-center justify-between mt-auto\">\n        {product.price !== null ? (\n          <div className=\"font-bold text-xl text-primary\">\n            ${product.price.toFixed(2)}\n          </div>\n        ) : (\n          <div className=\"text-sm font-medium text-muted-foreground flex items-center gap-1\">\n            <Lock className=\"h-3 w-3\" /> Login to view price\n          </div>\n        )}\n        \n        {product.price !== null ? (\n          <Button size=\"sm\" variant=\"outline\" className=\"gap-2 group-hover:bg-primary group-hover:text-primary-foreground group-hover:border-primary transition-all\">\n            <ShoppingCart className=\"h-4 w-4\" />\n            Add\n          </Button>\n        ) : (\n          <Link href=\"/auth/login\">\n            <Button size=\"sm\" variant=\"secondary\" className=\"gap-2\">\n              Login\n            </Button>\n          </Link>\n        )}\n      </CardFooter>\n    </Card>\n  );\n}\n","path":null,"size_bytes":4081,"size_tokens":null},"replit.md":{"content":"# AutoParts B2B Marketplace\n\n## Overview\n\nA B2B e-commerce marketplace for automotive and defense vehicle parts. The platform connects verified vendors with workshops and retailers, offering features like product catalog browsing, shopping cart management, checkout with Stripe integration, and user authentication. The application follows a full-stack architecture with React frontend and Express backend, using PostgreSQL for data persistence.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript\n- **Routing**: Wouter (lightweight alternative to React Router)\n- **State Management**: TanStack React Query for server state, local state with React hooks\n- **Styling**: Tailwind CSS with shadcn/ui component library (New York style variant)\n- **Build Tool**: Vite with custom plugins for Replit integration\n\nThe frontend is organized under `client/src/` with pages, components, hooks, and lib utilities. Components follow the shadcn/ui pattern with Radix UI primitives.\n\n### Backend Architecture\n- **Framework**: Express.js with TypeScript\n- **API Design**: RESTful endpoints under `/api` prefix\n- **Documentation**: Swagger/OpenAPI integration at `/api-docs`\n- **Authentication**: Token-based auth with Bearer tokens stored in memory (sessions Map)\n\nThe server handles API routes in `server/routes.ts`, with database operations abstracted through `server/storage.ts`.\n\n### Data Storage\n- **Database**: PostgreSQL with Drizzle ORM\n- **Schema**: Defined in `shared/schema.ts` with tables for users, products, categories, reviews, cart items, orders, and order items\n- **Migrations**: Managed via `drizzle-kit push` command\n\nKey entities:\n- Users (customer, vendor, admin, super_admin roles)\n- Products (with SKU, pricing, inventory, vehicle fitment data)\n- Categories (hierarchical product organization)\n- Cart and Orders (e-commerce workflow)\n\n### API Structure\nThe API follows RESTful conventions with endpoints for:\n- `/api/auth/*` - Authentication (login, register, me)\n- `/api/products/*` - Product catalog (list, details, featured, recommendations)\n- `/api/categories` - Category management\n- `/api/cart/*` - Shopping cart operations\n- `/api/checkout/*` - Stripe checkout session creation\n- `/api/orders/*` - Order management\n\n### Build System\n- Development: Vite dev server for frontend, tsx for backend with hot reload\n- Production: Custom build script using esbuild for server bundling, Vite for client\n- Output: `dist/` directory with `index.cjs` (server) and `public/` (static assets)\n\n## External Dependencies\n\n### Payment Processing\n- **Stripe**: Integrated for checkout sessions, with support for both development and production environments via Replit Connectors\n\n### Database\n- **PostgreSQL**: Required via `DATABASE_URL` environment variable\n- **Drizzle ORM**: Type-safe database queries with automatic schema inference\n\n### UI Components\n- **Radix UI**: Headless component primitives (dialog, dropdown, accordion, etc.)\n- **Embla Carousel**: Product image carousels with autoplay\n- **Lucide React**: Icon library\n\n### Authentication\n- **bcryptjs**: Password hashing\n- Session tokens stored in-memory (consider Redis for production scaling)\n\n### Development Tools\n- **Replit Plugins**: Cartographer, dev banner, runtime error overlay\n- **TypeScript**: Full type safety across client, server, and shared code","path":null,"size_bytes":3443,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload\n            .filter((item) => item.type !== \"none\")\n            .map((item, index) => {\n              const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n              const itemConfig = getPayloadConfigFromPayload(config, item, key)\n              const indicatorColor = color || item.payload.fill || item.color\n\n              return (\n                <div\n                  key={item.dataKey}\n                  className={cn(\n                    \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                    indicator === \"dot\" && \"items-center\"\n                  )}\n                >\n                  {formatter && item?.value !== undefined && item.name ? (\n                    formatter(item.value, item.name, item, index, item.payload)\n                  ) : (\n                    <>\n                      {itemConfig?.icon ? (\n                        <itemConfig.icon />\n                      ) : (\n                        !hideIndicator && (\n                          <div\n                            className={cn(\n                              \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                              {\n                                \"h-2.5 w-2.5\": indicator === \"dot\",\n                                \"w-1\": indicator === \"line\",\n                                \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                  indicator === \"dashed\",\n                                \"my-0.5\": nestLabel && indicator === \"dashed\",\n                              }\n                            )}\n                            style={\n                              {\n                                \"--color-bg\": indicatorColor,\n                                \"--color-border\": indicatorColor,\n                              } as React.CSSProperties\n                            }\n                          />\n                        )\n                      )}\n                      <div\n                        className={cn(\n                          \"flex flex-1 justify-between leading-none\",\n                          nestLabel ? \"items-end\" : \"items-center\"\n                        )}\n                      >\n                        <div className=\"grid gap-1.5\">\n                          {nestLabel ? tooltipLabel : null}\n                          <span className=\"text-muted-foreground\">\n                            {itemConfig?.label || item.name}\n                          </span>\n                        </div>\n                        {item.value && (\n                          <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                            {item.value.toLocaleString()}\n                          </span>\n                        )}\n                      </div>\n                    </>\n                  )}\n                </div>\n              )\n            })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload\n          .filter((item) => item.type !== \"none\")\n          .map((item) => {\n            const key = `${nameKey || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n            return (\n              <div\n                key={item.value}\n                className={cn(\n                  \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n                )}\n              >\n                {itemConfig?.icon && !hideIcon ? (\n                  <itemConfig.icon />\n                ) : (\n                  <div\n                    className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                    style={{\n                      backgroundColor: item.color,\n                    }}\n                  />\n                )}\n                {itemConfig?.label}\n              </div>\n            )\n          })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10763,"size_tokens":null},"client/src/components/ui/input-group.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\n\nfunction InputGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"input-group\"\n      role=\"group\"\n      className={cn(\n        \"group/input-group border-input dark:bg-input/30 shadow-xs relative flex w-full items-center rounded-md border outline-none transition-[color,box-shadow]\",\n        \"h-9 has-[>textarea]:h-auto\",\n\n        // Variants based on alignment.\n        \"has-[>[data-align=inline-start]]:[&>input]:pl-2\",\n        \"has-[>[data-align=inline-end]]:[&>input]:pr-2\",\n        \"has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3\",\n        \"has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3\",\n\n        // Focus state.\n        \"has-[[data-slot=input-group-control]:focus-visible]:ring-ring has-[[data-slot=input-group-control]:focus-visible]:ring-1\",\n\n        // Error state.\n        \"has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40\",\n\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupAddonVariants = cva(\n  \"text-muted-foreground flex h-auto cursor-text select-none items-center justify-center gap-2 py-1.5 text-sm font-medium group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      align: {\n        \"inline-start\":\n          \"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]\",\n        \"inline-end\":\n          \"order-last pr-3 has-[>button]:mr-[-0.4rem] has-[>kbd]:mr-[-0.35rem]\",\n        \"block-start\":\n          \"[.border-b]:pb-3 order-first w-full justify-start px-3 pt-3 group-has-[>input]/input-group:pt-2.5\",\n        \"block-end\":\n          \"[.border-t]:pt-3 order-last w-full justify-start px-3 pb-3 group-has-[>input]/input-group:pb-2.5\",\n      },\n    },\n    defaultVariants: {\n      align: \"inline-start\",\n    },\n  }\n)\n\nfunction InputGroupAddon({\n  className,\n  align = \"inline-start\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputGroupAddonVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"input-group-addon\"\n      data-align={align}\n      className={cn(inputGroupAddonVariants({ align }), className)}\n      onClick={(e) => {\n        if ((e.target as HTMLElement).closest(\"button\")) {\n          return\n        }\n        e.currentTarget.parentElement?.querySelector(\"input\")?.focus()\n      }}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupButtonVariants = cva(\n  \"flex items-center gap-2 text-sm shadow-none\",\n  {\n    variants: {\n      size: {\n        xs: \"h-6 gap-1 rounded-[calc(var(--radius)-5px)] px-2 has-[>svg]:px-2 [&>svg:not([class*='size-'])]:size-3.5\",\n        sm: \"h-8 gap-1.5 rounded-md px-2.5 has-[>svg]:px-2.5\",\n        \"icon-xs\":\n          \"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0\",\n        \"icon-sm\": \"size-8 p-0 has-[>svg]:p-0\",\n      },\n    },\n    defaultVariants: {\n      size: \"xs\",\n    },\n  }\n)\n\nfunction InputGroupButton({\n  className,\n  type = \"button\",\n  variant = \"ghost\",\n  size = \"xs\",\n  ...props\n}: Omit<React.ComponentProps<typeof Button>, \"size\"> &\n  VariantProps<typeof inputGroupButtonVariants>) {\n  return (\n    <Button\n      type={type}\n      data-size={size}\n      variant={variant}\n      className={cn(inputGroupButtonVariants({ size }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupText({ className, ...props }: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      className={cn(\n        \"text-muted-foreground flex items-center gap-2 text-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupInput({\n  className,\n  ...props\n}: React.ComponentProps<\"input\">) {\n  return (\n    <Input\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupTextarea({\n  className,\n  ...props\n}: React.ComponentProps<\"textarea\">) {\n  return (\n    <Textarea\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  InputGroup,\n  InputGroupAddon,\n  InputGroupButton,\n  InputGroupText,\n  InputGroupInput,\n  InputGroupTextarea,\n}\n","path":null,"size_bytes":4971,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":266,"size_tokens":null},"client/src/pages/auth/user-login.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Link, useLocation } from \"wouter\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { api, storeTokens } from \"@/lib/api\";\n\nexport default function LoginPage() {\n  const [, setLocation] = useLocation();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const { toast } = useToast();\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n    setIsLoading(true);\n    \n    try {\n      const data = await api.auth.login(email, password);\n\n      // Store JWT tokens\n      storeTokens(data.accessToken, data.refreshToken, data.expiresIn);\n      localStorage.setItem('user', JSON.stringify(data.user));\n\n      toast({\n        title: \"Welcome back!\",\n        description: `Logged in as ${data.user.name}`,\n      });\n\n      // Redirect based on user type\n      if (data.user.userType === 'vendor') {\n        setLocation('/seller/dashboard');\n      } else {\n        setLocation('/account/profile');\n      }\n    } catch (err: any) {\n      console.error(\"Login failed\", err);\n      setError(err.message || \"Failed to connect to server. Please try again.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"container mx-auto px-4 py-20 flex justify-center items-center min-h-[calc(100vh-400px)] bg-slate-50\">\n        <Card className=\"w-full max-w-md shadow-xl border-0\">\n          <CardHeader className=\"text-center space-y-2 pb-8\">\n            <h1 className=\"text-3xl font-display font-bold text-primary\">ARMOREDMART</h1>\n            <CardDescription className=\"text-base\">The World's First Compliance Integrated Defence E-Store</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleLogin} className=\"space-y-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\">Email Address</Label>\n                <Input \n                  id=\"email\" \n                  type=\"email\" \n                  placeholder=\"name@company.com\" \n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  required \n                  className=\"h-11\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"password\">Password</Label>\n                  <Link href=\"/auth/forgot-password\">\n                    <span className=\"text-xs text-primary hover:underline cursor-pointer\">Forgot Password?</span>\n                  </Link>\n                </div>\n                <Input \n                  id=\"password\" \n                  type=\"password\" \n                  required \n                  className=\"h-11\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  data-testid=\"input-password\"\n                />\n              </div>\n              \n              <div className=\"flex items-center space-x-2\">\n                <Checkbox id=\"remember\" />\n                <label\n                  htmlFor=\"remember\"\n                  className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n                >\n                  Remember me\n                </label>\n              </div>\n\n              {error && (\n                <div className=\"bg-red-50 text-red-600 p-3 rounded text-sm border border-red-200\">\n                  {error}\n                </div>\n              )}\n\n              <Button type=\"submit\" className=\"w-full h-12 text-base font-bold bg-orange-600 hover:bg-orange-700\" disabled={isLoading}>\n                {isLoading ? \"Signing In...\" : \"LOGIN\"}\n              </Button>\n            </form>\n            \n            <div className=\"mt-8 text-center text-sm text-muted-foreground\">\n              Don't have an account? <Link href=\"/auth/register\" className=\"text-primary font-bold hover:underline\">Register here</Link>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":4576,"size_tokens":null},"client/src/components/home/HeroSlider.tsx":{"content":"import useEmblaCarousel from \"embla-carousel-react\";\nimport Autoplay from \"embla-carousel-autoplay\";\nimport { Button } from \"@/components/ui/button\";\nimport { Slide } from \"@/lib/mockApi\";\nimport { ArrowRight } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\ninterface HeroSliderProps {\n  slides: Slide[];\n}\n\nexport default function HeroSlider({ slides }: HeroSliderProps) {\n  const [emblaRef] = useEmblaCarousel({ loop: true }, [Autoplay({ delay: 5000 })]);\n\n  return (\n    <div className=\"relative overflow-hidden bg-slate-900\" ref={emblaRef}>\n      <div className=\"flex touch-pan-y\">\n        {slides.map((slide) => (\n          <div key={slide.id} className=\"relative flex-[0_0_100%] min-w-0\">\n            <div className=\"relative h-[500px] w-full\">\n              {/* Background Image */}\n              <img\n                src={slide.image}\n                alt={slide.title || \"Hero Image\"}\n                className=\"absolute inset-0 w-full h-full object-cover opacity-50\"\n              />\n              {/* Gradient Overlay */}\n              <div className=\"absolute inset-0 bg-gradient-to-r from-slate-900 via-slate-900/60 to-transparent\" />\n              \n              {/* Content */}\n              <div className=\"absolute inset-0 container mx-auto px-4 flex flex-col justify-center\">\n                <div className=\"max-w-2xl animate-in fade-in slide-in-from-bottom-4 duration-700\">\n                  {slide.title && (\n                    <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-4 leading-tight\">\n                      {slide.title}\n                    </h1>\n                  )}\n                  {slide.subtitle && (\n                    <p className=\"text-lg md:text-xl text-slate-200 mb-8 max-w-xl leading-relaxed\">\n                      {slide.subtitle}\n                    </p>\n                  )}\n                  <Link href={slide.link}>\n                    <Button size=\"lg\" className=\"text-base font-bold px-8 h-12 gap-2\">\n                      {slide.buttonText} <ArrowRight className=\"h-5 w-5\" />\n                    </Button>\n                  </Link>\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":2249,"size_tokens":null},"client/src/index.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@custom-variant dark (&:is(.dark *));\n\n@theme inline {\n  --font-sans: 'Inter', sans-serif;\n  --font-display: 'Rajdhani', sans-serif;\n\n  --color-background: hsl(var(--background));\n  --color-foreground: hsl(var(--foreground));\n  --color-card: hsl(var(--card));\n  --color-card-foreground: hsl(var(--card-foreground));\n  --color-popover: hsl(var(--popover));\n  --color-popover-foreground: hsl(var(--popover-foreground));\n  --color-primary: hsl(var(--primary));\n  --color-primary-foreground: hsl(var(--primary-foreground));\n  --color-secondary: hsl(var(--secondary));\n  --color-secondary-foreground: hsl(var(--secondary-foreground));\n  --color-muted: hsl(var(--muted));\n  --color-muted-foreground: hsl(var(--muted-foreground));\n  --color-accent: hsl(var(--accent));\n  --color-accent-foreground: hsl(var(--accent-foreground));\n  --color-destructive: hsl(var(--destructive));\n  --color-destructive-foreground: hsl(var(--destructive-foreground));\n  --color-border: hsl(var(--border));\n  --color-input: hsl(var(--input));\n  --color-ring: hsl(var(--ring));\n  --color-chart-1: hsl(var(--chart-1));\n  --color-chart-2: hsl(var(--chart-2));\n  --color-chart-3: hsl(var(--chart-3));\n  --color-chart-4: hsl(var(--chart-4));\n  --color-chart-5: hsl(var(--chart-5));\n  --color-sidebar: hsl(var(--sidebar));\n  --color-sidebar-foreground: hsl(var(--sidebar-foreground));\n  --color-sidebar-primary: hsl(var(--sidebar-primary));\n  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));\n  --color-sidebar-accent: hsl(var(--sidebar-accent));\n  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));\n  --color-sidebar-border: hsl(var(--sidebar-border));\n  --color-sidebar-ring: hsl(var(--sidebar-ring));\n  \n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n}\n\n:root {\n  --background: 210 20% 98%;\n  --foreground: 222 47% 11%;\n  \n  --card: 0 0% 100%;\n  --card-foreground: 222 47% 11%;\n  \n  --popover: 0 0% 100%;\n  --popover-foreground: 222 47% 11%;\n  \n  --primary: 221 83% 53%; /* Vivid Blue */\n  --primary-foreground: 210 40% 98%;\n  \n  --secondary: 210 40% 96.1%;\n  --secondary-foreground: 222 47% 11.2%;\n  \n  --muted: 210 40% 96.1%;\n  --muted-foreground: 215.4 16.3% 46.9%;\n  \n  --accent: 210 40% 96.1%;\n  --accent-foreground: 222 47% 11.2%;\n  \n  --destructive: 0 84.2% 60.2%;\n  --destructive-foreground: 210 40% 98%;\n\n  --border: 214.3 31.8% 91.4%;\n  --input: 214.3 31.8% 91.4%;\n  --ring: 221 83% 53%;\n  \n  --radius: 0.5rem;\n  \n  --chart-1: 12 76% 61%;\n  --chart-2: 173 58% 39%;\n  --chart-3: 197 37% 24%;\n  --chart-4: 43 74% 66%;\n  --chart-5: 27 87% 67%;\n  \n  --sidebar: 0 0% 98%;\n  --sidebar-foreground: 240 5.3% 26.1%;\n  --sidebar-primary: 240 5.9% 10%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 240 4.8% 95.9%;\n  --sidebar-accent-foreground: 240 5.9% 10%;\n  --sidebar-border: 220 13% 91%;\n  --sidebar-ring: 217.2 91.2% 59.8%;\n}\n\n.dark {\n  --background: 222 47% 11%;\n  --foreground: 210 40% 98%;\n  \n  --card: 222 47% 11%;\n  --card-foreground: 210 40% 98%;\n  \n  --popover: 222 47% 11%;\n  --popover-foreground: 210 40% 98%;\n  \n  --primary: 217.2 91.2% 59.8%;\n  --primary-foreground: 222 47% 11.2%;\n  \n  --secondary: 217.2 32.6% 17.5%;\n  --secondary-foreground: 210 40% 98%;\n  \n  --muted: 217.2 32.6% 17.5%;\n  --muted-foreground: 215 20.2% 65.1%;\n  \n  --accent: 217.2 32.6% 17.5%;\n  --accent-foreground: 210 40% 98%;\n  \n  --destructive: 0 62.8% 30.6%;\n  --destructive-foreground: 210 40% 98%;\n  \n  --border: 217.2 32.6% 17.5%;\n  --input: 217.2 32.6% 17.5%;\n  --ring: 212.7 26.8% 83.9%;\n  \n  --chart-1: 220 70% 50%;\n  --chart-2: 160 60% 45%;\n  --chart-3: 30 80% 55%;\n  --chart-4: 280 65% 60%;\n  --chart-5: 340 75% 55%;\n  \n  --sidebar: 240 5.9% 10%;\n  --sidebar-foreground: 240 4.8% 95.9%;\n  --sidebar-primary: 224.3 76.3% 48%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 240 3.7% 15.9%;\n  --sidebar-accent-foreground: 240 4.8% 95.9%;\n  --sidebar-border: 240 3.7% 15.9%;\n  --sidebar-ring: 217.2 91.2% 59.8%;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n  h1, h2, h3, h4, h5, h6 {\n    @apply font-display tracking-tight text-foreground;\n  }\n}\n","path":null,"size_bytes":4335,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1877,"size_tokens":null},"client/src/pages/account/profile.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport AccountSidebar from \"@/components/layout/AccountSidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport ProductImage from \"@/components/ui/product-image\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { api, clearTokens, getAccessToken } from \"@/lib/api\";\nimport { \n  User, CheckCircle2, XCircle, Search, ChevronDown, LogOut,\n  Monitor, Smartphone, Laptop, Tablet, Globe, Trash2, CreditCard,\n  MapPin, Plus, Home, Building2, Star, Wallet, Shield\n} from \"lucide-react\";\nimport { Link, useLocation, useSearch } from \"wouter\";\nimport { Input } from \"@/components/ui/input\";\nimport { useState, useEffect } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport type { Address, SavedPaymentMethod } from \"@shared/schema\";\n\nexport default function ProfilePage() {\n  const [, setLocation] = useLocation();\n  const searchString = useSearch();\n  const [activeSection, setActiveSection] = useState<'orders' | 'sessions' | 'addresses' | 'payments'>('orders');\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [showAddressDialog, setShowAddressDialog] = useState(false);\n  const [editingAddress, setEditingAddress] = useState<Address | null>(null);\n  const [addressType, setAddressType] = useState<'home' | 'work' | 'other'>('home');\n  const [addressCountry, setAddressCountry] = useState('AE');\n  const [addressIsDefault, setAddressIsDefault] = useState(false);\n\n  // Read section from URL query parameter\n  useEffect(() => {\n    const params = new URLSearchParams(searchString);\n    const section = params.get('section');\n    if (section === 'orders' || section === 'sessions' || section === 'addresses' || section === 'payments') {\n      setActiveSection(section);\n    }\n  }, [searchString]);\n\n  const { data: orders, isLoading: ordersLoading } = useQuery({\n    queryKey: ['orders'],\n    queryFn: api.orders.getAll\n  });\n\n  const { data: currentUser } = useQuery({\n    queryKey: ['current-user'],\n    queryFn: api.auth.me\n  });\n\n  const getUserInitials = () => {\n    if (!currentUser?.name) return 'JM';\n    const names = currentUser.name.split(' ');\n    return names.map((n: string) => n[0]).join('').toUpperCase().slice(0, 2);\n  };\n\n  const { data: sessions, isLoading: sessionsLoading } = useQuery({\n    queryKey: ['auth-sessions'],\n    queryFn: api.auth.getSessions,\n    enabled: activeSection === 'sessions',\n  });\n\n  const { data: addresses, isLoading: addressesLoading } = useQuery({\n    queryKey: ['addresses'],\n    queryFn: api.addresses.getAll,\n    enabled: activeSection === 'addresses',\n  });\n\n  const { data: savedPayments, isLoading: paymentsLoading } = useQuery({\n    queryKey: ['saved-payments'],\n    queryFn: api.payments.getAll,\n    enabled: activeSection === 'payments',\n  });\n\n  // Address mutations\n  const createAddressMutation = useMutation({\n    mutationFn: (data: Partial<Address>) => api.addresses.create(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['addresses'] });\n      toast({ title: \"Address added\", description: \"Your new address has been saved.\" });\n      setShowAddressDialog(false);\n      setEditingAddress(null);\n    },\n    onError: () => {\n      toast({ title: \"Error\", description: \"Failed to add address.\", variant: \"destructive\" });\n    },\n  });\n\n  const updateAddressMutation = useMutation({\n    mutationFn: ({ id, data }: { id: number; data: Partial<Address> }) => api.addresses.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['addresses'] });\n      toast({ title: \"Address updated\", description: \"Your address has been updated.\" });\n      setShowAddressDialog(false);\n      setEditingAddress(null);\n    },\n    onError: () => {\n      toast({ title: \"Error\", description: \"Failed to update address.\", variant: \"destructive\" });\n    },\n  });\n\n  const deleteAddressMutation = useMutation({\n    mutationFn: (id: number) => api.addresses.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['addresses'] });\n      toast({ title: \"Address deleted\", description: \"Your address has been removed.\" });\n    },\n    onError: () => {\n      toast({ title: \"Error\", description: \"Failed to delete address.\", variant: \"destructive\" });\n    },\n  });\n\n  const setDefaultAddressMutation = useMutation({\n    mutationFn: (id: number) => api.addresses.setDefault(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['addresses'] });\n      toast({ title: \"Default updated\", description: \"Your default address has been updated.\" });\n    },\n    onError: () => {\n      toast({ title: \"Error\", description: \"Failed to set default address.\", variant: \"destructive\" });\n    },\n  });\n\n  // Payment mutations\n  const deletePaymentMutation = useMutation({\n    mutationFn: (id: number) => api.payments.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['saved-payments'] });\n      toast({ title: \"Payment method removed\", description: \"Your payment method has been deleted.\" });\n    },\n    onError: () => {\n      toast({ title: \"Error\", description: \"Failed to delete payment method.\", variant: \"destructive\" });\n    },\n  });\n\n  const setDefaultPaymentMutation = useMutation({\n    mutationFn: (id: number) => api.payments.setDefault(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['saved-payments'] });\n      toast({ title: \"Default updated\", description: \"Your default payment method has been updated.\" });\n    },\n    onError: () => {\n      toast({ title: \"Error\", description: \"Failed to set default payment method.\", variant: \"destructive\" });\n    },\n  });\n\n  const revokeSessionMutation = useMutation({\n    mutationFn: (sessionId: string) => api.auth.revokeSession(sessionId),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['auth-sessions'] });\n      toast({ title: \"Session revoked\", description: \"The session has been logged out.\" });\n    },\n    onError: () => {\n      toast({ title: \"Error\", description: \"Failed to revoke session.\", variant: \"destructive\" });\n    },\n  });\n\n  const logoutAllMutation = useMutation({\n    mutationFn: api.auth.logoutAll,\n    onSuccess: () => {\n      clearTokens();\n      setLocation('/auth/login');\n      toast({ title: \"Logged out everywhere\", description: \"All sessions have been ended.\" });\n    },\n    onError: () => {\n      toast({ title: \"Error\", description: \"Failed to log out all sessions.\", variant: \"destructive\" });\n    },\n  });\n\n  const handleLogout = async () => {\n    try {\n      await api.auth.logout();\n    } catch (e) {\n      // Ignore errors\n    }\n    clearTokens();\n    setLocation('/');\n  };\n\n  const getDeviceIcon = (deviceLabel: string) => {\n    const label = deviceLabel.toLowerCase();\n    if (label.includes('mobile') || label.includes('iphone') || label.includes('android')) {\n      return Smartphone;\n    }\n    if (label.includes('tablet') || label.includes('ipad')) {\n      return Tablet;\n    }\n    if (label.includes('mac') || label.includes('windows') || label.includes('linux')) {\n      return Laptop;\n    }\n    if (label.includes('desktop')) {\n      return Monitor;\n    }\n    return Globe;\n  };\n\n  const formatRelativeTime = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins} minute${diffMins > 1 ? 's' : ''} ago`;\n    if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;\n    if (diffDays < 7) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;\n    return date.toLocaleDateString();\n  };\n\n  return (\n    <Layout>\n      <div className=\"bg-[#3D4736] text-white py-2\">\n        <div className=\"container mx-auto px-4 flex justify-between items-center text-xs\">\n          <div className=\"flex gap-4\">\n             {/* Breadcrumbs or secondary nav */}\n          </div>\n          <div className=\"flex items-center gap-4\">\n             {currentUser?.userType && ['vendor', 'admin', 'super_admin'].includes(currentUser.userType) && (\n               <Link href={currentUser.userType === 'admin' || currentUser.userType === 'super_admin' ? '/admin/dashboard' : '/seller/dashboard'}>\n                 <Button size=\"sm\" variant=\"outline\" className=\"h-7 bg-white text-slate-900 border-white hover:bg-slate-100 font-bold text-xs uppercase rounded-full px-4\" data-testid=\"supplier-admin-zone-btn\">\n                   {currentUser.userType === 'admin' || currentUser.userType === 'super_admin' ? 'Admin Area' : 'Supplier Zone'}\n                 </Button>\n               </Link>\n             )}\n             <div className=\"flex items-center gap-2\">\n               <span>{currentUser?.name?.split(' ')[0] || 'John'}</span>\n               <div className=\"w-6 h-6 rounded-full border border-white grid place-items-center\">\n                 <User className=\"h-3 w-3\" />\n               </div>\n             </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-slate-50 min-h-screen py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex flex-col lg:flex-row gap-8\">\n            \n            <AccountSidebar \n              currentUser={currentUser}\n              activeSection={activeSection}\n              onLogout={handleLogout}\n            />\n\n            {/* Main Content */}\n            <main className=\"flex-1\">\n              {activeSection === 'orders' && (\n                <>\n                  <h1 className=\"text-2xl font-display font-bold mb-6 uppercase\">Orders</h1>\n\n                  <div className=\"flex items-center gap-4 mb-6\">\n                     <div className=\"relative flex-1 max-w-md\">\n                       <Search className=\"absolute left-3 top-2.5 h-4 w-4 text-slate-400\" />\n                       <Input placeholder=\"Find Items\" className=\"pl-9 bg-[#EFEBE4] border-transparent\" />\n                     </div>\n                     <Button variant=\"outline\" className=\"bg-[#EFEBE4] border-transparent\">\n                       Last 3 Months <ChevronDown className=\"h-4 w-4 ml-2\" />\n                     </Button>\n                  </div>\n\n                  {/* In Progress Section */}\n                  <div className=\"space-y-4 mb-8\">\n                    <h3 className=\"text-sm font-bold uppercase text-slate-500\">In Progress (1 item)</h3>\n                    \n                    {orders?.filter(o => o.status === 'processing').map(order => (\n                      <div key={order.id} className=\"bg-[#EFEBE4] rounded-lg p-6 border border-slate-200\">\n                        <div className=\"flex justify-between items-start mb-4\">\n                          <div>\n                            <div className=\"font-bold text-green-700 text-sm mb-1\">Delivery by today</div>\n                            <div className=\"text-xs text-muted-foreground\">Dispatched - on time</div>\n                          </div>\n                          <Link href={`/account/orders/${order.id}/track`}>\n                            <Button className=\"bg-[#3D4736] hover:bg-[#2A3324] text-xs h-8\" data-testid={`track-order-${order.id}`}>\n                              TRACK YOUR ORDER\n                            </Button>\n                          </Link>\n                        </div>\n\n                        <div className=\"flex gap-4 items-center bg-white p-4 rounded border border-slate-100\">\n                          <div className=\"w-16 h-16 bg-slate-50 rounded p-2 flex-shrink-0\">\n                            <ProductImage src={order.items[0].image} className=\"w-full h-full object-contain\" alt=\"Order item\" placeholderClassName=\"w-full h-full\" />\n                          </div>\n                          <div className=\"flex-1\">\n                            <h4 className=\"font-bold text-sm text-slate-900\">{order.items[0].name}</h4>\n                            <div className=\"font-bold text-sm mt-1\">AED {order.items[0].price.toFixed(2)}</div>\n                          </div>\n                        </div>\n                        \n                        <div className=\"text-right text-xs text-muted-foreground mt-2\">\n                          Order ID: #{order.id}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n                  {/* Completed Section */}\n                  <div className=\"space-y-4\">\n                    <h3 className=\"text-sm font-bold uppercase text-slate-500\">Completed</h3>\n\n                    {orders?.filter(o => o.status === 'delivered' || o.status === 'cancelled').map(order => (\n                      <div key={order.id} className=\"bg-[#EFEBE4] rounded-lg p-6 border border-slate-200 opacity-90\">\n                        <div className=\"flex justify-between items-start mb-4\">\n                          <div className=\"flex items-center gap-2\">\n                            {order.status === 'delivered' ? (\n                              <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\n                            ) : (\n                              <XCircle className=\"h-5 w-5 text-slate-400\" />\n                            )}\n                            <div>\n                              <div className=\"font-bold text-sm\">\n                                {order.status === 'delivered' ? `Delivered on ${order.createdAt ? new Date(order.createdAt).toLocaleDateString('en-US', { day: 'numeric', month: 'short' }) : 'N/A'}` : `Cancelled on ${order.createdAt ? new Date(order.createdAt).toLocaleDateString('en-US', { day: 'numeric', month: 'short' }) : 'N/A'}`}\n                              </div>\n                            </div>\n                          </div>\n                          <Link href={`/account/orders/${order.id}/details`}>\n                            <Button variant=\"outline\" size=\"sm\" className=\"h-8 text-xs border-slate-300\" data-testid={`view-details-${order.id}`}>\n                              {order.status === 'cancelled' ? 'TRACK REFUND' : 'VIEW DETAILS'}\n                            </Button>\n                          </Link>\n                        </div>\n\n                        <div className=\"flex gap-4 items-center bg-white p-4 rounded border border-slate-100\">\n                          <div className=\"w-16 h-16 bg-slate-50 rounded p-2 flex-shrink-0\">\n                            <ProductImage src={order.items[0].image} className=\"w-full h-full object-contain\" alt=\"Order item\" placeholderClassName=\"w-full h-full\" />\n                          </div>\n                          <div className=\"flex-1\">\n                            <h4 className=\"font-bold text-sm text-slate-900\">{order.items[0].name}</h4>\n                            <div className=\"font-bold text-sm mt-1\">AED {order.items[0].price.toFixed(2)}</div>\n                          </div>\n                        </div>\n                        \n                        <div className=\"text-right text-xs text-muted-foreground mt-2\">\n                          Order ID: #{order.id}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </>\n              )}\n\n              {activeSection === 'sessions' && (\n                <>\n                  <div className=\"flex items-center justify-between mb-6\">\n                    <h1 className=\"text-2xl font-display font-bold uppercase\">Active Sessions</h1>\n                    <Button \n                      variant=\"destructive\" \n                      size=\"sm\"\n                      onClick={() => logoutAllMutation.mutate()}\n                      disabled={logoutAllMutation.isPending}\n                      data-testid=\"button-logout-all\"\n                    >\n                      <LogOut className=\"h-4 w-4 mr-2\" />\n                      {logoutAllMutation.isPending ? 'Logging out...' : 'Log Out All Devices'}\n                    </Button>\n                  </div>\n\n                  <p className=\"text-sm text-muted-foreground mb-6\">\n                    These are the devices currently logged into your account. You can revoke access to any session you don't recognize.\n                  </p>\n\n                  {sessionsLoading ? (\n                    <div className=\"space-y-4\">\n                      {[1, 2, 3].map(i => (\n                        <div key={i} className=\"bg-[#EFEBE4] rounded-lg p-6 border border-slate-200 animate-pulse\">\n                          <div className=\"h-5 bg-slate-300 rounded w-1/3 mb-3\" />\n                          <div className=\"h-4 bg-slate-200 rounded w-1/2\" />\n                        </div>\n                      ))}\n                    </div>\n                  ) : sessions?.length === 0 ? (\n                    <div className=\"bg-[#EFEBE4] rounded-lg p-8 text-center\">\n                      <Monitor className=\"h-12 w-12 mx-auto text-slate-400 mb-4\" />\n                      <p className=\"text-slate-600\">No active sessions found.</p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      {sessions?.map(session => {\n                        const DeviceIcon = getDeviceIcon(session.deviceLabel);\n                        return (\n                          <div \n                            key={session.id} \n                            className={`bg-[#EFEBE4] rounded-lg p-6 border ${session.isCurrent ? 'border-green-400 ring-2 ring-green-100' : 'border-slate-200'}`}\n                            data-testid={`session-card-${session.id}`}\n                          >\n                            <div className=\"flex items-start justify-between\">\n                              <div className=\"flex items-start gap-4\">\n                                <div className={`w-12 h-12 rounded-full flex items-center justify-center ${session.isCurrent ? 'bg-green-100 text-green-700' : 'bg-slate-200 text-slate-600'}`}>\n                                  <DeviceIcon className=\"h-6 w-6\" />\n                                </div>\n                                <div>\n                                  <div className=\"flex items-center gap-2\">\n                                    <h3 className=\"font-bold text-sm\">{session.deviceLabel}</h3>\n                                    {session.isCurrent && (\n                                      <Badge className=\"bg-green-600 text-white text-xs\">Current Session</Badge>\n                                    )}\n                                  </div>\n                                  <p className=\"text-xs text-muted-foreground mt-1\">\n                                    IP: {session.ipAddress}\n                                  </p>\n                                  <p className=\"text-xs text-muted-foreground mt-1\">\n                                    Last active: {formatRelativeTime(session.lastUsedAt)}\n                                  </p>\n                                  <p className=\"text-xs text-muted-foreground\">\n                                    Started: {new Date(session.createdAt).toLocaleDateString()} at {new Date(session.createdAt).toLocaleTimeString()}\n                                  </p>\n                                </div>\n                              </div>\n                              {!session.isCurrent && (\n                                <Button\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  className=\"text-red-600 border-red-200 hover:bg-red-50 hover:text-red-700\"\n                                  onClick={() => revokeSessionMutation.mutate(session.id)}\n                                  disabled={revokeSessionMutation.isPending}\n                                  data-testid={`button-revoke-${session.id}`}\n                                >\n                                  <Trash2 className=\"h-4 w-4 mr-1\" />\n                                  Revoke\n                                </Button>\n                              )}\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  )}\n                </>\n              )}\n\n              {activeSection === 'addresses' && (\n                <>\n                  <div className=\"flex items-center justify-between mb-6\">\n                    <h1 className=\"text-2xl font-display font-bold uppercase\">Saved Addresses</h1>\n                    <Dialog open={showAddressDialog} onOpenChange={(open) => {\n                      if (!open) {\n                        setEditingAddress(null);\n                      }\n                      setShowAddressDialog(open);\n                    }}>\n                      <DialogTrigger asChild>\n                        <Button \n                          className=\"bg-[#3D4736] hover:bg-[#2A3324]\" \n                          data-testid=\"button-add-address\"\n                          onClick={() => {\n                            setEditingAddress(null);\n                            setAddressType('home');\n                            setAddressCountry('AE');\n                            setAddressIsDefault(false);\n                          }}\n                        >\n                          <Plus className=\"h-4 w-4 mr-2\" />\n                          Add New Address\n                        </Button>\n                      </DialogTrigger>\n                      <DialogContent className=\"sm:max-w-md\">\n                        <DialogHeader>\n                          <DialogTitle>{editingAddress ? 'Edit Address' : 'Add New Address'}</DialogTitle>\n                        </DialogHeader>\n                        <form onSubmit={(e) => {\n                          e.preventDefault();\n                          const formData = new FormData(e.currentTarget);\n                          const addressData = {\n                            label: formData.get('label') as string,\n                            addressType: addressType,\n                            fullName: formData.get('fullName') as string,\n                            phone: formData.get('phone') as string,\n                            addressLine1: formData.get('addressLine1') as string,\n                            addressLine2: formData.get('addressLine2') as string || undefined,\n                            city: formData.get('city') as string,\n                            state: formData.get('state') as string,\n                            postalCode: formData.get('postalCode') as string,\n                            country: addressCountry,\n                            isDefault: addressIsDefault,\n                          };\n                          if (editingAddress) {\n                            updateAddressMutation.mutate({ id: editingAddress.id, data: addressData });\n                          } else {\n                            createAddressMutation.mutate(addressData);\n                          }\n                        }} className=\"space-y-4\">\n                          <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                              <Label htmlFor=\"label\">Address Label</Label>\n                              <Input id=\"label\" name=\"label\" placeholder=\"e.g., Home, Office\" defaultValue={editingAddress?.label || ''} required />\n                            </div>\n                            <div>\n                              <Label htmlFor=\"addressType\">Type</Label>\n                              <Select value={addressType} onValueChange={(v) => setAddressType(v as 'home' | 'work' | 'other')}>\n                                <SelectTrigger>\n                                  <SelectValue />\n                                </SelectTrigger>\n                                <SelectContent>\n                                  <SelectItem value=\"home\">Home</SelectItem>\n                                  <SelectItem value=\"work\">Work</SelectItem>\n                                  <SelectItem value=\"other\">Other</SelectItem>\n                                </SelectContent>\n                              </Select>\n                            </div>\n                          </div>\n                          <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                              <Label htmlFor=\"fullName\">Full Name</Label>\n                              <Input id=\"fullName\" name=\"fullName\" defaultValue={editingAddress?.fullName || ''} required />\n                            </div>\n                            <div>\n                              <Label htmlFor=\"phone\">Phone</Label>\n                              <Input id=\"phone\" name=\"phone\" defaultValue={editingAddress?.phone || ''} required />\n                            </div>\n                          </div>\n                          <div>\n                            <Label htmlFor=\"addressLine1\">Address Line 1</Label>\n                            <Input id=\"addressLine1\" name=\"addressLine1\" defaultValue={editingAddress?.addressLine1 || ''} required />\n                          </div>\n                          <div>\n                            <Label htmlFor=\"addressLine2\">Address Line 2</Label>\n                            <Input id=\"addressLine2\" name=\"addressLine2\" defaultValue={editingAddress?.addressLine2 || ''} />\n                          </div>\n                          <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                              <Label htmlFor=\"city\">City</Label>\n                              <Input id=\"city\" name=\"city\" defaultValue={editingAddress?.city || ''} required />\n                            </div>\n                            <div>\n                              <Label htmlFor=\"state\">State</Label>\n                              <Input id=\"state\" name=\"state\" defaultValue={editingAddress?.state || ''} required />\n                            </div>\n                          </div>\n                          <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                              <Label htmlFor=\"postalCode\">Postal Code</Label>\n                              <Input id=\"postalCode\" name=\"postalCode\" defaultValue={editingAddress?.postalCode || ''} required />\n                            </div>\n                            <div>\n                              <Label htmlFor=\"country\">Country</Label>\n                              <Select value={addressCountry} onValueChange={setAddressCountry}>\n                                <SelectTrigger>\n                                  <SelectValue />\n                                </SelectTrigger>\n                                <SelectContent>\n                                  <SelectItem value=\"AE\">UAE</SelectItem>\n                                  <SelectItem value=\"IN\">India</SelectItem>\n                                  <SelectItem value=\"US\">United States</SelectItem>\n                                  <SelectItem value=\"GB\">United Kingdom</SelectItem>\n                                  <SelectItem value=\"SA\">Saudi Arabia</SelectItem>\n                                </SelectContent>\n                              </Select>\n                            </div>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <Checkbox id=\"isDefault\" checked={addressIsDefault} onCheckedChange={(checked) => setAddressIsDefault(!!checked)} />\n                            <Label htmlFor=\"isDefault\">Set as default address</Label>\n                          </div>\n                          <div className=\"flex justify-end gap-2\">\n                            <Button type=\"button\" variant=\"outline\" onClick={() => { setShowAddressDialog(false); setEditingAddress(null); }}>Cancel</Button>\n                            <Button type=\"submit\" className=\"bg-[#3D4736] hover:bg-[#2A3324]\">\n                              {editingAddress ? 'Update' : 'Save'} Address\n                            </Button>\n                          </div>\n                        </form>\n                      </DialogContent>\n                    </Dialog>\n                  </div>\n\n                  <p className=\"text-sm text-muted-foreground mb-6\">\n                    Manage your delivery addresses. You can set a default address for faster checkout.\n                  </p>\n\n                  {addressesLoading ? (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      {[1, 2].map(i => (\n                        <div key={i} className=\"bg-[#EFEBE4] rounded-lg p-6 border border-slate-200 animate-pulse\">\n                          <div className=\"h-5 bg-slate-300 rounded w-1/3 mb-3\" />\n                          <div className=\"h-4 bg-slate-200 rounded w-full mb-2\" />\n                          <div className=\"h-4 bg-slate-200 rounded w-2/3\" />\n                        </div>\n                      ))}\n                    </div>\n                  ) : addresses?.length === 0 ? (\n                    <div className=\"bg-[#EFEBE4] rounded-lg p-8 text-center\">\n                      <MapPin className=\"h-12 w-12 mx-auto text-slate-400 mb-4\" />\n                      <p className=\"text-slate-600\">No addresses saved yet.</p>\n                      <p className=\"text-sm text-slate-500 mt-2\">Add an address to make checkout faster.</p>\n                    </div>\n                  ) : (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      {addresses?.map(address => (\n                        <div \n                          key={address.id} \n                          className={`bg-[#EFEBE4] rounded-lg p-6 border ${address.isDefault ? 'border-orange-400 ring-2 ring-orange-100' : 'border-slate-200'}`}\n                          data-testid={`address-card-${address.id}`}\n                        >\n                          <div className=\"flex items-start justify-between mb-3\">\n                            <div className=\"flex items-center gap-2\">\n                              {address.addressType === 'home' ? <Home className=\"h-5 w-5 text-[#3D4736]\" /> : <Building2 className=\"h-5 w-5 text-[#3D4736]\" />}\n                              <h3 className=\"font-bold text-sm\">{address.label}</h3>\n                              {address.isDefault && (\n                                <Badge className=\"bg-orange-600 text-white text-xs\">Default</Badge>\n                              )}\n                              {address.isVerified && (\n                                <Badge variant=\"outline\" className=\"text-green-600 border-green-200 text-xs\">\n                                  <CheckCircle2 className=\"h-3 w-3 mr-1\" /> Verified\n                                </Badge>\n                              )}\n                            </div>\n                          </div>\n                          <div className=\"text-sm text-slate-700 space-y-1\">\n                            <p className=\"font-medium\">{address.fullName}</p>\n                            <p>{address.addressLine1}</p>\n                            {address.addressLine2 && <p>{address.addressLine2}</p>}\n                            <p>{address.city}, {address.state} {address.postalCode}</p>\n                            <p>{address.country === 'AE' ? 'UAE' : address.country === 'IN' ? 'India' : address.country === 'US' ? 'USA' : address.country === 'GB' ? 'UK' : address.country}</p>\n                            <p className=\"text-slate-500\">{address.phone}</p>\n                          </div>\n                          <div className=\"flex gap-2 mt-4 pt-4 border-t border-slate-200\">\n                            <Button \n                              variant=\"outline\" \n                              size=\"sm\" \n                              className=\"text-xs\"\n                              onClick={() => { \n                                setEditingAddress(address); \n                                setAddressType(address.addressType as 'home' | 'work' | 'other');\n                                setAddressCountry(address.country);\n                                setAddressIsDefault(address.isDefault || false);\n                                setShowAddressDialog(true); \n                              }}\n                              data-testid={`button-edit-address-${address.id}`}\n                            >\n                              Edit\n                            </Button>\n                            {!address.isDefault && (\n                              <Button \n                                variant=\"outline\" \n                                size=\"sm\" \n                                className=\"text-xs\"\n                                onClick={() => setDefaultAddressMutation.mutate(address.id)}\n                                data-testid={`button-set-default-${address.id}`}\n                              >\n                                <Star className=\"h-3 w-3 mr-1\" /> Set Default\n                              </Button>\n                            )}\n                            <Button \n                              variant=\"outline\" \n                              size=\"sm\" \n                              className=\"text-xs text-red-600 border-red-200 hover:bg-red-50\"\n                              onClick={() => deleteAddressMutation.mutate(address.id)}\n                              data-testid={`button-delete-address-${address.id}`}\n                            >\n                              <Trash2 className=\"h-3 w-3 mr-1\" /> Delete\n                            </Button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </>\n              )}\n\n              {activeSection === 'payments' && (\n                <>\n                  <div className=\"flex items-center justify-between mb-6\">\n                    <h1 className=\"text-2xl font-display font-bold uppercase\">Saved Payment Methods</h1>\n                  </div>\n\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\n                    <div className=\"flex gap-3\">\n                      <Shield className=\"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n                      <div className=\"text-sm\">\n                        <p className=\"font-medium text-blue-800\">Secure Payment Storage</p>\n                        <p className=\"text-blue-600 mt-1\">\n                          Your payment information is securely stored in compliance with PCI-DSS standards. \n                          We only store the last 4 digits and a secure token - never your full card details.\n                          {/* Regulatory compliance for India (RBI), UAE (Central Bank), US, and UK */}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <p className=\"text-sm text-muted-foreground mb-6\">\n                    Payment methods saved during checkout will appear here. You can manage and remove saved methods.\n                  </p>\n\n                  {paymentsLoading ? (\n                    <div className=\"space-y-4\">\n                      {[1, 2].map(i => (\n                        <div key={i} className=\"bg-[#EFEBE4] rounded-lg p-6 border border-slate-200 animate-pulse\">\n                          <div className=\"h-5 bg-slate-300 rounded w-1/4 mb-3\" />\n                          <div className=\"h-4 bg-slate-200 rounded w-1/2\" />\n                        </div>\n                      ))}\n                    </div>\n                  ) : savedPayments?.length === 0 ? (\n                    <div className=\"bg-[#EFEBE4] rounded-lg p-8 text-center\">\n                      <Wallet className=\"h-12 w-12 mx-auto text-slate-400 mb-4\" />\n                      <p className=\"text-slate-600\">No payment methods saved yet.</p>\n                      <p className=\"text-sm text-slate-500 mt-2\">Payment methods will be saved automatically during checkout when you choose \"Save for future purchases\".</p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      {savedPayments?.map(payment => (\n                        <div \n                          key={payment.id} \n                          className={`bg-[#EFEBE4] rounded-lg p-6 border ${payment.isDefault ? 'border-orange-400 ring-2 ring-orange-100' : 'border-slate-200'}`}\n                          data-testid={`payment-card-${payment.id}`}\n                        >\n                          <div className=\"flex items-start justify-between\">\n                            <div className=\"flex items-start gap-4\">\n                              <div className=\"w-12 h-12 rounded-lg bg-white flex items-center justify-center border border-slate-200\">\n                                {payment.cardBrand === 'visa' && <span className=\"text-blue-600 font-bold text-lg\">VISA</span>}\n                                {payment.cardBrand === 'mastercard' && <span className=\"text-orange-600 font-bold text-sm\">MC</span>}\n                                {payment.cardBrand === 'amex' && <span className=\"text-blue-800 font-bold text-sm\">AMEX</span>}\n                                {!['visa', 'mastercard', 'amex'].includes(payment.cardBrand || '') && <CreditCard className=\"h-6 w-6 text-slate-400\" />}\n                              </div>\n                              <div>\n                                <div className=\"flex items-center gap-2\">\n                                  <h3 className=\"font-bold text-sm capitalize\">{payment.cardBrand || payment.paymentMethodType}</h3>\n                                  {payment.isDefault && (\n                                    <Badge className=\"bg-orange-600 text-white text-xs\">Default</Badge>\n                                  )}\n                                </div>\n                                {payment.lastFourDigits && (\n                                  <p className=\"text-sm text-slate-600 mt-1\">   {payment.lastFourDigits}</p>\n                                )}\n                                {payment.cardholderName && (\n                                  <p className=\"text-xs text-slate-500\">{payment.cardholderName}</p>\n                                )}\n                                {payment.expiryMonth && payment.expiryYear && (\n                                  <p className=\"text-xs text-slate-500\">Expires {payment.expiryMonth}/{payment.expiryYear}</p>\n                                )}\n                                {payment.maskedUpiId && (\n                                  <p className=\"text-sm text-slate-600 mt-1\">UPI: {payment.maskedUpiId}</p>\n                                )}\n                                {payment.bankName && (\n                                  <p className=\"text-xs text-slate-500\">{payment.bankName}</p>\n                                )}\n                                <p className=\"text-xs text-slate-400 mt-1\">\n                                  {payment.country === 'IN' && payment.hasRbiConsent && ' RBI consent provided'}\n                                  {payment.country === 'AE' && ' UAE Central Bank compliant'}\n                                </p>\n                              </div>\n                            </div>\n                            <div className=\"flex gap-2\">\n                              {!payment.isDefault && (\n                                <Button\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  className=\"text-xs\"\n                                  onClick={() => setDefaultPaymentMutation.mutate(payment.id)}\n                                  data-testid={`button-set-default-payment-${payment.id}`}\n                                >\n                                  <Star className=\"h-3 w-3 mr-1\" /> Set Default\n                                </Button>\n                              )}\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                className=\"text-xs text-red-600 border-red-200 hover:bg-red-50\"\n                                onClick={() => deletePaymentMutation.mutate(payment.id)}\n                                data-testid={`button-delete-payment-${payment.id}`}\n                              >\n                                <Trash2 className=\"h-4 w-4\" />\n                              </Button>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </>\n              )}\n\n            </main>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":41383,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4419,"size_tokens":null},"client/src/components/ui/sonner.tsx":{"content":"\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","path":null,"size_bytes":894,"size_tokens":null},"client/src/pages/auth/register.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardDescription } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Link, useLocation } from \"wouter\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { api, storeTokens } from \"@/lib/api\";\n\nexport default function RegisterPage() {\n  const [, setLocation] = useLocation();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const { toast } = useToast();\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    userType: \"customer\",\n    companyName: \"\",\n    agreeTerms: false,\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n    \n    if (formData.password !== formData.confirmPassword) {\n      setError(\"Passwords do not match\");\n      return;\n    }\n\n    if (!formData.agreeTerms) {\n      setError(\"Please agree to the terms and conditions\");\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const data = await api.auth.register(\n        formData.name,\n        formData.email,\n        formData.password,\n        formData.userType\n      );\n\n      // Store JWT tokens\n      storeTokens(data.accessToken, data.refreshToken, data.expiresIn);\n      localStorage.setItem('user', JSON.stringify(data.user));\n\n      toast({\n        title: \"Account created!\",\n        description: \"Welcome to ArmoredMart. You are now logged in.\",\n      });\n\n      // Redirect based on user type\n      if (data.user.userType === 'vendor') {\n        setLocation('/seller/dashboard');\n      } else {\n        setLocation('/');\n      }\n    } catch (err: any) {\n      console.error(\"Registration failed\", err);\n      setError(err.message || \"Failed to connect to server. Please try again.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const updateFormData = (field: string, value: string | boolean) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  return (\n    <Layout>\n      <div className=\"container mx-auto px-4 py-12 flex justify-center items-center min-h-[calc(100vh-300px)] bg-slate-50\">\n        <Card className=\"w-full max-w-lg shadow-xl border-0\">\n          <CardHeader className=\"text-center space-y-2 pb-6\">\n            <h1 className=\"text-3xl font-display font-bold text-primary\">ARMOREDMART</h1>\n            <CardDescription className=\"text-base\">Create your account to access the marketplace</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-5\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"name\">Full Name</Label>\n                <Input \n                  id=\"name\" \n                  type=\"text\" \n                  placeholder=\"John Doe\" \n                  value={formData.name}\n                  onChange={(e) => updateFormData(\"name\", e.target.value)}\n                  required \n                  className=\"h-11\"\n                  data-testid=\"input-name\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\">Email Address</Label>\n                <Input \n                  id=\"email\" \n                  type=\"email\" \n                  placeholder=\"name@company.com\" \n                  value={formData.email}\n                  onChange={(e) => updateFormData(\"email\", e.target.value)}\n                  required \n                  className=\"h-11\"\n                  data-testid=\"input-email\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"password\">Password</Label>\n                  <Input \n                    id=\"password\" \n                    type=\"password\" \n                    required \n                    className=\"h-11\"\n                    value={formData.password}\n                    onChange={(e) => updateFormData(\"password\", e.target.value)}\n                    data-testid=\"input-password\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n                  <Input \n                    id=\"confirmPassword\" \n                    type=\"password\" \n                    required \n                    className=\"h-11\"\n                    value={formData.confirmPassword}\n                    onChange={(e) => updateFormData(\"confirmPassword\", e.target.value)}\n                    data-testid=\"input-confirm-password\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <Label>Account Type</Label>\n                <RadioGroup \n                  value={formData.userType} \n                  onValueChange={(value) => updateFormData(\"userType\", value)}\n                  className=\"flex gap-6\"\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"customer\" id=\"customer\" data-testid=\"radio-customer\" />\n                    <Label htmlFor=\"customer\" className=\"font-normal cursor-pointer\">Customer / Buyer</Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"vendor\" id=\"vendor\" data-testid=\"radio-vendor\" />\n                    <Label htmlFor=\"vendor\" className=\"font-normal cursor-pointer\">Vendor / Supplier</Label>\n                  </div>\n                </RadioGroup>\n              </div>\n\n              {formData.userType === \"vendor\" && (\n                <div className=\"space-y-2 animate-in fade-in duration-200\">\n                  <Label htmlFor=\"companyName\">Company Name</Label>\n                  <Input \n                    id=\"companyName\" \n                    type=\"text\" \n                    placeholder=\"Your Company Ltd.\" \n                    value={formData.companyName}\n                    onChange={(e) => updateFormData(\"companyName\", e.target.value)}\n                    required={formData.userType === \"vendor\"}\n                    className=\"h-11\"\n                    data-testid=\"input-company-name\"\n                  />\n                </div>\n              )}\n\n              {error && (\n                <div className=\"bg-red-50 text-red-600 p-3 rounded text-sm border border-red-200\">\n                  {error}\n                </div>\n              )}\n              \n              <div className=\"flex items-start space-x-2\">\n                <Checkbox \n                  id=\"terms\" \n                  checked={formData.agreeTerms}\n                  onCheckedChange={(checked) => updateFormData(\"agreeTerms\", checked as boolean)}\n                  data-testid=\"checkbox-terms\"\n                />\n                <label\n                  htmlFor=\"terms\"\n                  className=\"text-sm leading-tight peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n                >\n                  I agree to the <Link href=\"/terms\" className=\"text-primary hover:underline\">Terms of Service</Link> and <Link href=\"/privacy\" className=\"text-primary hover:underline\">Privacy Policy</Link>\n                </label>\n              </div>\n\n              <Button \n                type=\"submit\" \n                className=\"w-full h-12 text-base font-bold bg-orange-600 hover:bg-orange-700\" \n                disabled={isLoading}\n                data-testid=\"button-register\"\n              >\n                {isLoading ? \"Creating Account...\" : \"CREATE ACCOUNT\"}\n              </Button>\n            </form>\n            \n            <div className=\"mt-6 text-center text-sm text-muted-foreground\">\n              Already have an account? <Link href=\"/auth/login\" className=\"text-primary font-bold hover:underline\">Sign in here</Link>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":8280,"size_tokens":null},"client/src/pages/checkout-success.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { CheckCircle2, Package, ArrowRight } from \"lucide-react\";\nimport { Link, useSearch } from \"wouter\";\nimport { useEffect, useState } from \"react\";\n\nexport default function CheckoutSuccessPage() {\n  const search = useSearch();\n  const sessionId = new URLSearchParams(search).get('session_id');\n  const [orderNumber] = useState(() => \n    `ORD-${Date.now().toString(36).toUpperCase()}`\n  );\n\n  useEffect(() => {\n    if (sessionId) {\n      console.log(\"Checkout session completed:\", sessionId);\n    }\n  }, [sessionId]);\n\n  return (\n    <Layout>\n      <div className=\"bg-slate-50 min-h-screen pb-20\">\n        <div className=\"container mx-auto px-4 py-20 text-center max-w-2xl\">\n          <div className=\"bg-white rounded-2xl p-8 shadow-lg\">\n            <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <CheckCircle2 className=\"h-10 w-10 text-green-600\" />\n            </div>\n            \n            <h1 className=\"text-3xl font-display font-bold mb-2 text-slate-900\">\n              Order Confirmed!\n            </h1>\n            \n            <p className=\"text-lg text-slate-600 mb-6\">\n              Thank you for your purchase. Your order has been successfully placed.\n            </p>\n\n            <div className=\"bg-slate-50 rounded-lg p-4 mb-6\">\n              <div className=\"text-sm text-slate-500 mb-1\">Order Number</div>\n              <div className=\"text-xl font-bold font-mono\">{orderNumber}</div>\n            </div>\n\n            <div className=\"flex items-center justify-center gap-4 text-sm text-slate-600 mb-8\">\n              <div className=\"flex items-center gap-2\">\n                <Package className=\"h-4 w-4\" />\n                <span>Estimated delivery: 3-5 business days</span>\n              </div>\n            </div>\n\n            <p className=\"text-sm text-slate-500 mb-8\">\n              A confirmation email has been sent to your email address with order details and tracking information.\n            </p>\n\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Link href=\"/orders\">\n                <Button variant=\"outline\" className=\"w-full sm:w-auto\">\n                  View My Orders\n                </Button>\n              </Link>\n              <Link href=\"/products\">\n                <Button className=\"w-full sm:w-auto bg-orange-600 hover:bg-orange-700\">\n                  Continue Shopping\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\n                </Button>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":2711,"size_tokens":null},"client/src/pages/products.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Input } from \"@/components/ui/input\";\nimport { Separator } from \"@/components/ui/separator\";\nimport ProductImage from \"@/components/ui/product-image\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport type { Product } from \"@shared/schema\";\nimport { Filter, SlidersHorizontal, ChevronDown, ChevronRight, ChevronLeft, Star, Search, X } from \"lucide-react\";\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\nimport { useLocation, Link } from \"wouter\";\nimport { useState, useMemo, useEffect } from \"react\";\nimport {\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselNext,\n  CarouselPrevious,\n} from \"@/components/ui/carousel\";\n\nexport default function ProductsPage() {\n  const [location, setLocation] = useLocation();\n  const searchParams = new URLSearchParams(window.location.search);\n  const initialSearch = searchParams.get(\"search\") || \"\";\n  const initialCategory = searchParams.get(\"category\") || \"\";\n\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(initialSearch);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [selectedBrands, setSelectedBrands] = useState<string[]>([]);\n  const [selectedDepartments, setSelectedDepartments] = useState<string[]>([]);\n  const [selectedMaterials, setSelectedMaterials] = useState<string[]>([]);\n  const [selectedSurfaceTypes, setSelectedSurfaceTypes] = useState<string[]>([]);\n  const [minPrice, setMinPrice] = useState(\"\");\n  const [maxPrice, setMaxPrice] = useState(\"\");\n  const [sortBy, setSortBy] = useState(\"best\");\n\n  useEffect(() => {\n    const token = localStorage.getItem('auth_token');\n    setIsAuthenticated(!!token);\n  }, []);\n\n  const { data: products } = useQuery({\n    queryKey: ['products'],\n    queryFn: () => api.products.getAll()\n  });\n\n  const { data: categories } = useQuery({\n    queryKey: ['categories'],\n    queryFn: api.categories.getAll\n  });\n\n  const { data: filterOptions } = useQuery({\n    queryKey: ['filters'],\n    queryFn: api.filters.get\n  });\n\n  const { data: topSellingProducts } = useQuery({\n    queryKey: ['topSellingProducts'],\n    queryFn: api.products.getTopSelling\n  });\n\n  const filteredProducts = useMemo(() => {\n    if (!products) return [];\n    \n    let result = [...products];\n\n    if (searchTerm.trim()) {\n      const term = searchTerm.toLowerCase();\n      result = result.filter(p => \n        p.name.toLowerCase().includes(term) ||\n        p.description?.toLowerCase().includes(term) ||\n        p.sku?.toLowerCase().includes(term) ||\n        p.make?.toLowerCase().includes(term) ||\n        p.model?.toLowerCase().includes(term)\n      );\n    }\n\n    if (selectedBrands.length > 0) {\n      result = result.filter(p => p.make && selectedBrands.includes(p.make));\n    }\n\n    if (selectedDepartments.length > 0) {\n      result = result.filter(p => p.department && selectedDepartments.includes(p.department));\n    }\n\n    if (minPrice) {\n      result = result.filter(p => parseFloat(p.price) >= parseFloat(minPrice));\n    }\n\n    if (maxPrice) {\n      result = result.filter(p => parseFloat(p.price) <= parseFloat(maxPrice));\n    }\n\n    if (sortBy === \"price_low\") {\n      result.sort((a, b) => parseFloat(a.price) - parseFloat(b.price));\n    } else if (sortBy === \"price_high\") {\n      result.sort((a, b) => parseFloat(b.price) - parseFloat(a.price));\n    } else if (sortBy === \"name\") {\n      result.sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    return result;\n  }, [products, searchTerm, selectedBrands, selectedDepartments, minPrice, maxPrice, sortBy]);\n\n  const searchSuggestions = useMemo(() => {\n    if (!products || !searchTerm.trim() || searchTerm.length < 2) return [];\n    const term = searchTerm.toLowerCase();\n    return products\n      .filter(p => \n        p.name.toLowerCase().includes(term) ||\n        p.sku?.toLowerCase().includes(term)\n      )\n      .slice(0, 6);\n  }, [products, searchTerm]);\n\n  const uniqueDepartments = useMemo(() => {\n    if (!products) return [];\n    const depts = products.map(p => p.department).filter(Boolean) as string[];\n    return Array.from(new Set(depts));\n  }, [products]);\n\n  const toggleBrand = (brand: string) => {\n    setSelectedBrands(prev => \n      prev.includes(brand) ? prev.filter(b => b !== brand) : [...prev, brand]\n    );\n  };\n\n  const toggleDepartment = (dept: string) => {\n    setSelectedDepartments(prev => \n      prev.includes(dept) ? prev.filter(d => d !== dept) : [...prev, dept]\n    );\n  };\n\n  const clearFilters = () => {\n    setSearchTerm(\"\");\n    setSelectedBrands([]);\n    setSelectedDepartments([]);\n    setSelectedMaterials([]);\n    setSelectedSurfaceTypes([]);\n    setMinPrice(\"\");\n    setMaxPrice(\"\");\n  };\n\n  const hasActiveFilters = searchTerm || selectedBrands.length > 0 || selectedDepartments.length > 0 || minPrice || maxPrice;\n\n  const SECTION_TITLE = \"font-bold text-[10px] uppercase text-slate-800 mb-2 tracking-wide\";\n  \n  const FilterSidebar = () => (\n    <div className=\"space-y-6 pr-4 bg-[#EFEBE4] min-h-screen\">\n      \n      {hasActiveFilters && (\n        <Button \n          variant=\"outline\" \n          size=\"sm\" \n          onClick={clearFilters}\n          className=\"w-full rounded-none text-xs border-slate-400\"\n          data-testid=\"button-clear-filters\"\n        >\n          <X className=\"h-3 w-3 mr-1\" /> Clear All Filters\n        </Button>\n      )}\n\n      <div className=\"border-b border-slate-300 pb-4\">\n        <h3 className={SECTION_TITLE}>Brand</h3>\n        <div className=\"space-y-2 max-h-32 overflow-y-auto pr-2 custom-scrollbar\">\n          {filterOptions?.brands.map((brand) => (\n            <div key={brand} className=\"flex items-center space-x-2\">\n              <Checkbox \n                id={`brand-${brand}`} \n                checked={selectedBrands.includes(brand)}\n                onCheckedChange={() => toggleBrand(brand)}\n                className=\"rounded-none border-slate-400 h-3 w-3 data-[state=checked]:bg-[#3D4736] data-[state=checked]:border-[#3D4736]\" \n                data-testid={`checkbox-brand-${brand}`}\n              />\n              <label htmlFor={`brand-${brand}`} className=\"text-[10px] font-medium leading-none cursor-pointer text-slate-600 hover:text-black uppercase\">\n                {brand}\n              </label>\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      <div className=\"border-b border-slate-300 pb-4\">\n        <h3 className={SECTION_TITLE}>Price (AED)</h3>\n        <div className=\"flex gap-2\">\n          <Input \n            type=\"number\" \n            placeholder=\"Min\" \n            value={minPrice}\n            onChange={(e) => setMinPrice(e.target.value)}\n            className=\"h-6 text-[10px] rounded-none bg-white border-slate-300\" \n            data-testid=\"input-min-price\"\n          />\n          <Input \n            type=\"number\" \n            placeholder=\"Max\" \n            value={maxPrice}\n            onChange={(e) => setMaxPrice(e.target.value)}\n            className=\"h-6 text-[10px] rounded-none bg-white border-slate-300\" \n            data-testid=\"input-max-price\"\n          />\n        </div>\n      </div>\n\n      <div className=\"border-b border-slate-300 pb-4\">\n        <h3 className={SECTION_TITLE}>Department</h3>\n        <div className=\"space-y-1\">\n          {uniqueDepartments.map((dept) => (\n            <div key={dept} className=\"flex items-center space-x-2\">\n              <Checkbox \n                id={`dept-${dept}`} \n                checked={selectedDepartments.includes(dept!)}\n                onCheckedChange={() => toggleDepartment(dept!)}\n                className=\"rounded-none border-slate-400 h-3 w-3 data-[state=checked]:bg-[#3D4736] data-[state=checked]:border-[#3D4736]\" \n                data-testid={`checkbox-dept-${dept}`}\n              />\n              <label htmlFor={`dept-${dept}`} className=\"text-[10px] font-medium leading-none cursor-pointer text-slate-600 hover:text-black uppercase\">\n                {dept}\n              </label>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"border-b border-slate-300 pb-4\">\n        <h3 className={SECTION_TITLE}>Surface Type</h3>\n        <div className=\"space-y-1 pl-1\">\n          {filterOptions?.surfaceTypes.map((type, i) => (\n            <div key={i} className=\"flex items-center gap-2\">\n              <Checkbox \n                id={`surf-${i}`} \n                checked={selectedSurfaceTypes.includes(type)}\n                onCheckedChange={() => setSelectedSurfaceTypes(prev => \n                  prev.includes(type) ? prev.filter(t => t !== type) : [...prev, type]\n                )}\n                className=\"rounded-none border-slate-400 h-3 w-3 data-[state=checked]:bg-[#3D4736] data-[state=checked]:border-[#3D4736]\" \n                data-testid={`checkbox-surface-${type}`}\n              />\n              <label htmlFor={`surf-${i}`} className=\"text-[10px] text-slate-600 uppercase cursor-pointer\">{type}</label>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"border-b border-slate-300 pb-4\">\n        <h3 className={SECTION_TITLE}>Friction Material</h3>\n        <div className=\"space-y-1 pl-1\">\n          {filterOptions?.frictionalMaterials.map((mat, i) => (\n            <div key={i} className=\"flex items-center gap-2\">\n              <Checkbox \n                id={`mat-${i}`} \n                checked={selectedMaterials.includes(mat)}\n                onCheckedChange={() => setSelectedMaterials(prev => \n                  prev.includes(mat) ? prev.filter(m => m !== mat) : [...prev, mat]\n                )}\n                className=\"rounded-none border-slate-400 h-3 w-3 data-[state=checked]:bg-[#3D4736] data-[state=checked]:border-[#3D4736]\" \n                data-testid={`checkbox-material-${mat}`}\n              />\n              <label htmlFor={`mat-${i}`} className=\"text-[10px] text-slate-600 uppercase cursor-pointer\">{mat}</label>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"mt-8 bg-black p-4 text-center\">\n        <div className=\"aspect-square bg-slate-800 mb-4 overflow-hidden\">\n          <img src=\"https://images.unsplash.com/photo-1616788494707-ec28f08d05a1?auto=format&fit=crop&q=80&w=300\" className=\"w-full h-full object-cover opacity-80\" alt=\"Ad\" />\n        </div>\n        <h4 className=\"text-white font-bold text-lg uppercase mb-1\">VIZZ 550 RGB</h4>\n        <p className=\"text-slate-400 text-[10px] mb-4\">Specialty Color Waterproof Headlamp</p>\n        <Button className=\"w-full bg-[#D97706] hover:bg-orange-700 text-white font-bold text-xs rounded-none uppercase\">\n          SHOP NOW\n        </Button>\n      </div>\n    </div>\n  );\n\n  const ProductGridItem = ({ product }: { product: Product }) => (\n    <Link href={`/products/${product.id}`} data-testid={`link-product-${product.id}`}>\n      <div className=\"group relative bg-[#F5F5F5] border border-transparent hover:border-slate-300 transition-all p-4 flex flex-col h-full cursor-pointer\" data-testid={`card-product-${product.id}`}>\n        <div className=\"absolute top-3 right-3 text-slate-300 cursor-pointer hover:text-red-500 z-10\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\"/></svg>\n        </div>\n        \n        <div className=\"aspect-square mb-4 bg-transparent flex items-center justify-center p-2\">\n          <ProductImage \n            src={product.image} \n            alt={product.name} \n            className=\"max-w-full max-h-full object-contain\"\n            placeholderClassName=\"w-full h-full\"\n          />\n        </div>\n\n        <div className=\"mt-auto\">\n          <h3 className=\"font-bold text-xs text-slate-800 mb-2 min-h-[2.5em] leading-tight line-clamp-2\">\n            {product.name}\n          </h3>\n          \n          <div className=\"mb-4\">\n            {isAuthenticated && product.price ? (\n              <div className=\"font-bold text-sm text-black\">AED {parseFloat(product.price.toString()).toLocaleString()}</div>\n            ) : (\n              <div className=\"text-xs text-slate-500 italic\">Login for Price</div>\n            )}\n            <div className=\"text-[10px] text-slate-400 mt-1\">\n              Sold by <span className=\"underline cursor-pointer hover:text-slate-600\">{product.make || 'Vendor'}</span>\n            </div>\n          </div>\n\n          <span \n            className=\"w-full rounded-none font-bold text-xs uppercase h-9 bg-[#D97706] text-white hover:bg-orange-700 flex items-center justify-center transition-colors\"\n            data-testid={`button-view-product-${product.id}`}\n          >\n            {product.actionType === 'inquiry' ? 'SUBMIT AN INQUIRY' : 'VIEW DETAILS'}\n          </span>\n        </div>\n      </div>\n    </Link>\n  );\n\n  return (\n    <Layout>\n      <div className=\"bg-[#EFEBE4] border-b border-slate-200\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between gap-4\">\n            <div>\n              <h1 className=\"text-3xl font-display font-black uppercase text-[#1A1A1A] mb-1 tracking-tight\">\n                {searchTerm ? `SEARCH: \"${searchTerm}\"` : 'ALL PRODUCTS'}\n              </h1>\n              <div className=\"flex items-center gap-2 text-xs text-slate-500\">\n                <span className=\"font-bold text-black\">{filteredProducts.length} Results</span>\n                {hasActiveFilters && <span className=\"text-orange-600\"> Filters applied</span>}\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-4 w-full md:w-auto\">\n              <div className=\"relative flex-1 md:flex-initial md:w-64\">\n                <Input\n                  type=\"search\"\n                  placeholder=\"Search products...\"\n                  value={searchTerm}\n                  onChange={(e) => {\n                    setSearchTerm(e.target.value);\n                    setShowSuggestions(true);\n                  }}\n                  onFocus={() => setShowSuggestions(true)}\n                  onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}\n                  className=\"h-9 text-sm rounded-none border-slate-300 pr-10\"\n                  data-testid=\"input-search-products\"\n                />\n                <Search className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400\" />\n                \n                {showSuggestions && searchSuggestions.length > 0 && (\n                  <div className=\"absolute top-full left-0 right-0 bg-white border border-slate-200 shadow-lg z-50 max-h-64 overflow-y-auto\">\n                    {searchSuggestions.map((product) => (\n                      <Link \n                        key={product.id} \n                        href={`/products/${product.id}`}\n                        onClick={() => setShowSuggestions(false)}\n                      >\n                        <div \n                          className=\"flex items-center gap-3 p-2 hover:bg-slate-50 cursor-pointer border-b border-slate-100\"\n                          data-testid={`suggestion-${product.id}`}\n                        >\n                          <ProductImage src={product.image} alt={product.name} className=\"w-10 h-10 object-contain\" placeholderClassName=\"w-10 h-10\" />\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"text-xs font-medium text-slate-800 truncate\">{product.name}</div>\n                            <div className=\"text-[10px] text-slate-500\">SKU: {product.sku}</div>\n                          </div>\n                          <div className=\"text-xs font-bold text-orange-600\">AED {parseFloat(product.price).toLocaleString()}</div>\n                        </div>\n                      </Link>\n                    ))}\n                  </div>\n                )}\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-xs font-bold uppercase text-slate-600 hidden md:inline\">Sort:</span>\n                <select \n                  value={sortBy}\n                  onChange={(e) => setSortBy(e.target.value)}\n                  className=\"border border-slate-300 bg-white px-3 py-1.5 text-xs font-bold cursor-pointer rounded-none\"\n                  data-testid=\"select-sort\"\n                >\n                  <option value=\"best\">Best Match</option>\n                  <option value=\"price_low\">Price: Low to High</option>\n                  <option value=\"price_high\">Price: High to Low</option>\n                  <option value=\"name\">Name A-Z</option>\n                </select>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-[#EFEBE4] min-h-screen\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"flex flex-col lg:flex-row gap-8\">\n            \n            <aside className=\"hidden lg:block w-64 flex-shrink-0\">\n              <FilterSidebar />\n            </aside>\n\n            <div className=\"flex-1\">\n              \n              {filteredProducts.length === 0 ? (\n                <div className=\"text-center py-16\">\n                  <div className=\"text-slate-400 mb-4\">\n                    <Search className=\"h-16 w-16 mx-auto\" />\n                  </div>\n                  <h3 className=\"text-lg font-bold text-slate-700 mb-2\">No products found</h3>\n                  <p className=\"text-sm text-slate-500 mb-4\">Try adjusting your search or filters</p>\n                  <Button onClick={clearFilters} className=\"bg-[#D97706] hover:bg-orange-700\" data-testid=\"button-clear-search\">\n                    Clear Filters\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-12\">\n                  {filteredProducts.map((product) => (\n                    <ProductGridItem key={product.id} product={product} />\n                  ))}\n                </div>\n              )}\n\n              {topSellingProducts && topSellingProducts.length > 0 && (\n                <div className=\"mb-16\">\n                  <h2 className=\"text-lg font-display font-bold uppercase text-[#1A1A1A] mb-6 border-l-4 border-[#1A1A1A] pl-3\">\n                    RECOMMENDED FOR YOU\n                  </h2>\n                  <Carousel className=\"w-full\" opts={{ align: \"start\", loop: true }}>\n                    <CarouselContent className=\"-ml-4\">\n                      {topSellingProducts?.map((product) => (\n                        <CarouselItem key={product.id} className=\"pl-4 basis-1/2 md:basis-1/4\">\n                          <Link href={`/products/${product.id}`}>\n                            <div className=\"group cursor-pointer text-center bg-[#F5F5F5] p-4 border border-transparent hover:border-slate-300 transition-colors h-full\">\n                              <div className=\"aspect-square mb-3 flex items-center justify-center p-2 bg-white\">\n                                <ProductImage src={product.image} className=\"max-w-full max-h-full object-contain\" alt={product.name} placeholderClassName=\"w-full h-full\" />\n                              </div>\n                              <h3 className=\"text-[10px] font-bold text-slate-800 uppercase leading-tight line-clamp-2 min-h-[2.5em]\">\n                                {product.name}\n                              </h3>\n                              <div className=\"flex justify-center mt-2\">\n                                {[1,2,3,4,5].map(i => <Star key={i} className=\"w-2 h-2 fill-[#D97706] text-[#D97706]\" />)}\n                                <span className=\"text-[9px] text-slate-500 ml-1\">({product.reviewCount || 0})</span>\n                              </div>\n                              <div className=\"text-[#D97706] text-xs font-bold mt-2 uppercase\">BUY NOW</div>\n                            </div>\n                          </Link>\n                        </CarouselItem>\n                      ))}\n                    </CarouselContent>\n                    <div className=\"flex justify-end gap-2 mt-4\">\n                      <CarouselPrevious className=\"static translate-y-0 h-6 w-6 border-slate-300 bg-transparent hover:bg-[#1A1A1A] hover:text-white rounded-none text-slate-500\" />\n                      <CarouselNext className=\"static translate-y-0 h-6 w-6 border-slate-300 bg-transparent hover:bg-[#1A1A1A] hover:text-white rounded-none text-slate-500\" />\n                    </div>\n                  </Carousel>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":21038,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/components/ui/product-image.tsx":{"content":"import { useState } from \"react\";\nimport { Package } from \"lucide-react\";\n\ninterface ProductImageProps {\n  src?: string | null;\n  alt: string;\n  className?: string;\n  placeholderClassName?: string;\n}\n\nconst PLACEHOLDER_IMAGE = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 400 400'%3E%3Crect fill='%23e2e8f0' width='400' height='400'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='48' fill='%2394a3b8'%3ENo Image%3C/text%3E%3C/svg%3E\";\n\nexport default function ProductImage({ src, alt, className = \"\", placeholderClassName = \"\" }: ProductImageProps) {\n  const [hasError, setHasError] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const showPlaceholder = !src || hasError;\n\n  if (showPlaceholder) {\n    return (\n      <div className={`flex items-center justify-center bg-slate-100 ${placeholderClassName || className}`}>\n        <div className=\"text-center text-slate-400\">\n          <Package className=\"h-12 w-12 mx-auto mb-2\" />\n          <span className=\"text-xs\">No Image</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {isLoading && (\n        <div className={`flex items-center justify-center bg-slate-100 animate-pulse ${placeholderClassName || className}`}>\n          <Package className=\"h-8 w-8 text-slate-300\" />\n        </div>\n      )}\n      <img\n        src={src}\n        alt={alt}\n        className={`${className} ${isLoading ? 'hidden' : ''}`}\n        onError={() => {\n          setHasError(true);\n          setIsLoading(false);\n        }}\n        onLoad={() => setIsLoading(false)}\n      />\n    </>\n  );\n}\n","path":null,"size_bytes":1692,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  if (!itemContext) {\n    throw new Error(\"useFormField should be used within <FormItem>\")\n  }\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue | null>(null)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4175,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Minus } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-1 ring-ring\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Minus />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2143,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"pg\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1417,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport NotFound from \"@/pages/not-found\";\n\nimport Home from \"@/pages/home\";\nimport ProductsPage from \"@/pages/products\";\nimport ProductDetailsPage from \"@/pages/product-details\";\nimport CartPage from \"@/pages/cart\";\nimport CheckoutPage from \"@/pages/checkout\";\nimport CheckoutSuccessPage from \"@/pages/checkout-success\";\nimport WishlistPage from \"@/pages/account/wishlist\";\nimport OrderTrackingPage from \"@/pages/account/order-tracking\";\nimport OrderDetailsPage from \"@/pages/account/order-details\";\nimport RefundDetailsPage from \"@/pages/account/refund-details\";\nimport UserProfilePage from \"@/pages/account/user-profile\";\nimport LoginPage from \"@/pages/auth/user-login\";\nimport RegisterPage from \"@/pages/auth/register\";\nimport SellerDashboard from \"@/pages/seller/dashboard\";\nimport ProfilePage from \"@/pages/account/profile\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/products\" component={ProductsPage} />\n      <Route path=\"/products/:id\" component={ProductDetailsPage} />\n      <Route path=\"/cart\" component={CartPage} />\n      <Route path=\"/checkout\" component={CheckoutPage} />\n      <Route path=\"/checkout/success\" component={CheckoutSuccessPage} />\n      <Route path=\"/account/wishlist\" component={WishlistPage} />\n      <Route path=\"/account/orders/:id/track\" component={OrderTrackingPage} />\n      <Route path=\"/account/orders/:id/details\" component={OrderDetailsPage} />\n      <Route path=\"/account/refunds/:id\" component={RefundDetailsPage} />\n      <Route path=\"/account/profile/edit\" component={UserProfilePage} />\n      <Route path=\"/auth/login\" component={LoginPage} />\n      <Route path=\"/auth/register\" component={RegisterPage} />\n      <Route path=\"/seller/dashboard\" component={SellerDashboard} />\n      <Route path=\"/account/profile\" component={ProfilePage} />\n      \n      {/* Fallback to 404 */}\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":2423,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/components/ui/button-group.tsx":{"content":"import { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nconst buttonGroupVariants = cva(\n  \"flex w-fit items-stretch has-[>[data-slot=button-group]]:gap-2 [&>*]:focus-visible:relative [&>*]:focus-visible:z-10 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1\",\n  {\n    variants: {\n      orientation: {\n        horizontal:\n          \"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none\",\n        vertical:\n          \"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none\",\n      },\n    },\n    defaultVariants: {\n      orientation: \"horizontal\",\n    },\n  }\n)\n\nfunction ButtonGroup({\n  className,\n  orientation,\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof buttonGroupVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"button-group\"\n      data-orientation={orientation}\n      className={cn(buttonGroupVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupText({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  asChild?: boolean\n}) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      className={cn(\n        \"bg-muted shadow-xs flex items-center gap-2 rounded-md border px-4 text-sm font-medium [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupSeparator({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"button-group-separator\"\n      orientation={orientation}\n      className={cn(\n        \"bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  ButtonGroup,\n  ButtonGroupSeparator,\n  ButtonGroupText,\n  buttonGroupVariants,\n}\n","path":null,"size_bytes":2209,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // @replit\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \",\n  {\n    variants: {\n      variant: {\n        default:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary:\n          // @replit no hover because we use hover-elevate\n          \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n          // @replit shadow-xs\" - use badge outline variable\n        outline: \"text-foreground border [border-color:var(--badge-outline)]\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1522,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/pages/account/refund-details.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport ProductImage from \"@/components/ui/product-image\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { api as mockApi } from \"@/lib/mockApi\";\nimport { getAccessToken, clearTokens, api } from \"@/lib/api\";\nimport { Link, useLocation, useRoute } from \"wouter\";\nimport { \n  User, Package, Heart, RotateCcw, Shield, Bell, Lock, \n  LogOut, ChevronLeft, ChevronRight, Info, MessageCircle\n} from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { format, addDays } from \"date-fns\";\n\nexport default function RefundDetailsPage() {\n  const [, setLocation] = useLocation();\n  const [, params] = useRoute(\"/account/refunds/:id\");\n  const refundId = params?.id || \"\";\n  const [showBreakup, setShowBreakup] = useState(false);\n  const [faqOpen, setFaqOpen] = useState(true);\n\n  useEffect(() => {\n    const token = getAccessToken();\n    if (!token) {\n      setLocation('/auth/login');\n    }\n  }, [setLocation]);\n\n  const { data: refund, isLoading: refundLoading } = useQuery({\n    queryKey: ['refund', refundId],\n    queryFn: () => api.refunds.getById(refundId),\n    enabled: !!refundId\n  });\n\n  const { data: currentUser } = useQuery({\n    queryKey: ['current-user'],\n    queryFn: api.auth.me\n  });\n\n  // Mock data for demo when no real refund exists\n  const mockRefund = {\n    id: refundId,\n    amount: \"679.00\",\n    status: \"processing\" as const,\n    paymentMethod: \"Tamara\",\n    triggerDate: new Date(),\n    estimatedCreditDate: addDays(new Date(), 7),\n    items: [\n      { id: 1, name: \"DFC - 4000 HybriDynamic Hybrid Rear Brake Pads\", image: \"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=100\", price: \"679.00\", quantity: 1 },\n      { id: 2, name: \"Duralast 45084DL High-Performance Disc Brake Rotor\", image: \"https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=100\", price: \"475.00\", quantity: 1 },\n      { id: 3, name: \"Duralast Heavy-Duty Disc Brake Rotor 54094DL Reliable OEM-Grade Performance\", image: \"https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=100\", price: \"1625.00\", quantity: 1 },\n    ]\n  };\n\n  const displayRefund = refund || mockRefund;\n  const totalRefundAmount = displayRefund.items?.reduce((sum, item) => sum + parseFloat(item.price) * (item.quantity || 1), 0) || parseFloat(displayRefund.amount);\n\n  const handleLogout = async () => {\n    clearTokens();\n    setLocation('/');\n  };\n\n  const getUserInitials = () => {\n    if (!currentUser?.name) return 'JM';\n    const names = currentUser.name.split(' ');\n    return names.map((n: string) => n[0]).join('').toUpperCase().slice(0, 2);\n  };\n\n  const SidebarItem = ({ icon: Icon, label, active = false, onClick, href }: { icon: any, label: string, active?: boolean, onClick?: () => void, href?: string }) => {\n    const content = (\n      <div \n        className={`flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors ${active ? \"bg-[#3D4736] text-white\" : \"hover:bg-slate-100 text-slate-700\"}`}\n        onClick={onClick}\n        data-testid={`sidebar-${label.toLowerCase().replace(/\\s+/g, '-')}`}\n      >\n        <Icon className=\"h-4 w-4\" />\n        <span className=\"text-sm font-medium\">{label}</span>\n      </div>\n    );\n    \n    if (href) {\n      return <Link href={href}>{content}</Link>;\n    }\n    return content;\n  };\n\n  if (refundLoading) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen py-20 text-center\">\n          <div className=\"animate-spin h-10 w-10 border-4 border-[#3D4736] border-t-transparent rounded-full mx-auto mb-4\" />\n          <p className=\"text-slate-500\">Loading refund details...</p>\n        </div>\n      </Layout>\n    );\n  }\n\n  const triggerDate = displayRefund.triggerDate ? new Date(displayRefund.triggerDate) : new Date();\n  const estimatedCreditDate = displayRefund.estimatedCreditDate ? new Date(displayRefund.estimatedCreditDate) : addDays(new Date(), 7);\n\n  return (\n    <Layout>\n      <div className=\"bg-[#3D4736] text-white py-2\">\n        <div className=\"container mx-auto px-4 flex justify-between items-center text-xs\">\n          <div className=\"flex gap-4\"></div>\n          <div className=\"flex items-center gap-4\">\n             <Link href=\"/seller/dashboard\">\n               <Button size=\"sm\" variant=\"outline\" className=\"h-7 bg-white text-slate-900 border-white hover:bg-slate-100 font-bold text-xs uppercase rounded-full px-4\">\n                 Supplier Zone\n               </Button>\n             </Link>\n             <div className=\"flex items-center gap-2\">\n               <span>{currentUser?.name?.split(' ')[0] || 'John'}</span>\n               <div className=\"w-6 h-6 rounded-full border border-white grid place-items-center\">\n                 <User className=\"h-3 w-3\" />\n               </div>\n             </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-slate-50 min-h-screen py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex flex-col lg:flex-row gap-8\">\n            \n            {/* Sidebar */}\n            <aside className=\"w-full lg:w-64 flex-shrink-0 space-y-6\">\n              {/* User Profile Card */}\n              <div className=\"bg-white rounded-lg shadow-sm p-4\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <div className=\"w-12 h-12 rounded-full bg-[#3D4736] text-white flex items-center justify-center font-bold text-lg\">\n                    {getUserInitials()}\n                  </div>\n                  <div>\n                    <p className=\"font-semibold text-slate-800\">Hello, {currentUser?.name || 'John Martin'}</p>\n                    <p className=\"text-sm text-slate-500\">{currentUser?.email || 'info@johnmartin.com'}</p>\n                  </div>\n                </div>\n                <div>\n                  <p className=\"text-xs text-slate-500 mb-1\">Profile Completion</p>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"flex-1 h-2 bg-slate-100 rounded-full overflow-hidden\">\n                      <div \n                        className=\"h-full bg-orange-500 rounded-full\" \n                        style={{ width: `${currentUser?.completionPercentage || 80}%` }}\n                      />\n                    </div>\n                    <span className=\"text-xs font-medium text-orange-500\">{currentUser?.completionPercentage || 80}%</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Navigation Menu */}\n              <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n                <div className=\"px-4 py-3 border-b border-slate-100\">\n                  <h3 className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">Orders & Activity</h3>\n                </div>\n                <SidebarItem icon={Package} label=\"Orders\" href=\"/account/profile\" />\n                <SidebarItem icon={Heart} label=\"Wishlist\" href=\"/account/wishlist\" />\n                <SidebarItem icon={RotateCcw} label=\"Returns\" active />\n                <SidebarItem icon={Shield} label=\"Warranty Claims\" />\n                \n                <div className=\"px-4 py-3 border-b border-t border-slate-100 mt-2\">\n                  <h3 className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">My Account</h3>\n                </div>\n                <SidebarItem icon={User} label=\"User Profile\" href=\"/account/profile/edit\" />\n                <SidebarItem icon={Package} label=\"Address\" />\n                <SidebarItem icon={Package} label=\"Payments\" />\n                \n                <div className=\"px-4 py-3 border-b border-t border-slate-100 mt-2\">\n                  <h3 className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">Others</h3>\n                </div>\n                <SidebarItem icon={Bell} label=\"Notifications\" />\n                <SidebarItem icon={Lock} label=\"Security Settings\" />\n                \n                <div className=\"border-t border-slate-100 mt-2\">\n                  <SidebarItem icon={LogOut} label=\"Log Out\" onClick={handleLogout} />\n                </div>\n              </div>\n            </aside>\n\n            {/* Main Content */}\n            <main className=\"flex-1\">\n              {/* Back Link */}\n              <Link href=\"/account/profile\" className=\"inline-flex items-center gap-1 text-sm text-slate-600 hover:text-slate-900 mb-4\">\n                <ChevronLeft className=\"h-4 w-4\" />\n                Back to Order Details\n              </Link>\n\n              {/* Header */}\n              <div className=\"mb-6\">\n                <h1 className=\"text-3xl font-bold text-slate-900 uppercase tracking-wide\" style={{ fontFamily: 'serif' }}>\n                  REFUND DETAILS\n                </h1>\n                <p className=\"text-slate-500 mt-1\">Track your refund and view the next steps</p>\n              </div>\n\n              <div className=\"flex flex-col lg:flex-row gap-6\">\n                {/* Left Column - Refund Info */}\n                <div className=\"flex-1 space-y-6\">\n                  {/* Triggered Refunds Card */}\n                  <div className=\"bg-white rounded-lg shadow-sm p-6\">\n                    <div className=\"flex items-center gap-2 mb-4\">\n                      <h2 className=\"font-semibold text-slate-900\">Triggered Refunds</h2>\n                      <Info className=\"h-4 w-4 text-slate-400\" />\n                    </div>\n                    \n                    <p className=\"text-sm text-slate-600 mb-4\">Money sent, reaching your account soon.</p>\n                    \n                    <div className=\"flex items-center justify-between border-b border-slate-100 pb-4 mb-4\">\n                      <div>\n                        <p className=\"text-lg font-bold text-green-600\"> {displayRefund.amount}</p>\n                        <p className=\"text-sm text-slate-500\">Processed to {displayRefund.paymentMethod}</p>\n                      </div>\n                      <div className=\"w-16 h-10 bg-gradient-to-r from-pink-400 to-pink-500 rounded flex items-center justify-center text-white text-xs font-bold\">\n                        {displayRefund.paymentMethod}\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4 mb-4\">\n                      <div>\n                        <p className=\"text-xs text-slate-500 uppercase\">Trigger date</p>\n                        <p className=\"font-medium text-slate-900\">{format(triggerDate, 'EEEE, do MMM')}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-slate-500 uppercase\">Est. Credit Date</p>\n                        <p className=\"font-medium text-slate-900\">{format(estimatedCreditDate, 'EEEE, do MMM')}</p>\n                      </div>\n                    </div>\n\n                    {/* FAQ Accordion */}\n                    <div className=\"border-t border-slate-100 pt-4\">\n                      <button \n                        onClick={() => setFaqOpen(!faqOpen)}\n                        className=\"w-full flex items-center justify-between text-left\"\n                        data-testid=\"faq-toggle\"\n                      >\n                        <span className=\"font-medium text-slate-900 flex items-center gap-2\">\n                          <Info className=\"h-4 w-4 text-slate-400\" />\n                          Haven't received your refund yet?\n                        </span>\n                        <ChevronRight className={`h-4 w-4 text-slate-400 transition-transform ${faqOpen ? 'rotate-90' : ''}`} />\n                      </button>\n                      \n                      {faqOpen && (\n                        <div className=\"mt-3 text-sm text-slate-600\">\n                          <p className=\"mb-3\">\n                            Your refund was processed and sent to your {displayRefund.paymentMethod} account by Armored Mart on{' '}\n                            <span className=\"font-medium\">{format(triggerDate, 'EEEE, do MMM')}</span>. \n                            Banks usually take 5-7 business days to credit the amount.\n                          </p>\n                          <p>\n                            If you don't see it by <span className=\"font-medium\">{format(estimatedCreditDate, 'EEEE, do MMM')}</span>, \n                            please contact {displayRefund.paymentMethod} for assistance.\n                          </p>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Contact Button */}\n                    <Button \n                      className=\"w-full mt-4 bg-[#3D4736] hover:bg-[#2d352a] text-white\"\n                      data-testid=\"contact-payment-provider\"\n                    >\n                      CONTACT {displayRefund.paymentMethod?.toUpperCase()}\n                    </Button>\n                  </div>\n\n                  {/* Triggered Items */}\n                  <div className=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h2 className=\"font-semibold text-slate-900 mb-4\">\n                      TRIGGERED ITEMS <span className=\"text-slate-500 font-normal\">({displayRefund.items?.length || 0} items)</span>\n                    </h2>\n                    \n                    <div className=\"flex gap-4 overflow-x-auto pb-2\">\n                      {displayRefund.items?.map((item, index) => (\n                        <div key={item.id || index} className=\"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border border-slate-200\" data-testid={`refund-item-${index}`}>\n                          <ProductImage \n                            src={item.image} \n                            alt={item.name} \n                            className=\"w-full h-full object-cover\"\n                          />\n                        </div>\n                      ))}\n                      <button className=\"flex-shrink-0 w-10 h-20 flex items-center justify-center text-slate-400 hover:text-slate-600\">\n                        <ChevronRight className=\"h-6 w-6\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Right Column - Order Summary */}\n                <div className=\"w-full lg:w-72 space-y-4\">\n                  <div className=\"bg-amber-50 rounded-lg p-4\">\n                    <div className=\"flex justify-between items-center mb-3\">\n                      <span className=\"text-slate-700\">Order Total</span>\n                      <span className=\"font-semibold\"> {displayRefund.amount}</span>\n                    </div>\n                    <div className=\"flex justify-between items-center text-sm text-slate-500 mb-3\">\n                      <span>{displayRefund.paymentMethod}</span>\n                      <span> {displayRefund.amount}</span>\n                    </div>\n                    <div className=\"border-t border-amber-200 pt-3\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-green-600 font-semibold\">Refunded Amount</span>\n                        <span className=\"text-green-600 font-semibold\"> {displayRefund.amount}</span>\n                      </div>\n                    </div>\n                    <button \n                      onClick={() => setShowBreakup(true)}\n                      className=\"text-sm text-blue-600 hover:underline mt-2\"\n                      data-testid=\"show-refund-breakup\"\n                    >\n                      {showBreakup ? 'Hide Details' : 'View Details'}\n                    </button>\n                  </div>\n\n                  {/* Need Further Support */}\n                  <div className=\"bg-amber-50 rounded-lg p-4\">\n                    <h3 className=\"font-semibold text-slate-900 mb-2\">NEED FURTHER SUPPORT?</h3>\n                    <p className=\"text-sm text-slate-600\">\n                      Check our Refund FAQ for details on refund policies, amount calculations, processing timelines, and payment methods.\n                    </p>\n                    <button className=\"mt-3 text-sm text-slate-500 hover:text-slate-700 flex items-center gap-1\">\n                      <ChevronRight className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </main>\n          </div>\n        </div>\n      </div>\n\n      {/* Refund Breakup Dialog */}\n      <Dialog open={showBreakup} onOpenChange={setShowBreakup}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"text-xl font-bold uppercase tracking-wide\" style={{ fontFamily: 'serif' }}>\n              REFUND BREAKUP\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 mt-4\">\n            {displayRefund.items?.map((item, index) => (\n              <div key={item.id || index} className=\"flex items-center gap-4 bg-amber-50 p-3 rounded-lg\" data-testid={`breakup-item-${index}`}>\n                <div className=\"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0\">\n                  <ProductImage \n                    src={item.image} \n                    alt={item.name} \n                    className=\"w-full h-full object-cover\"\n                  />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium text-slate-900 line-clamp-2\">{item.name}</p>\n                  <p className=\"text-lg font-bold text-green-600 mt-1\"> {item.price}</p>\n                </div>\n              </div>\n            ))}\n            \n            <div className=\"border-t border-slate-200 pt-4 mt-4\">\n              <div className=\"text-center\">\n                <p className=\"text-sm text-slate-500\">Total refunded amount</p>\n                <p className=\"text-2xl font-bold text-green-600\" data-testid=\"total-refund-amount\"> {totalRefundAmount.toFixed(2)}</p>\n              </div>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":18180,"size_tokens":null},"client/src/pages/account/user-profile.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport AccountSidebar from \"@/components/layout/AccountSidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { getAccessToken, clearTokens, api } from \"@/lib/api\";\nimport { Link, useLocation } from \"wouter\";\nimport { User, ChevronLeft, Save, Camera } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\n\nexport default function UserProfilePage() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    phone: '+971 501234567',\n    address: 'Al Qusais, Dubai, United Arab Emirates'\n  });\n\n  useEffect(() => {\n    const token = getAccessToken();\n    if (!token) {\n      setLocation('/auth/login');\n    }\n  }, [setLocation]);\n\n  const { data: currentUser, isLoading } = useQuery({\n    queryKey: ['current-user'],\n    queryFn: api.auth.me\n  });\n\n  useEffect(() => {\n    if (currentUser) {\n      setFormData(prev => ({\n        ...prev,\n        name: currentUser.name || '',\n        email: currentUser.email || ''\n      }));\n    }\n  }, [currentUser]);\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: { name: string; email: string }) => {\n      const response = await fetch('/api/auth/profile', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${getAccessToken()}`\n        },\n        body: JSON.stringify(data)\n      });\n      if (!response.ok) throw new Error('Failed to update profile');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['current-user'] });\n      toast({ title: \"Profile updated\", description: \"Your profile has been updated successfully.\" });\n    },\n    onError: () => {\n      toast({ title: \"Error\", description: \"Failed to update profile.\", variant: \"destructive\" });\n    }\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    updateProfileMutation.mutate({ name: formData.name, email: formData.email });\n  };\n\n  const handleLogout = async () => {\n    clearTokens();\n    setLocation('/');\n  };\n\n  const getUserInitials = () => {\n    if (!currentUser?.name) return 'JM';\n    const names = currentUser.name.split(' ');\n    return names.map((n: string) => n[0]).join('').toUpperCase().slice(0, 2);\n  };\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen py-20 text-center\">\n          <div className=\"animate-spin h-10 w-10 border-4 border-[#3D4736] border-t-transparent rounded-full mx-auto mb-4\" />\n          <p className=\"text-slate-500\">Loading profile...</p>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"bg-[#3D4736] text-white py-2\">\n        <div className=\"container mx-auto px-4 flex justify-between items-center text-xs\">\n          <div className=\"flex gap-4\"></div>\n          <div className=\"flex items-center gap-4\">\n             <Link href=\"/seller/dashboard\">\n               <Button size=\"sm\" variant=\"outline\" className=\"h-7 bg-white text-slate-900 border-white hover:bg-slate-100 font-bold text-xs uppercase rounded-full px-4\">\n                 Supplier Zone\n               </Button>\n             </Link>\n             <div className=\"flex items-center gap-2\">\n               <span>{currentUser?.name?.split(' ')[0] || 'John'}</span>\n               <div className=\"w-6 h-6 rounded-full border border-white grid place-items-center\">\n                 <User className=\"h-3 w-3\" />\n               </div>\n             </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-slate-50 min-h-screen py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex flex-col lg:flex-row gap-8\">\n            \n            <AccountSidebar \n              currentUser={currentUser}\n              activeSection=\"profile\"\n              onLogout={handleLogout}\n            />\n\n            {/* Main Content */}\n            <main className=\"flex-1\">\n              {/* Header */}\n              <div className=\"flex items-center gap-4 mb-6\">\n                <Link href=\"/account/profile\">\n                  <button className=\"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors\" data-testid=\"back-to-profile\">\n                    <ChevronLeft className=\"h-5 w-5\" />\n                  </button>\n                </Link>\n                <h1 className=\"text-3xl font-display font-bold uppercase text-[#3D4736]\">\n                  Edit Profile\n                </h1>\n              </div>\n\n              <div className=\"bg-white rounded-lg shadow-sm border border-slate-200 p-6\">\n                {/* Avatar Section */}\n                <div className=\"flex items-center gap-6 mb-8 pb-6 border-b border-slate-200\">\n                  <div className=\"relative\">\n                    <div className=\"w-24 h-24 bg-[#3D4736] rounded-full text-white grid place-items-center font-bold text-2xl\">\n                      {getUserInitials()}\n                    </div>\n                    <button \n                      className=\"absolute bottom-0 right-0 w-8 h-8 bg-orange-600 rounded-full text-white grid place-items-center shadow-lg hover:bg-orange-700 transition-colors\"\n                      data-testid=\"change-avatar\"\n                    >\n                      <Camera className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                  <div>\n                    <h3 className=\"font-bold text-lg\">{currentUser?.name || 'John Martin'}</h3>\n                    <p className=\"text-sm text-slate-500\">Member since 2024</p>\n                  </div>\n                </div>\n\n                {/* Profile Form */}\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"name\">Full Name</Label>\n                      <Input \n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                        className=\"bg-[#EFEBE4] border-transparent\"\n                        data-testid=\"input-name\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"email\">Email Address</Label>\n                      <Input \n                        id=\"email\"\n                        type=\"email\"\n                        value={formData.email}\n                        onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}\n                        className=\"bg-[#EFEBE4] border-transparent\"\n                        data-testid=\"input-email\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"phone\">Phone Number</Label>\n                      <Input \n                        id=\"phone\"\n                        value={formData.phone}\n                        onChange={(e) => setFormData(prev => ({ ...prev, phone: e.target.value }))}\n                        className=\"bg-[#EFEBE4] border-transparent\"\n                        data-testid=\"input-phone\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"address\">Address</Label>\n                      <Input \n                        id=\"address\"\n                        value={formData.address}\n                        onChange={(e) => setFormData(prev => ({ ...prev, address: e.target.value }))}\n                        className=\"bg-[#EFEBE4] border-transparent\"\n                        data-testid=\"input-address\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-end gap-4 pt-4\">\n                    <Link href=\"/account/profile\">\n                      <Button type=\"button\" variant=\"outline\" className=\"border-slate-300\">\n                        Cancel\n                      </Button>\n                    </Link>\n                    <Button \n                      type=\"submit\" \n                      className=\"bg-[#3D4736] hover:bg-[#2A3324]\"\n                      disabled={updateProfileMutation.isPending}\n                      data-testid=\"save-profile\"\n                    >\n                      <Save className=\"h-4 w-4 mr-2\" />\n                      {updateProfileMutation.isPending ? 'Saving...' : 'Save Changes'}\n                    </Button>\n                  </div>\n                </form>\n              </div>\n            </main>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":9093,"size_tokens":null},"client/src/pages/account/order-tracking.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport ProductImage from \"@/components/ui/product-image\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { getAccessToken, clearTokens, api } from \"@/lib/api\";\nimport { Link, useLocation, useRoute } from \"wouter\";\nimport { \n  User, Package, Heart, RotateCcw, Shield, Bell, Lock, \n  LogOut, ChevronLeft, CheckCircle2, Clock, Truck, MapPin,\n  CreditCard, FileText, X, Calendar\n} from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\n\ninterface TrackingStep {\n  status: string;\n  label: string;\n  date: string;\n  description?: string;\n  completed: boolean;\n  current: boolean;\n}\n\nexport default function OrderTrackingPage() {\n  const [, setLocation] = useLocation();\n  const [, params] = useRoute(\"/account/orders/:id/track\");\n  const orderId = params?.id || \"\";\n\n  useEffect(() => {\n    const token = getAccessToken();\n    if (!token) {\n      setLocation('/auth/login');\n    }\n  }, [setLocation]);\n\n  const { data: orders, isLoading } = useQuery({\n    queryKey: ['orders'],\n    queryFn: api.orders.getAll\n  });\n\n  const { data: currentUser } = useQuery({\n    queryKey: ['current-user'],\n    queryFn: api.auth.me\n  });\n\n  const order = orders?.find(o => o.id === orderId);\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen py-20 text-center\">\n          <div className=\"animate-spin h-10 w-10 border-4 border-[#3D4736] border-t-transparent rounded-full mx-auto mb-4\" />\n          <p className=\"text-slate-500\">Loading order details...</p>\n        </div>\n      </Layout>\n    );\n  }\n\n  const getTrackingSteps = (): TrackingStep[] => {\n    const statusMap: Record<string, number> = {\n      'pending': 0,\n      'processing': 2,\n      'shipped': 3,\n      'delivered': 4,\n      'cancelled': -1\n    };\n    \n    const currentStep = order ? statusMap[order.status] ?? 0 : 0;\n    const formatDate = (date: Date | string) => new Date(date).toLocaleDateString('en-US', { day: 'numeric', month: 'short' });\n    const orderDate = order?.createdAt ? formatDate(order.createdAt) : formatDate(new Date());\n    \n    const getStepDate = (stepIndex: number): string => {\n      if (!order?.createdAt) return '';\n      const baseDate = new Date();\n      const dates = [\n        orderDate,\n        orderDate,\n        orderDate,\n        '',\n        ''\n      ];\n      if (stepIndex < currentStep) {\n        return dates[stepIndex] || orderDate;\n      }\n      return stepIndex <= currentStep ? orderDate : '';\n    };\n    \n    return [\n      {\n        status: 'confirmed',\n        label: 'Confirmed',\n        date: getStepDate(0),\n        completed: currentStep >= 0,\n        current: currentStep === 0\n      },\n      {\n        status: 'packed',\n        label: 'Packed',\n        date: getStepDate(1),\n        completed: currentStep >= 1,\n        current: currentStep === 1\n      },\n      {\n        status: 'dispatched',\n        label: 'Dispatched',\n        date: getStepDate(2),\n        description: currentStep === 2 ? 'Your shipment has been dispatched to the final hub. We\\'ll notify you once it\\'s out for delivery. When your order is almost there, we\\'ll display the courier\\'s contact number.' : undefined,\n        completed: currentStep >= 2,\n        current: currentStep === 2\n      },\n      {\n        status: 'out_for_delivery',\n        label: 'Out for delivery',\n        date: getStepDate(3),\n        description: currentStep === 3 ? 'Your package is on its way! The courier will deliver it shortly.' : undefined,\n        completed: currentStep >= 3,\n        current: currentStep === 3\n      },\n      {\n        status: 'delivered',\n        label: currentStep >= 4 ? 'Delivered' : 'Delivery by Today',\n        date: currentStep >= 4 ? orderDate : '',\n        description: currentStep === 4 ? 'Your order has been delivered successfully!' : undefined,\n        completed: currentStep >= 4,\n        current: currentStep === 4\n      }\n    ];\n  };\n\n  const trackingSteps = getTrackingSteps();\n  const shipmentId = `AMUAE${order?.id?.replace(/-/g, '').slice(0, 12) || '0092259108'}`;\n\n  const handleLogout = async () => {\n    clearTokens();\n    setLocation('/');\n  };\n\n  const SidebarItem = ({ icon: Icon, label, active = false, onClick, href }: { icon: any, label: string, active?: boolean, onClick?: () => void, href?: string }) => {\n    const content = (\n      <div \n        className={`flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors ${active ? \"bg-[#3D4736] text-white\" : \"hover:bg-slate-100 text-slate-700\"}`}\n        onClick={onClick}\n        data-testid={`sidebar-${label.toLowerCase().replace(/\\s+/g, '-')}`}\n      >\n        <Icon className=\"h-4 w-4\" />\n        <span className=\"text-sm font-medium\">{label}</span>\n      </div>\n    );\n    \n    if (href) {\n      return <Link href={href}>{content}</Link>;\n    }\n    return content;\n  };\n\n  const getStepIcon = (step: TrackingStep) => {\n    if (step.status === 'confirmed') return CheckCircle2;\n    if (step.status === 'packed') return Package;\n    if (step.status === 'dispatched') return Truck;\n    if (step.status === 'out_for_delivery') return Truck;\n    if (step.status === 'delivered') return MapPin;\n    return Clock;\n  };\n\n  if (!order) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen py-20 text-center\">\n          <Package className=\"h-16 w-16 mx-auto text-slate-300 mb-4\" />\n          <h2 className=\"text-2xl font-bold mb-2\">Order not found</h2>\n          <p className=\"text-slate-500 mb-6\">The order you're looking for doesn't exist.</p>\n          <Link href=\"/account/profile\">\n            <Button className=\"bg-orange-600 hover:bg-orange-700\">Go to Orders</Button>\n          </Link>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"bg-[#3D4736] text-white py-2\">\n        <div className=\"container mx-auto px-4 flex justify-between items-center text-xs\">\n          <div className=\"flex gap-4\"></div>\n          <div className=\"flex items-center gap-4\">\n             <Link href=\"/seller/dashboard\">\n               <Button size=\"sm\" variant=\"outline\" className=\"h-7 bg-white text-slate-900 border-white hover:bg-slate-100 font-bold text-xs uppercase rounded-full px-4\">\n                 Supplier Zone\n               </Button>\n             </Link>\n             <div className=\"flex items-center gap-2\">\n               <span>John</span>\n               <div className=\"w-6 h-6 rounded-full border border-white grid place-items-center\">\n                 <User className=\"h-3 w-3\" />\n               </div>\n             </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-slate-50 min-h-screen py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex flex-col lg:flex-row gap-8\">\n            \n            {/* Sidebar */}\n            <aside className=\"w-full lg:w-64 flex-shrink-0 space-y-6\">\n              <div className=\"bg-[#EFEBE4] p-6 rounded-lg\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <div className=\"w-10 h-10 bg-[#3D4736] rounded-full text-white grid place-items-center font-bold\">JM</div>\n                  <div>\n                    <div className=\"font-bold text-sm\">Hello, John Martin</div>\n                    <div className=\"text-xs text-muted-foreground\">info@johnmartin.com</div>\n                  </div>\n                </div>\n                <div className=\"text-xs font-medium text-orange-600 mb-1\">Profile Completion 80%</div>\n                <div className=\"h-1.5 w-full bg-slate-200 rounded-full overflow-hidden\">\n                  <div className=\"h-full bg-orange-500 w-[80%]\" />\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-lg overflow-hidden shadow-sm\">\n                <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase\">Orders & Activity</div>\n                <SidebarItem icon={Package} label=\"Orders\" href=\"/account/profile\" active />\n                <SidebarItem icon={Heart} label=\"Wishlist\" href=\"/account/wishlist\" />\n                <SidebarItem icon={RotateCcw} label=\"Returns\" />\n                <SidebarItem icon={Shield} label=\"Warranty Claims\" />\n                \n                <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase mt-2\">My Account</div>\n                <SidebarItem icon={User} label=\"User Profile\" />\n                <SidebarItem icon={User} label=\"Address\" />\n                <SidebarItem icon={CreditCard} label=\"Payments\" />\n                \n                <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase mt-2\">Others</div>\n                <SidebarItem icon={Bell} label=\"Notifications\" />\n                <SidebarItem icon={Lock} label=\"Security Settings\" href=\"/account/profile\" />\n              </div>\n\n              <div className=\"bg-white rounded-lg overflow-hidden shadow-sm\">\n                <SidebarItem icon={LogOut} label=\"Log Out\" onClick={handleLogout} />\n              </div>\n            </aside>\n\n            {/* Main Content */}\n            <main className=\"flex-1\">\n              {/* Header */}\n              <div className=\"flex items-center gap-4 mb-6\">\n                <Link href=\"/account/profile\">\n                  <button className=\"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors\" data-testid=\"back-to-orders\">\n                    <ChevronLeft className=\"h-5 w-5\" />\n                  </button>\n                </Link>\n                <h1 className=\"text-3xl font-display font-bold uppercase text-[#3D4736]\">\n                  Track Your Order\n                </h1>\n              </div>\n\n              {/* Shipment Info Bar */}\n              <div className=\"flex justify-between items-center mb-6 text-sm\">\n                <div>\n                  <span className=\"text-slate-600\">Shipment ID </span>\n                  <span className=\"font-bold text-slate-900\">{shipmentId}</span>\n                </div>\n                <div className=\"text-slate-600\">\n                  Order Date: <span className=\"font-medium text-slate-900\">{order.createdAt ? new Date(order.createdAt).toLocaleDateString('en-US', { day: 'numeric', month: 'short', year: 'numeric' }) : 'N/A'}</span>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6\">\n                {/* Delivery Address */}\n                <div className=\"mb-8\">\n                  <h3 className=\"text-xs font-bold text-slate-500 uppercase mb-3\">Delivery Address (Work)</h3>\n                  <div className=\"text-sm\">\n                    <p className=\"font-bold text-slate-900\">John Martin</p>\n                    <p className=\"text-slate-600\">Al Qusais, Dubai, United Arab Emirates</p>\n                    <p className=\"text-slate-600 flex items-center gap-2\">\n                      +971 501234567 \n                      <span className=\"text-xs text-green-600 flex items-center gap-1\">\n                        <CheckCircle2 className=\"h-3 w-3\" /> Verified\n                      </span>\n                    </p>\n                  </div>\n                </div>\n\n                {/* Tracking Timeline */}\n                <div className=\"relative mb-8\">\n                  {trackingSteps.map((step, index) => {\n                    const StepIcon = getStepIcon(step);\n                    const isLast = index === trackingSteps.length - 1;\n                    \n                    return (\n                      <div key={step.status} className=\"flex gap-4 relative\">\n                        {/* Timeline Line */}\n                        {!isLast && (\n                          <div \n                            className={`absolute left-[15px] top-8 w-0.5 h-[calc(100%-8px)] ${\n                              step.completed ? 'bg-[#3D4736]' : 'bg-slate-200'\n                            }`} \n                          />\n                        )}\n                        \n                        {/* Icon */}\n                        <div className={`relative z-10 w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${\n                          step.completed \n                            ? step.current \n                              ? 'bg-[#3D4736] text-white ring-4 ring-[#3D4736]/20' \n                              : 'bg-[#3D4736] text-white'\n                            : 'bg-slate-200 text-slate-400'\n                        }`}>\n                          <StepIcon className=\"h-4 w-4\" />\n                        </div>\n                        \n                        {/* Content */}\n                        <div className={`flex-1 pb-6 ${step.current ? '' : ''}`}>\n                          <div className=\"flex items-start justify-between\">\n                            <div>\n                              <p className={`font-bold ${step.current ? 'text-[#3D4736]' : step.completed ? 'text-slate-900' : 'text-slate-400'}`}>\n                                {step.label}\n                                {step.date && <span className=\"font-normal text-slate-500 ml-2\">on {step.date}</span>}\n                              </p>\n                              {step.current && step.status === 'dispatched' && (\n                                <div className=\"mt-1\">\n                                  <span className=\"text-xs font-medium text-green-600\">On time</span>\n                                  <p className=\"text-sm text-slate-500 mt-1 max-w-md\">\n                                    {step.description}\n                                  </p>\n                                </div>\n                              )}\n                            </div>\n                            {step.status === 'confirmed' && (\n                              <Button variant=\"outline\" size=\"sm\" className=\"text-xs h-8 border-slate-300\">\n                                RESCHEDULE\n                              </Button>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    );\n                  })}\n                  \n                  <button className=\"text-sm text-slate-600 hover:text-slate-900 mt-2 flex items-center gap-1\" data-testid=\"hide-full-tracking\">\n                    Hide full tracking <ChevronLeft className=\"h-4 w-4 rotate-90\" />\n                  </button>\n                </div>\n\n                {/* View Order / Invoice Summary */}\n                <div className=\"border-t border-slate-200 pt-6 mb-6\">\n                  <div className=\"flex justify-between items-center\">\n                    <h3 className=\"font-bold text-slate-900 uppercase\">View Order / Invoice Summary</h3>\n                    <button className=\"text-sm text-slate-600 hover:text-orange-600 flex items-center gap-1\" data-testid=\"view-invoice\">\n                      Find invoice and shipping details here <ChevronLeft className=\"h-4 w-4 rotate-180\" />\n                    </button>\n                  </div>\n                </div>\n\n                {/* Item Summary */}\n                <div className=\"border-t border-slate-200 pt-6\">\n                  <div className=\"flex justify-between items-start mb-4\">\n                    <div>\n                      <h3 className=\"font-bold text-slate-900 uppercase mb-1\">Item Summary</h3>\n                      <p className=\"text-xs text-slate-500\">Once packed, individual items cannot be cancelled.</p>\n                    </div>\n                    <Button variant=\"outline\" size=\"sm\" className=\"text-xs h-8 border-slate-300\" data-testid=\"cancel-shipment\">\n                      CANCEL SHIPMENT\n                    </Button>\n                  </div>\n\n                  {/* Product Item */}\n                  <div className=\"bg-[#EFEBE4] rounded-lg p-4 flex gap-4 items-center\">\n                    <div className=\"w-16 h-16 bg-white rounded p-2 flex-shrink-0\">\n                      <ProductImage \n                        src={order.items[0]?.image || ''} \n                        alt={order.items[0]?.name || 'Product'} \n                        className=\"w-full h-full object-contain\"\n                        placeholderClassName=\"w-full h-full\"\n                      />\n                    </div>\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-medium text-slate-900 text-sm\">{order.items[0]?.name || 'Product Name'}</h4>\n                      <p className=\"font-bold text-slate-900 mt-1\">\n                        <span className=\"text-orange-600\"></span> {order.items[0]?.price?.toFixed(2) || '679.00'}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Order ID */}\n                  <div className=\"mt-4 text-right text-sm text-slate-500\">\n                    Order ID: <span className=\"font-medium text-slate-700\">#{order.id?.slice(0, 18) || 'AMZ-12345678-987654'}</span>\n                  </div>\n                </div>\n              </div>\n            </main>\n          </div>\n        </div>\n      </div>\n\n      {/* Trust Badges */}\n      <div className=\"bg-[#3D4736] py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 text-center text-white\">\n            <div className=\"flex flex-col items-center gap-2\">\n              <Shield className=\"h-8 w-8\" />\n              <h4 className=\"font-bold uppercase text-sm\">Compliance Built In</h4>\n              <p className=\"text-xs text-slate-300\">Global standards. Automatic protection.</p>\n            </div>\n            <div className=\"flex flex-col items-center gap-2\">\n              <Lock className=\"h-8 w-8\" />\n              <h4 className=\"font-bold uppercase text-sm\">Secure Commerce Platform</h4>\n              <p className=\"text-xs text-slate-300\">Every transaction, fully encrypted.</p>\n            </div>\n            <div className=\"flex flex-col items-center gap-2\">\n              <CheckCircle2 className=\"h-8 w-8\" />\n              <h4 className=\"font-bold uppercase text-sm\">Verified Sellers & Buyers</h4>\n              <p className=\"text-xs text-slate-300\">Only trusted partners allowed.</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":18340,"size_tokens":null},"client/src/pages/account/order-details.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport ProductImage from \"@/components/ui/product-image\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { getAccessToken, clearTokens, api } from \"@/lib/api\";\nimport { Link, useLocation, useRoute } from \"wouter\";\nimport { \n  User, Package, Heart, RotateCcw, Shield, Bell, Lock, \n  LogOut, ChevronLeft, CheckCircle2, XCircle, Clock, Truck, MapPin,\n  CreditCard, AlertCircle\n} from \"lucide-react\";\nimport { useEffect } from \"react\";\n\nexport default function OrderDetailsPage() {\n  const [, setLocation] = useLocation();\n  const [, params] = useRoute(\"/account/orders/:id/details\");\n  const orderId = params?.id || \"\";\n\n  useEffect(() => {\n    const token = getAccessToken();\n    if (!token) {\n      setLocation('/auth/login');\n    }\n  }, [setLocation]);\n\n  const { data: orders, isLoading: ordersLoading } = useQuery({\n    queryKey: ['orders'],\n    queryFn: api.orders.getAll\n  });\n\n  const { data: currentUser } = useQuery({\n    queryKey: ['current-user'],\n    queryFn: api.auth.me\n  });\n\n  const order = orders?.find(o => o.id === orderId);\n\n  const handleLogout = async () => {\n    clearTokens();\n    setLocation('/');\n  };\n\n  const getUserInitials = () => {\n    if (!currentUser?.name) return 'JM';\n    const names = currentUser.name.split(' ');\n    return names.map((n: string) => n[0]).join('').toUpperCase().slice(0, 2);\n  };\n\n  const SidebarItem = ({ icon: Icon, label, active = false, onClick, href }: { icon: any, label: string, active?: boolean, onClick?: () => void, href?: string }) => {\n    const content = (\n      <div \n        className={`flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors ${active ? \"bg-[#3D4736] text-white\" : \"hover:bg-slate-100 text-slate-700\"}`}\n        onClick={onClick}\n        data-testid={`sidebar-${label.toLowerCase().replace(/\\s+/g, '-')}`}\n      >\n        <Icon className=\"h-4 w-4\" />\n        <span className=\"text-sm font-medium\">{label}</span>\n      </div>\n    );\n    \n    if (href) {\n      return <Link href={href}>{content}</Link>;\n    }\n    return content;\n  };\n\n  if (ordersLoading) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen py-20 text-center\">\n          <div className=\"animate-spin h-10 w-10 border-4 border-[#3D4736] border-t-transparent rounded-full mx-auto mb-4\" />\n          <p className=\"text-slate-500\">Loading order details...</p>\n        </div>\n      </Layout>\n    );\n  }\n\n  if (!order) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen py-20 text-center\">\n          <Package className=\"h-16 w-16 mx-auto text-slate-300 mb-4\" />\n          <h2 className=\"text-2xl font-bold mb-2\">Order not found</h2>\n          <p className=\"text-slate-500 mb-6\">The order you're looking for doesn't exist.</p>\n          <Link href=\"/account/profile\">\n            <Button className=\"bg-orange-600 hover:bg-orange-700\">Go to Orders</Button>\n          </Link>\n        </div>\n      </Layout>\n    );\n  }\n\n  const isCancelled = order.status === 'cancelled';\n  const isDelivered = order.status === 'delivered';\n  const shipmentId = `AMUAE${order.id?.replace(/-/g, '').slice(0, 12) || '0092259108'}`;\n\n  return (\n    <Layout>\n      <div className=\"bg-[#3D4736] text-white py-2\">\n        <div className=\"container mx-auto px-4 flex justify-between items-center text-xs\">\n          <div className=\"flex gap-4\"></div>\n          <div className=\"flex items-center gap-4\">\n             <Link href=\"/seller/dashboard\">\n               <Button size=\"sm\" variant=\"outline\" className=\"h-7 bg-white text-slate-900 border-white hover:bg-slate-100 font-bold text-xs uppercase rounded-full px-4\">\n                 Supplier Zone\n               </Button>\n             </Link>\n             <div className=\"flex items-center gap-2\">\n               <span>{currentUser?.name?.split(' ')[0] || 'John'}</span>\n               <div className=\"w-6 h-6 rounded-full border border-white grid place-items-center\">\n                 <User className=\"h-3 w-3\" />\n               </div>\n             </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-slate-50 min-h-screen py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex flex-col lg:flex-row gap-8\">\n            \n            {/* Sidebar */}\n            <aside className=\"w-full lg:w-64 flex-shrink-0 space-y-6\">\n              <div className=\"bg-[#EFEBE4] p-6 rounded-lg\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <div className=\"w-10 h-10 bg-[#3D4736] rounded-full text-white grid place-items-center font-bold\">\n                    {getUserInitials()}\n                  </div>\n                  <div>\n                    <div className=\"font-bold text-sm\">Hello, {currentUser?.name || 'John Martin'}</div>\n                    <div className=\"text-xs text-muted-foreground\">{currentUser?.email || 'info@johnmartin.com'}</div>\n                  </div>\n                </div>\n                <div className=\"text-xs font-medium text-orange-600 mb-1\">Profile Completion {currentUser?.completionPercentage || 80}%</div>\n                <div className=\"h-1.5 w-full bg-slate-200 rounded-full overflow-hidden\">\n                  <div className=\"h-full bg-orange-500\" style={{ width: `${currentUser?.completionPercentage || 80}%` }} />\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-lg overflow-hidden shadow-sm\">\n                <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase\">Orders & Activity</div>\n                <SidebarItem icon={Package} label=\"Orders\" href=\"/account/profile\" active />\n                <SidebarItem icon={Heart} label=\"Wishlist\" href=\"/account/wishlist\" />\n                <SidebarItem icon={RotateCcw} label=\"Returns\" />\n                <SidebarItem icon={Shield} label=\"Warranty Claims\" />\n                \n                <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase mt-2\">My Account</div>\n                <SidebarItem icon={User} label=\"User Profile\" href=\"/account/profile/edit\" />\n                <SidebarItem icon={User} label=\"Address\" />\n                <SidebarItem icon={CreditCard} label=\"Payments\" />\n                \n                <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase mt-2\">Others</div>\n                <SidebarItem icon={Bell} label=\"Notifications\" />\n                <SidebarItem icon={Lock} label=\"Security Settings\" href=\"/account/profile\" />\n              </div>\n\n              <div className=\"bg-white rounded-lg overflow-hidden shadow-sm\">\n                <SidebarItem icon={LogOut} label=\"Log Out\" onClick={handleLogout} />\n              </div>\n            </aside>\n\n            {/* Main Content */}\n            <main className=\"flex-1\">\n              {/* Header */}\n              <div className=\"flex items-center gap-4 mb-6\">\n                <Link href=\"/account/profile\">\n                  <button className=\"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors\" data-testid=\"back-to-orders\">\n                    <ChevronLeft className=\"h-5 w-5\" />\n                  </button>\n                </Link>\n                <h1 className=\"text-3xl font-display font-bold uppercase text-[#3D4736]\">\n                  Tracking Details\n                </h1>\n              </div>\n\n              {/* Shipment Info Bar */}\n              <div className=\"flex justify-between items-center mb-6 text-sm\">\n                <div>\n                  <span className=\"text-slate-600\">Item ID </span>\n                  <span className=\"font-bold text-slate-900\">{shipmentId}</span>\n                </div>\n                <div className=\"text-slate-600\">\n                  Order Date: <span className=\"font-medium text-slate-900\">{order.createdAt ? new Date(order.createdAt).toLocaleDateString('en-US', { day: 'numeric', month: 'short', year: 'numeric' }) : 'N/A'}</span>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6\">\n                {/* Status Banner */}\n                <div className=\"flex items-center justify-between mb-6 p-4 bg-slate-50 rounded-lg border border-slate-200\">\n                  <div className=\"flex items-center gap-3\">\n                    {isCancelled ? (\n                      <XCircle className=\"h-6 w-6 text-red-500\" />\n                    ) : (\n                      <CheckCircle2 className=\"h-6 w-6 text-green-500\" />\n                    )}\n                    <div>\n                      <p className={`font-bold ${isCancelled ? 'text-red-600' : 'text-green-600'}`}>\n                        {isCancelled ? 'Cancelled' : 'Delivered'} \n                        <span className=\"font-normal text-slate-600 ml-2\">\n                          on {order.createdAt ? new Date(order.createdAt).toLocaleDateString('en-US', { day: 'numeric', month: 'short' }) : 'N/A'}\n                        </span>\n                      </p>\n                      {isCancelled && (\n                        <p className=\"text-sm text-slate-500\">Reason: Payment Failure</p>\n                      )}\n                    </div>\n                  </div>\n                  {isCancelled && (\n                    <Button variant=\"outline\" size=\"sm\" className=\"text-xs h-8 border-slate-300\" data-testid=\"track-refund\">\n                      TRACK REFUND\n                    </Button>\n                  )}\n                </div>\n\n                {/* Delivery Address */}\n                <div className=\"mb-6\">\n                  <h3 className=\"text-xs font-bold text-slate-500 uppercase mb-3\">Delivery Address (Other)</h3>\n                  <div className=\"text-sm\">\n                    <p className=\"font-bold text-slate-900\">{currentUser?.name || 'John Martin'}</p>\n                    <p className=\"text-slate-600\">Al Qusais, Dubai, United Arab Emirates</p>\n                    <p className=\"text-slate-600 flex items-center gap-2\">\n                      +971 501234567 \n                      <span className=\"text-xs text-green-600 flex items-center gap-1\">\n                        <CheckCircle2 className=\"h-3 w-3\" /> Verified\n                      </span>\n                    </p>\n                  </div>\n                </div>\n\n                {/* View Order / Invoice Summary */}\n                <div className=\"border-t border-slate-200 pt-6 mb-6\">\n                  <div className=\"flex justify-between items-center\">\n                    <h3 className=\"font-bold text-slate-900 uppercase\">View Order / Invoice Summary</h3>\n                    <button className=\"text-sm text-slate-600 hover:text-orange-600 flex items-center gap-1\" data-testid=\"view-invoice\">\n                      Find invoice and shipping details here <ChevronLeft className=\"h-4 w-4 rotate-180\" />\n                    </button>\n                  </div>\n                </div>\n\n                {/* Item Summary */}\n                <div className=\"border-t border-slate-200 pt-6\">\n                  <h3 className=\"font-bold text-slate-900 uppercase mb-4\">Item Summary</h3>\n\n                  {/* Product Item */}\n                  <div className=\"bg-[#EFEBE4] rounded-lg p-4 flex gap-4 items-center\">\n                    <div className=\"w-16 h-16 bg-white rounded p-2 flex-shrink-0\">\n                      <ProductImage \n                        src={order.items[0]?.image || ''} \n                        alt={order.items[0]?.name || 'Product'} \n                        className=\"w-full h-full object-contain\"\n                        placeholderClassName=\"w-full h-full\"\n                      />\n                    </div>\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-medium text-slate-900 text-sm\">{order.items[0]?.name || 'Product Name'}</h4>\n                      <p className=\"font-bold text-slate-900 mt-1\">\n                        <span className=\"text-orange-600\"></span> {order.items[0]?.price?.toFixed(2) || '679.00'}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Order ID */}\n                  <div className=\"mt-4 text-right text-sm text-slate-500\">\n                    Order ID: <span className=\"font-medium text-slate-700\">#{order.id?.slice(0, 18) || 'AMZ-12345678-987654'}</span>\n                  </div>\n                </div>\n              </div>\n            </main>\n          </div>\n        </div>\n      </div>\n\n      {/* Trust Badges */}\n      <div className=\"bg-[#3D4736] py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 text-center text-white\">\n            <div className=\"flex flex-col items-center gap-2\">\n              <Shield className=\"h-8 w-8\" />\n              <h4 className=\"font-bold uppercase text-sm\">Compliance Built In</h4>\n              <p className=\"text-xs text-slate-300\">Global standards. Automatic protection.</p>\n            </div>\n            <div className=\"flex flex-col items-center gap-2\">\n              <Lock className=\"h-8 w-8\" />\n              <h4 className=\"font-bold uppercase text-sm\">Secure Commerce Platform</h4>\n              <p className=\"text-xs text-slate-300\">Every transaction, fully encrypted.</p>\n            </div>\n            <div className=\"flex flex-col items-center gap-2\">\n              <CheckCircle2 className=\"h-8 w-8\" />\n              <h4 className=\"font-bold uppercase text-sm\">Verified Sellers & Buyers</h4>\n              <p className=\"text-xs text-slate-300\">Only trusted partners allowed.</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":13784,"size_tokens":null},"client/src/components/layout/AccountSidebar.tsx":{"content":"import { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  User, Package, Heart, RotateCcw, Shield, Bell, Lock, \n  LogOut, Monitor, CreditCard, MapPin\n} from \"lucide-react\";\n\ninterface AccountSidebarProps {\n  currentUser?: { name?: string; email?: string; completionPercentage?: number; userType?: string } | null;\n  activeSection?: 'orders' | 'sessions' | 'addresses' | 'payments' | 'profile' | 'wishlist';\n  onSectionChange?: (section: 'orders' | 'sessions' | 'addresses' | 'payments') => void;\n  onLogout?: () => void;\n}\n\nexport default function AccountSidebar({ currentUser, activeSection, onSectionChange, onLogout }: AccountSidebarProps) {\n  const getUserInitials = () => {\n    if (!currentUser?.name) return 'JM';\n    const names = currentUser.name.split(' ');\n    return names.map((n: string) => n[0]).join('').toUpperCase().slice(0, 2);\n  };\n\n  const SidebarItem = ({ icon: Icon, label, active = false, onClick, href }: { \n    icon: any; \n    label: string; \n    active?: boolean; \n    onClick?: () => void; \n    href?: string;\n  }) => {\n    const content = (\n      <div \n        className={`flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors ${active ? \"bg-[#3D4736] text-white\" : \"hover:bg-slate-100 text-slate-700\"}`}\n        onClick={onClick}\n        data-testid={`sidebar-${label.toLowerCase().replace(/\\s+/g, '-')}`}\n      >\n        <Icon className=\"h-4 w-4\" />\n        <span className=\"text-sm font-medium\">{label}</span>\n      </div>\n    );\n    \n    if (href) {\n      return <Link href={href}>{content}</Link>;\n    }\n    return content;\n  };\n\n  return (\n    <aside className=\"w-full lg:w-64 flex-shrink-0 space-y-6\">\n      <div className=\"bg-[#EFEBE4] p-6 rounded-lg\">\n        <div className=\"flex items-center gap-3 mb-2\">\n          <div className=\"w-10 h-10 bg-[#3D4736] rounded-full text-white grid place-items-center font-bold\">\n            {getUserInitials()}\n          </div>\n          <div>\n            <div className=\"font-bold text-sm\">Hello, {currentUser?.name || 'Guest'}</div>\n            <div className=\"text-xs text-muted-foreground\">{currentUser?.email || ''}</div>\n          </div>\n        </div>\n        <div className=\"text-xs font-medium text-orange-600 mb-1\">Profile Completion {currentUser?.completionPercentage || 80}%</div>\n        <div className=\"h-1.5 w-full bg-slate-200 rounded-full overflow-hidden\">\n          <div className=\"h-full bg-orange-500\" style={{ width: `${currentUser?.completionPercentage || 80}%` }} />\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-lg overflow-hidden shadow-sm\">\n        <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase\">Orders & Activity</div>\n        <SidebarItem \n          icon={Package} \n          label=\"Orders\" \n          active={activeSection === 'orders'} \n          href=\"/account/profile?section=orders\"\n        />\n        <SidebarItem icon={Heart} label=\"Wishlist\" href=\"/account/wishlist\" active={activeSection === 'wishlist'} />\n        <SidebarItem icon={RotateCcw} label=\"Returns\" />\n        <SidebarItem icon={Shield} label=\"Warranty Claims\" />\n        \n        <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase mt-2\">My Account</div>\n        <SidebarItem \n          icon={User} \n          label=\"User Profile\" \n          href=\"/account/profile/edit\" \n          active={activeSection === 'profile'}\n        />\n        <SidebarItem \n          icon={MapPin} \n          label=\"Addresses\" \n          active={activeSection === 'addresses'} \n          href=\"/account/profile?section=addresses\"\n        />\n        <SidebarItem \n          icon={CreditCard} \n          label=\"Saved Payments\" \n          active={activeSection === 'payments'} \n          href=\"/account/profile?section=payments\"\n        />\n\n        <div className=\"px-4 py-3 bg-slate-50 text-xs font-bold text-slate-500 uppercase mt-2\">Security</div>\n        <SidebarItem \n          icon={Monitor} \n          label=\"Active Sessions\" \n          active={activeSection === 'sessions'} \n          href=\"/account/profile?section=sessions\"\n        />\n        <SidebarItem icon={Bell} label=\"Notifications\" />\n        <SidebarItem icon={Lock} label=\"Security Settings\" />\n        \n        {onLogout && (\n          <div className=\"p-4 mt-2 border-t\">\n            <Button variant=\"ghost\" className=\"w-full justify-start gap-3 text-red-600 hover:text-red-700 hover:bg-red-50\" onClick={onLogout}>\n              <LogOut className=\"h-4 w-4\" /> Log Out\n            </Button>\n          </div>\n        )}\n      </div>\n    </aside>\n  );\n}\n","path":null,"size_bytes":4603,"size_tokens":null}},"version":2}